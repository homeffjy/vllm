+ main vllm
+ '[' 1 -eq 0 ']'
+ check_gpus
++ nvidia-smi --list-gpus
++ wc -l
+ declare -g gpu_count=1
+ [[ 1 -gt 0 ]]
+ echo 'GPU found.'
GPU found.
++ awk '{print $2}'
+++ nvidia-smi --query-gpu=name --format=csv,noheader
++ echo NVIDIA A100-SXM4-40GB
+ declare -g gpu_type=A100-SXM4-40GB
+ echo 'GPU type is A100-SXM4-40GB'
GPU type is A100-SXM4-40GB
+ export CURRENT_LLM_SERVING_ENGINE=vllm
+ CURRENT_LLM_SERVING_ENGINE=vllm
+++ dirname ./run-benchmarks.sh
++ realpath ./../../
+ export VLLM_SOURCE_CODE_LOC=/home/fjy/vllm
+ VLLM_SOURCE_CODE_LOC=/home/fjy/vllm
+ pip install -U transformers matplotlib seaborn tabulate
Defaulting to user installation because normal site-packages is not writeable
Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple
Requirement already satisfied: transformers in /home/fjy/.local/lib/python3.10/site-packages (4.45.2)
Requirement already satisfied: matplotlib in /home/fjy/.local/lib/python3.10/site-packages (3.9.2)
Requirement already satisfied: seaborn in /home/fjy/.local/lib/python3.10/site-packages (0.13.2)
Requirement already satisfied: tabulate in /home/fjy/.local/lib/python3.10/site-packages (0.9.0)
Requirement already satisfied: filelock in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from transformers) (3.15.4)
Requirement already satisfied: huggingface-hub<1.0,>=0.23.2 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from transformers) (0.24.0)
Requirement already satisfied: numpy>=1.17 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from transformers) (1.26.4)
Requirement already satisfied: packaging>=20.0 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from transformers) (24.1)
Requirement already satisfied: pyyaml>=5.1 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from transformers) (6.0.1)
Requirement already satisfied: regex!=2019.12.17 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from transformers) (2024.5.15)
Requirement already satisfied: requests in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from transformers) (2.32.3)
Requirement already satisfied: safetensors>=0.4.1 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from transformers) (0.4.3)
Requirement already satisfied: tokenizers<0.21,>=0.20 in /home/fjy/.local/lib/python3.10/site-packages (from transformers) (0.20.1)
Requirement already satisfied: tqdm>=4.27 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from transformers) (4.66.4)
Requirement already satisfied: contourpy>=1.0.1 in /home/fjy/.local/lib/python3.10/site-packages (from matplotlib) (1.3.0)
Requirement already satisfied: cycler>=0.10 in /home/fjy/.local/lib/python3.10/site-packages (from matplotlib) (0.12.1)
Requirement already satisfied: fonttools>=4.22.0 in /home/fjy/.local/lib/python3.10/site-packages (from matplotlib) (4.54.1)
Requirement already satisfied: kiwisolver>=1.3.1 in /home/fjy/.local/lib/python3.10/site-packages (from matplotlib) (1.4.7)
Requirement already satisfied: pillow>=8 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from matplotlib) (10.4.0)
Requirement already satisfied: pyparsing>=2.3.1 in /home/fjy/.local/lib/python3.10/site-packages (from matplotlib) (3.2.0)
Requirement already satisfied: python-dateutil>=2.7 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from matplotlib) (2.9.0.post0)
Requirement already satisfied: pandas>=1.2 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from seaborn) (2.2.2)
Requirement already satisfied: fsspec>=2023.5.0 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from huggingface-hub<1.0,>=0.23.2->transformers) (2024.5.0)
Requirement already satisfied: typing-extensions>=3.7.4.3 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from huggingface-hub<1.0,>=0.23.2->transformers) (4.12.2)
Requirement already satisfied: pytz>=2020.1 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from pandas>=1.2->seaborn) (2024.1)
Requirement already satisfied: tzdata>=2022.7 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from pandas>=1.2->seaborn) (2024.1)
Requirement already satisfied: six>=1.5 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from python-dateutil>=2.7->matplotlib) (1.16.0)
Requirement already satisfied: charset-normalizer<4,>=2 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from requests->transformers) (3.3.2)
Requirement already satisfied: idna<4,>=2.5 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from requests->transformers) (3.7)
Requirement already satisfied: urllib3<3,>=1.21.1 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from requests->transformers) (2.2.2)
Requirement already satisfied: certifi>=2017.4.17 in /opt/miniconda3/envs/vllm/lib/python3.10/site-packages (from requests->transformers) (2024.7.4)
+ df -h
Filesystem                   Size  Used Avail Use% Mounted on
tmpfs                         51G  4.0M   51G   1% /run
efivarfs                     512K  163K  345K  32% /sys/firmware/efi/efivars
/dev/nvme0n1p2               1.8T  1.3T  408G  77% /
tmpfs                        252G  8.0K  252G   1% /dev/shm
tmpfs                        5.0M  8.0K  5.0M   1% /run/lock
/dev/nvme0n1p1               1.1G  6.2M  1.1G   1% /boot/efi
/dev/mapper/data_vg-data_lv  7.3T  6.9T  427G  95% /data
tmpfs                         51G  128K   51G   1% /run/user/1451800082
tmpfs                         51G   32K   51G   1% /run/user/1451800038
tmpfs                         51G   20K   51G   1% /run/user/1451800031
tmpfs                         51G   48K   51G   1% /run/user/1451800049
tmpfs                         51G   24K   51G   1% /run/user/1451800028
tmpfs                         51G   20K   51G   1% /run/user/1451800036
tmpfs                         51G   44K   51G   1% /run/user/1451800011
tmpfs                         51G   20K   51G   1% /run/user/1451800035
tmpfs                         51G   20K   51G   1% /run/user/1451800045
tmpfs                         51G   20K   51G   1% /run/user/1451800008
tmpfs                         51G   44K   51G   1% /run/user/1451800044
+ ensure_installed wget
+ local cmd=wget
+ which wget
+ ensure_installed curl
+ local cmd=curl
+ which curl
+ ensure_installed jq
+ local cmd=jq
+ which jq
+ cd /home/fjy/vllm/benchmarks
+ declare -g RESULTS_FOLDER=results/
+ mkdir -p results/
+ BENCHMARK_ROOT=/home/fjy/vllm/benchmarks
+ run_serving_tests /home/fjy/vllm/benchmarks/scripts/tests.json
+ local serving_test_file
+ serving_test_file=/home/fjy/vllm/benchmarks/scripts/tests.json
+ jq -c '.[]' /home/fjy/vllm/benchmarks/scripts/tests.json
+ read -r params
++ echo '{"test_name":"qwen7B_ib_prefix","qps_list":[1,4,16,64],"common_parameters":{"model":"/data/llm/Qwen2.5-7B-Instruct-copy/","tp":1,"dataset_name":"ib","dataset_path":"/data/ds/InfiniteBench/","num_prompts":64,"port":8000,"reuse_server":false,"ib_input_len_list":[2048,10240,40960,81920]},"vllm_server_parameters":{"enable_prefix_caching":"","disable_log_requests":"","gpu_memory_utilization":0.9,"max_num_seqs":512,"enable_chunked_prefill":true,"max_num_batched_tokens":512,"swap_space":0,"dtype":"bfloat16"},"vllm_client_parameters":{},"sglang_server_parameters":{"enable_torch_compile":"","mem_fraction_static":0.9,"max_running_request":512,"chunked_prefill_size":512,"dtype":"bfloat16"},"sglang_client_parameters":{}}'
++ jq -r .test_name
+ test_name=qwen7B_ib_prefix
+ [[ -n '' ]]
+ test_name=vllm_qwen7B_ib_prefix
++ echo '{"test_name":"qwen7B_ib_prefix","qps_list":[1,4,16,64],"common_parameters":{"model":"/data/llm/Qwen2.5-7B-Instruct-copy/","tp":1,"dataset_name":"ib","dataset_path":"/data/ds/InfiniteBench/","num_prompts":64,"port":8000,"reuse_server":false,"ib_input_len_list":[2048,10240,40960,81920]},"vllm_server_parameters":{"enable_prefix_caching":"","disable_log_requests":"","gpu_memory_utilization":0.9,"max_num_seqs":512,"enable_chunked_prefill":true,"max_num_batched_tokens":512,"swap_space":0,"dtype":"bfloat16"},"vllm_client_parameters":{},"sglang_server_parameters":{"enable_torch_compile":"","mem_fraction_static":0.9,"max_running_request":512,"chunked_prefill_size":512,"dtype":"bfloat16"},"sglang_client_parameters":{}}'
++ jq -r .common_parameters
+ common_params='{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .model
+ model=/data/llm/Qwen2.5-7B-Instruct-copy/
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .tp
+ tp=1
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .dataset_name
+ dataset_name=ib
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .dataset_path
+ dataset_path=/data/ds/InfiniteBench/
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .port
+ port=8000
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .num_prompts
+ num_prompts=64
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .reuse_server
+ reuse_server=false
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .ib_input_len_list
+ ib_input_len_list='[
  2048,
  10240,
  40960,
  81920
]'
++ echo '[' 2048, 10240, 40960, 81920 ']'
++ jq -r '.[]'
+ ib_input_len_list='2048
10240
40960
81920'
++ echo '{"test_name":"qwen7B_ib_prefix","qps_list":[1,4,16,64],"common_parameters":{"model":"/data/llm/Qwen2.5-7B-Instruct-copy/","tp":1,"dataset_name":"ib","dataset_path":"/data/ds/InfiniteBench/","num_prompts":64,"port":8000,"reuse_server":false,"ib_input_len_list":[2048,10240,40960,81920]},"vllm_server_parameters":{"enable_prefix_caching":"","disable_log_requests":"","gpu_memory_utilization":0.9,"max_num_seqs":512,"enable_chunked_prefill":true,"max_num_batched_tokens":512,"swap_space":0,"dtype":"bfloat16"},"vllm_client_parameters":{},"sglang_server_parameters":{"enable_torch_compile":"","mem_fraction_static":0.9,"max_running_request":512,"chunked_prefill_size":512,"dtype":"bfloat16"},"sglang_client_parameters":{}}'
++ jq -r .vllm_server_parameters
+ server_params='{
  "enable_prefix_caching": "",
  "disable_log_requests": "",
  "gpu_memory_utilization": 0.9,
  "max_num_seqs": 512,
  "enable_chunked_prefill": true,
  "max_num_batched_tokens": 512,
  "swap_space": 0,
  "dtype": "bfloat16"
}'
++ echo '{"test_name":"qwen7B_ib_prefix","qps_list":[1,4,16,64],"common_parameters":{"model":"/data/llm/Qwen2.5-7B-Instruct-copy/","tp":1,"dataset_name":"ib","dataset_path":"/data/ds/InfiniteBench/","num_prompts":64,"port":8000,"reuse_server":false,"ib_input_len_list":[2048,10240,40960,81920]},"vllm_server_parameters":{"enable_prefix_caching":"","disable_log_requests":"","gpu_memory_utilization":0.9,"max_num_seqs":512,"enable_chunked_prefill":true,"max_num_batched_tokens":512,"swap_space":0,"dtype":"bfloat16"},"vllm_client_parameters":{},"sglang_server_parameters":{"enable_torch_compile":"","mem_fraction_static":0.9,"max_running_request":512,"chunked_prefill_size":512,"dtype":"bfloat16"},"sglang_client_parameters":{}}'
++ jq -r .vllm_client_parameters
+ client_params='{}'
++ json2args '{}'
++ local 'json_string={}'
+++ echo '{}'
+++ jq -r '
      to_entries |
      map("--" + (.key | gsub("_"; "-")) + " " + (.value | tostring)) |
      join(" ")
    '
++ local args=
++ echo ''
+ client_args=
++ echo '{"test_name":"qwen7B_ib_prefix","qps_list":[1,4,16,64],"common_parameters":{"model":"/data/llm/Qwen2.5-7B-Instruct-copy/","tp":1,"dataset_name":"ib","dataset_path":"/data/ds/InfiniteBench/","num_prompts":64,"port":8000,"reuse_server":false,"ib_input_len_list":[2048,10240,40960,81920]},"vllm_server_parameters":{"enable_prefix_caching":"","disable_log_requests":"","gpu_memory_utilization":0.9,"max_num_seqs":512,"enable_chunked_prefill":true,"max_num_batched_tokens":512,"swap_space":0,"dtype":"bfloat16"},"vllm_client_parameters":{},"sglang_server_parameters":{"enable_torch_compile":"","mem_fraction_static":0.9,"max_running_request":512,"chunked_prefill_size":512,"dtype":"bfloat16"},"sglang_client_parameters":{}}'
++ jq -r .qps_list
+ qps_list='[
  1,
  4,
  16,
  64
]'
++ jq -r '.[] | @sh'
++ echo '[
  1,
  4,
  16,
  64
]'
+ qps_list='1
4
16
64'
+ echo 'Running over qps list 1
4
16
64'
Running over qps list 1
4
16
64
+ [[ 1 -lt 1 ]]
+ [[ false == \t\r\u\e ]]
+ kill_gpu_processes
++ whoami
+ pkill -u fjy -f python
++ whoami
+ pkill -u fjy -f python3
++ whoami
+ pkill -u fjy -f tritonserver
++ whoami
+ pkill -u fjy -f pt_main_thread
++ whoami
+ pkill -u fjy -f text-generation
++ whoami
+ pkill -u fjy -f lmdeploy
++ nvidia-smi --query-gpu=memory.used --format=csv,noheader,nounits
++ head -n 1
+ '[' 4 -ge 1000 ']'
+ [[ vllm == \s\g\l\a\n\g ]]
+ [[ vllm == *\v\l\l\m* ]]
+ launch_vllm_server
++ hostname -I
++ awk '{print $1}'
+ export VLLM_HOST_IP=192.168.1.30
+ VLLM_HOST_IP=192.168.1.30
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .model
+ model=/data/llm/Qwen2.5-7B-Instruct-copy/
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .tp
+ tp=1
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .dataset_name
+ dataset_name=ib
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .dataset_path
+ dataset_path=/data/ds/InfiniteBench/
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
++ jq -r .port
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
+ port=8000
++ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
++ jq -r .num_prompts
+ num_prompts=64
++ json2args '{
  "enable_prefix_caching": "",
  "disable_log_requests": "",
  "gpu_memory_utilization": 0.9,
  "max_num_seqs": 512,
  "enable_chunked_prefill": true,
  "max_num_batched_tokens": 512,
  "swap_space": 0,
  "dtype": "bfloat16"
}'
++ local 'json_string={
  "enable_prefix_caching": "",
  "disable_log_requests": "",
  "gpu_memory_utilization": 0.9,
  "max_num_seqs": 512,
  "enable_chunked_prefill": true,
  "max_num_batched_tokens": 512,
  "swap_space": 0,
  "dtype": "bfloat16"
}'
+++ echo '{
  "enable_prefix_caching": "",
  "disable_log_requests": "",
  "gpu_memory_utilization": 0.9,
  "max_num_seqs": 512,
  "enable_chunked_prefill": true,
  "max_num_batched_tokens": 512,
  "swap_space": 0,
  "dtype": "bfloat16"
}'
+++ jq -r '
      to_entries |
      map("--" + (.key | gsub("_"; "-")) + " " + (.value | tostring)) |
      join(" ")
    '
++ local 'args=--enable-prefix-caching  --disable-log-requests  --gpu-memory-utilization 0.9 --max-num-seqs 512 --enable-chunked-prefill true --max-num-batched-tokens 512 --swap-space 0 --dtype bfloat16'
++ echo '--enable-prefix-caching  --disable-log-requests  --gpu-memory-utilization 0.9 --max-num-seqs 512 --enable-chunked-prefill true --max-num-batched-tokens 512 --swap-space 0 --dtype bfloat16'
+ server_args='--enable-prefix-caching  --disable-log-requests  --gpu-memory-utilization 0.9 --max-num-seqs 512 --enable-chunked-prefill true --max-num-batched-tokens 512 --swap-space 0 --dtype bfloat16'
+ jq -e 'has("fp8")'
+ echo '{
  "model": "/data/llm/Qwen2.5-7B-Instruct-copy/",
  "tp": 1,
  "dataset_name": "ib",
  "dataset_path": "/data/ds/InfiniteBench/",
  "num_prompts": 64,
  "port": 8000,
  "reuse_server": false,
  "ib_input_len_list": [
    2048,
    10240,
    40960,
    81920
  ]
}'
+ echo 'Key '\''fp8'\'' does not exist in common params.'
Key 'fp8' does not exist in common params.
+ server_command='python3         -m vllm.entrypoints.openai.api_server         -tp 1         --model /data/llm/Qwen2.5-7B-Instruct-copy/         --port 8000         --enable-prefix-caching  --disable-log-requests  --gpu-memory-utilization 0.9 --max-num-seqs 512 --enable-chunked-prefill true --max-num-batched-tokens 512 --swap-space 0 --dtype bfloat16'
+ echo 'Server command: python3         -m vllm.entrypoints.openai.api_server         -tp 1         --model /data/llm/Qwen2.5-7B-Instruct-copy/         --port 8000         --enable-prefix-caching  --disable-log-requests  --gpu-memory-utilization 0.9 --max-num-seqs 512 --enable-chunked-prefill true --max-num-batched-tokens 512 --swap-space 0 --dtype bfloat16'
Server command: python3         -m vllm.entrypoints.openai.api_server         -tp 1         --model /data/llm/Qwen2.5-7B-Instruct-copy/         --port 8000         --enable-prefix-caching  --disable-log-requests  --gpu-memory-utilization 0.9 --max-num-seqs 512 --enable-chunked-prefill true --max-num-batched-tokens 512 --swap-space 0 --dtype bfloat16
+ wait_for_server
+ timeout 1200 bash -c '
    until curl -s localhost:8000/v1/completions > /dev/null; do
      sleep 1
    done'
+ eval 'python3         -m vllm.entrypoints.openai.api_server         -tp 1         --model /data/llm/Qwen2.5-7B-Instruct-copy/         --port 8000         --enable-prefix-caching  --disable-log-requests  --gpu-memory-utilization 0.9 --max-num-seqs 512 --enable-chunked-prefill true --max-num-batched-tokens 512 --swap-space 0 --dtype bfloat16'
++ python3 -m vllm.entrypoints.openai.api_server -tp 1 --model /data/llm/Qwen2.5-7B-Instruct-copy/ --port 8000 --enable-prefix-caching --disable-log-requests --gpu-memory-utilization 0.9 --max-num-seqs 512 --enable-chunked-prefill true --max-num-batched-tokens 512 --swap-space 0 --dtype bfloat16
INFO 10-22 10:22:03 api_server.py:495] vLLM API server version 0.6.1.post2
INFO 10-22 10:22:03 api_server.py:496] args: Namespace(host=None, port=8000, uvicorn_log_level='info', allow_credentials=False, allowed_origins=['*'], allowed_methods=['*'], allowed_headers=['*'], api_key=None, lora_modules=None, prompt_adapters=None, chat_template=None, response_role='assistant', ssl_keyfile=None, ssl_certfile=None, ssl_ca_certs=None, ssl_cert_reqs=0, root_path=None, middleware=[], return_tokens_as_token_ids=False, disable_frontend_multiprocessing=False, enable_auto_tool_choice=False, tool_call_parser=None, model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, skip_tokenizer_init=False, revision=None, code_revision=None, tokenizer_revision=None, tokenizer_mode='auto', trust_remote_code=False, download_dir=None, load_format='auto', config_format='auto', dtype='bfloat16', kv_cache_dtype='auto', quantization_param_path=None, max_model_len=None, guided_decoding_backend='outlines', distributed_executor_backend=None, worker_use_ray=False, pipeline_parallel_size=1, tensor_parallel_size=1, max_parallel_loading_workers=None, ray_workers_use_nsight=False, block_size=16, enable_prefix_caching=True, disable_sliding_window=False, use_v2_block_manager=False, num_lookahead_slots=0, seed=0, swap_space=0.0, cpu_offload_gb=0, gpu_memory_utilization=0.9, num_gpu_blocks_override=None, max_num_batched_tokens=512, max_num_seqs=512, max_logprobs=20, disable_log_stats=False, quantization=None, rope_scaling=None, rope_theta=None, enforce_eager=False, max_context_len_to_capture=None, max_seq_len_to_capture=8192, disable_custom_all_reduce=False, tokenizer_pool_size=0, tokenizer_pool_type='ray', tokenizer_pool_extra_config=None, limit_mm_per_prompt=None, enable_lora=False, max_loras=1, max_lora_rank=16, lora_extra_vocab_size=256, lora_dtype='auto', long_lora_scaling_factors=None, max_cpu_loras=None, fully_sharded_loras=False, enable_prompt_adapter=False, max_prompt_adapters=1, max_prompt_adapter_token=0, device='auto', num_scheduler_steps=1, scheduler_delay_factor=0.0, enable_chunked_prefill=True, speculative_model=None, speculative_model_quantization=None, num_speculative_tokens=None, speculative_draft_tensor_parallel_size=None, speculative_max_model_len=None, speculative_disable_by_batch_size=None, ngram_prompt_lookup_max=None, ngram_prompt_lookup_min=None, spec_decoding_acceptance_method='rejection_sampler', typical_acceptance_sampler_posterior_threshold=None, typical_acceptance_sampler_posterior_alpha=None, disable_logprobs_during_spec_decoding=None, model_loader_extra_config=None, ignore_patterns=[], preemption_mode=None, served_model_name=None, qlora_adapter_name_or_path=None, otlp_traces_endpoint=None, collect_detailed_traces=None, disable_async_output_proc=False, override_neuron_config=None, disable_log_requests=True, max_log_len=None)
Unrecognized keys in `rope_scaling` for 'rope_type'='yarn': {'original_max_position_embeddings'}
INFO 10-22 10:22:03 api_server.py:162] Multiprocessing frontend to use ipc:///tmp/bbbb02f3-7c7b-419a-bed6-bf5ca6cd5dd9 for RPC Path.
INFO 10-22 10:22:03 api_server.py:178] Started engine process with PID 469376
Unrecognized keys in `rope_scaling` for 'rope_type'='yarn': {'original_max_position_embeddings'}
INFO 10-22 10:22:05 config.py:1013] Chunked prefill is enabled with max_num_batched_tokens=512.
INFO 10-22 10:22:05 llm_engine.py:223] Initializing an LLM engine (v0.6.1.post2) with config: model='/data/llm/Qwen2.5-7B-Instruct-copy/', speculative_config=None, tokenizer='/data/llm/Qwen2.5-7B-Instruct-copy/', skip_tokenizer_init=False, tokenizer_mode=auto, revision=None, override_neuron_config=None, rope_scaling=None, rope_theta=None, tokenizer_revision=None, trust_remote_code=False, dtype=torch.bfloat16, max_seq_len=131072, download_dir=None, load_format=LoadFormat.AUTO, tensor_parallel_size=1, pipeline_parallel_size=1, disable_custom_all_reduce=False, quantization=None, enforce_eager=False, kv_cache_dtype=auto, quantization_param_path=None, device_config=cuda, decoding_config=DecodingConfig(guided_decoding_backend='outlines'), observability_config=ObservabilityConfig(otlp_traces_endpoint=None, collect_model_forward_time=False, collect_model_execute_time=False), seed=0, served_model_name=/data/llm/Qwen2.5-7B-Instruct-copy/, use_v2_block_manager=False, num_scheduler_steps=1, enable_prefix_caching=True, use_async_output_proc=True)
INFO 10-22 10:22:06 model_runner.py:997] Starting to load model /data/llm/Qwen2.5-7B-Instruct-copy/...
Loading safetensors checkpoint shards:   0% Completed | 0/4 [00:00<?, ?it/s]
Loading safetensors checkpoint shards:  25% Completed | 1/4 [00:00<00:01,  2.12it/s]
Loading safetensors checkpoint shards:  50% Completed | 2/4 [00:00<00:00,  2.04it/s]
Loading safetensors checkpoint shards:  75% Completed | 3/4 [00:01<00:00,  2.09it/s]
Loading safetensors checkpoint shards: 100% Completed | 4/4 [00:01<00:00,  2.06it/s]
Loading safetensors checkpoint shards: 100% Completed | 4/4 [00:01<00:00,  2.07it/s]

INFO 10-22 10:22:08 model_runner.py:1008] Loading model weights took 14.2716 GB
INFO 10-22 10:22:08 gpu_executor.py:122] # GPU blocks: 21069, # CPU blocks: 0
INFO 10-22 10:22:08 model_runner.py:1311] Capturing the model for CUDA graphs. This may lead to unexpected consequences if the model is not static. To run the model in eager mode, set 'enforce_eager=True' or use '--enforce-eager' in the CLI.
INFO 10-22 10:22:08 model_runner.py:1315] CUDA graphs can take additional 1~3 GiB memory per GPU. If you are running out of memory, consider decreasing `gpu_memory_utilization` or enforcing eager mode. You can also reduce the `max_num_seqs` as needed to decrease memory usage.
INFO 10-22 10:22:20 model_runner.py:1430] Graph capturing finished in 11 secs.
INFO 10-22 10:22:20 block_manager_v1.py:263] Automatic prefix caching is enabled.
INFO 10-22 10:22:20 api_server.py:226] vLLM to use /tmp/tmpc8de3w_7 as PROMETHEUS_MULTIPROC_DIR
WARNING 10-22 10:22:20 serving_embedding.py:190] embedding_mode is False. Embedding API will not work.
INFO 10-22 10:22:20 launcher.py:20] Available routes are:
INFO 10-22 10:22:20 launcher.py:28] Route: /openapi.json, Methods: HEAD, GET
INFO 10-22 10:22:20 launcher.py:28] Route: /docs, Methods: HEAD, GET
INFO 10-22 10:22:20 launcher.py:28] Route: /docs/oauth2-redirect, Methods: HEAD, GET
INFO 10-22 10:22:20 launcher.py:28] Route: /redoc, Methods: HEAD, GET
INFO 10-22 10:22:20 launcher.py:28] Route: /health, Methods: GET
INFO 10-22 10:22:20 launcher.py:28] Route: /tokenize, Methods: POST
INFO 10-22 10:22:20 launcher.py:28] Route: /detokenize, Methods: POST
INFO 10-22 10:22:20 launcher.py:28] Route: /v1/models, Methods: GET
INFO 10-22 10:22:20 launcher.py:28] Route: /version, Methods: GET
INFO 10-22 10:22:20 launcher.py:28] Route: /v1/chat/completions, Methods: POST
INFO 10-22 10:22:20 launcher.py:28] Route: /v1/completions, Methods: POST
INFO 10-22 10:22:20 launcher.py:28] Route: /v1/embeddings, Methods: POST
INFO 10-22 10:22:20 launcher.py:33] Launching Uvicorn with --limit_concurrency 32765. To avoid this limit at the expense of performance run with --disable-frontend-multiprocessing
INFO:     Started server process [469267]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     ::1:48006 - "GET /v1/completions HTTP/1.1" 405 Method Not Allowed
+ return 0
+ '[' 0 -eq 0 ']'
+ echo ''

+ echo 'vllm server is up and running.'
vllm server is up and running.
+ cd /home/fjy/vllm/benchmarks
+ for qps in $qps_list
+ [[ 1 == *\i\n\f* ]]
+ new_test_name=vllm_qwen7B_ib_prefix_qps_1
+ backend=vllm
+ [[ vllm == *\v\l\l\m* ]]
+ backend=vllm
+ [[ ib = \i\b ]]
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_1_in_2048
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_2048.json             --request-rate 1             --ignore-eos             --ib-input-len 2048             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 1'
Running test case vllm_qwen7B_ib_prefix with qps 1
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_2048.json             --request-rate 1             --ignore-eos             --ib-input-len 2048             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_2048.json             --request-rate 1             --ignore-eos             --ib-input-len 2048             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_2048.json             --request-rate 1             --ignore-eos             --ib-input-len 2048             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_1_in_2048.json --request-rate 1 --ignore-eos --ib-input-len 2048
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 10:22:30 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:22:30 metrics.py:367] Prefix cache hit rate: GPU: 0.00%, CPU: 0.00%
INFO 10-22 10:22:40 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:22:40 metrics.py:367] Prefix cache hit rate: GPU: 0.00%, CPU: 0.00%
INFO 10-22 10:22:50 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:22:50 metrics.py:367] Prefix cache hit rate: GPU: 0.00%, CPU: 0.00%
INFO:     127.0.0.1:41812 - "POST /v1/completions HTTP/1.1" 200 OK
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=1.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_1_in_2048.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=2048, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 1.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:41814 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:22:55 metrics.py:351] Avg prompt throughput: 818.4 tokens/s, Avg generation throughput: 27.4 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:22:55 metrics.py:367] Prefix cache hit rate: GPU: 49.45%, CPU: 0.00%
INFO:     127.0.0.1:41824 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:01<01:55,  1.83s/it]INFO:     127.0.0.1:37290 - "POST /v1/completions HTTP/1.1" 200 OK
  3%|▎         | 2/64 [00:02<01:16,  1.24s/it]INFO:     127.0.0.1:37298 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37312 - "POST /v1/completions HTTP/1.1" 200 OK
  5%|▍         | 3/64 [00:03<01:16,  1.25s/it]INFO:     127.0.0.1:37324 - "POST /v1/completions HTTP/1.1" 200 OK
  6%|▋         | 4/64 [00:04<01:09,  1.17s/it]INFO 10-22 10:23:00 metrics.py:351] Avg prompt throughput: 2044.3 tokens/s, Avg generation throughput: 127.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 1.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:23:00 metrics.py:367] Prefix cache hit rate: GPU: 67.96%, CPU: 0.00%
INFO:     127.0.0.1:37330 - "POST /v1/completions HTTP/1.1" 200 OK
  8%|▊         | 5/64 [00:05<01:00,  1.03s/it]INFO:     127.0.0.1:37338 - "POST /v1/completions HTTP/1.1" 200 OK
  9%|▉         | 6/64 [00:06<00:50,  1.15it/s] 11%|█         | 7/64 [00:07<00:50,  1.13it/s] 12%|█▎        | 8/64 [00:07<00:43,  1.28it/s]INFO:     127.0.0.1:37346 - "POST /v1/completions HTTP/1.1" 200 OK
 14%|█▍        | 9/64 [00:09<01:07,  1.22s/it]INFO:     127.0.0.1:37348 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:23:06 metrics.py:351] Avg prompt throughput: 1053.1 tokens/s, Avg generation throughput: 79.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:23:06 metrics.py:367] Prefix cache hit rate: GPU: 77.18%, CPU: 0.00%
INFO:     127.0.0.1:44728 - "POST /v1/completions HTTP/1.1" 200 OK
 16%|█▌        | 10/64 [00:13<01:41,  1.87s/it]INFO:     127.0.0.1:44736 - "POST /v1/completions HTTP/1.1" 200 OK
 17%|█▋        | 11/64 [00:13<01:19,  1.49s/it]INFO:     127.0.0.1:44746 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:44754 - "POST /v1/completions HTTP/1.1" 200 OK
 19%|█▉        | 12/64 [00:15<01:18,  1.52s/it] 20%|██        | 13/64 [00:16<01:03,  1.25s/it]INFO 10-22 10:23:11 metrics.py:351] Avg prompt throughput: 1943.7 tokens/s, Avg generation throughput: 121.3 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:23:11 metrics.py:367] Prefix cache hit rate: GPU: 75.21%, CPU: 0.00%
 22%|██▏       | 14/64 [00:16<00:56,  1.12s/it]INFO:     127.0.0.1:44768 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:44782 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:44790 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:44796 - "POST /v1/completions HTTP/1.1" 200 OK
 23%|██▎       | 15/64 [00:19<01:16,  1.57s/it]INFO:     127.0.0.1:44810 - "POST /v1/completions HTTP/1.1" 200 OK
 27%|██▋       | 17/64 [00:19<00:42,  1.10it/s]INFO:     127.0.0.1:44818 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:23:16 metrics.py:351] Avg prompt throughput: 2453.9 tokens/s, Avg generation throughput: 135.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.7%, CPU KV cache usage: 0.0%.
INFO 10-22 10:23:16 metrics.py:367] Prefix cache hit rate: GPU: 76.23%, CPU: 0.00%
 30%|██▉       | 19/64 [00:21<00:40,  1.11it/s] 31%|███▏      | 20/64 [00:23<00:44,  1.01s/it]INFO:     127.0.0.1:50824 - "POST /v1/completions HTTP/1.1" 200 OK
 33%|███▎      | 21/64 [00:25<00:53,  1.25s/it]INFO:     127.0.0.1:50834 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:23:22 metrics.py:351] Avg prompt throughput: 456.5 tokens/s, Avg generation throughput: 44.4 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:23:22 metrics.py:367] Prefix cache hit rate: GPU: 77.73%, CPU: 0.00%
INFO:     127.0.0.1:50844 - "POST /v1/completions HTTP/1.1" 200 OK
 34%|███▍      | 22/64 [00:28<01:20,  1.92s/it]INFO:     127.0.0.1:50846 - "POST /v1/completions HTTP/1.1" 200 OK
 36%|███▌      | 23/64 [00:30<01:15,  1.84s/it]INFO:     127.0.0.1:50854 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50858 - "POST /v1/completions HTTP/1.1" 200 OK
 38%|███▊      | 24/64 [00:31<01:01,  1.54s/it]INFO:     127.0.0.1:54250 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:23:27 metrics.py:351] Avg prompt throughput: 2350.1 tokens/s, Avg generation throughput: 108.4 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.7%, CPU KV cache usage: 0.0%.
INFO 10-22 10:23:27 metrics.py:367] Prefix cache hit rate: GPU: 77.41%, CPU: 0.00%
INFO:     127.0.0.1:54252 - "POST /v1/completions HTTP/1.1" 200 OK
 39%|███▉      | 25/64 [00:32<00:59,  1.54s/it] 42%|████▏     | 27/64 [00:33<00:39,  1.08s/it] 44%|████▍     | 28/64 [00:34<00:30,  1.17it/s]INFO:     127.0.0.1:54268 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54282 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54296 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54308 - "POST /v1/completions HTTP/1.1" 200 OK
 45%|████▌     | 29/64 [00:37<00:49,  1.40s/it]INFO 10-22 10:23:32 metrics.py:351] Avg prompt throughput: 2044.8 tokens/s, Avg generation throughput: 128.2 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 1.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:23:32 metrics.py:367] Prefix cache hit rate: GPU: 77.06%, CPU: 0.00%
 47%|████▋     | 30/64 [00:37<00:41,  1.23s/it]INFO:     127.0.0.1:54324 - "POST /v1/completions HTTP/1.1" 200 OK
 48%|████▊     | 31/64 [00:38<00:34,  1.04s/it] 50%|█████     | 32/64 [00:38<00:25,  1.25it/s]INFO:     127.0.0.1:54328 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54334 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54338 - "POST /v1/completions HTTP/1.1" 200 OK
 52%|█████▏    | 33/64 [00:40<00:32,  1.03s/it]INFO:     127.0.0.1:54352 - "POST /v1/completions HTTP/1.1" 200 OK
 53%|█████▎    | 34/64 [00:40<00:27,  1.10it/s]INFO:     127.0.0.1:54358 - "POST /v1/completions HTTP/1.1" 200 OK
 55%|█████▍    | 35/64 [00:41<00:25,  1.12it/s]INFO 10-22 10:23:37 metrics.py:351] Avg prompt throughput: 2454.6 tokens/s, Avg generation throughput: 177.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.7%, CPU KV cache usage: 0.0%.
INFO 10-22 10:23:37 metrics.py:367] Prefix cache hit rate: GPU: 77.08%, CPU: 0.00%
 58%|█████▊    | 37/64 [00:42<00:18,  1.48it/s]INFO:     127.0.0.1:37434 - "POST /v1/completions HTTP/1.1" 200 OK
 59%|█████▉    | 38/64 [00:43<00:19,  1.35it/s] 61%|██████    | 39/64 [00:44<00:19,  1.26it/s]INFO:     127.0.0.1:37448 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37458 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37474 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:23:42 metrics.py:351] Avg prompt throughput: 1634.1 tokens/s, Avg generation throughput: 79.6 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 1.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:23:42 metrics.py:367] Prefix cache hit rate: GPU: 76.54%, CPU: 0.00%
 62%|██████▎   | 40/64 [00:47<00:33,  1.39s/it]INFO:     127.0.0.1:37484 - "POST /v1/completions HTTP/1.1" 200 OK
 64%|██████▍   | 41/64 [00:48<00:30,  1.33s/it]INFO:     127.0.0.1:37498 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37508 - "POST /v1/completions HTTP/1.1" 200 OK
 66%|██████▌   | 42/64 [00:48<00:22,  1.05s/it] 67%|██████▋   | 43/64 [00:49<00:19,  1.10it/s]INFO:     127.0.0.1:37510 - "POST /v1/completions HTTP/1.1" 200 OK
 69%|██████▉   | 44/64 [00:50<00:20,  1.03s/it]INFO:     127.0.0.1:37520 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37524 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37534 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37542 - "POST /v1/completions HTTP/1.1" 200 OK
 72%|███████▏  | 46/64 [00:51<00:14,  1.21it/s]INFO 10-22 10:23:47 metrics.py:351] Avg prompt throughput: 3268.7 tokens/s, Avg generation throughput: 189.3 tokens/s, Running: 4 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.7%, CPU KV cache usage: 0.0%.
INFO 10-22 10:23:47 metrics.py:367] Prefix cache hit rate: GPU: 77.41%, CPU: 0.00%
INFO:     127.0.0.1:58874 - "POST /v1/completions HTTP/1.1" 200 OK
 73%|███████▎  | 47/64 [00:52<00:15,  1.12it/s]INFO:     127.0.0.1:58876 - "POST /v1/completions HTTP/1.1" 200 OK
 75%|███████▌  | 48/64 [00:53<00:12,  1.33it/s] 77%|███████▋  | 49/64 [00:53<00:08,  1.71it/s]INFO:     127.0.0.1:58892 - "POST /v1/completions HTTP/1.1" 200 OK
 78%|███████▊  | 50/64 [00:53<00:07,  1.89it/s] 80%|███████▉  | 51/64 [00:54<00:06,  2.00it/s] 81%|████████▏ | 52/64 [00:55<00:06,  1.73it/s] 83%|████████▎ | 53/64 [00:55<00:05,  1.86it/s]INFO:     127.0.0.1:58896 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:23:53 metrics.py:351] Avg prompt throughput: 1125.4 tokens/s, Avg generation throughput: 114.3 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:23:53 metrics.py:367] Prefix cache hit rate: GPU: 76.82%, CPU: 0.00%
INFO:     127.0.0.1:58910 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58916 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58922 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58934 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58946 - "POST /v1/completions HTTP/1.1" 200 OK
 84%|████████▍ | 54/64 [01:00<00:17,  1.75s/it] 86%|████████▌ | 55/64 [01:00<00:11,  1.27s/it] 88%|████████▊ | 56/64 [01:00<00:07,  1.04it/s]INFO:     127.0.0.1:58950 - "POST /v1/completions HTTP/1.1" 200 OK
 89%|████████▉ | 57/64 [01:00<00:05,  1.38it/s]INFO:     127.0.0.1:58966 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58972 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:58982 - "POST /v1/completions HTTP/1.1" 200 OK
 91%|█████████ | 58/64 [01:01<00:05,  1.19it/s] 92%|█████████▏| 59/64 [01:02<00:03,  1.47it/s]INFO:     127.0.0.1:49588 - "POST /v1/completions HTTP/1.1" 200 OK
 94%|█████████▍| 60/64 [01:02<00:02,  1.50it/s] 95%|█████████▌| 61/64 [01:02<00:01,  1.81it/s]INFO 10-22 10:23:58 metrics.py:351] Avg prompt throughput: 4396.8 tokens/s, Avg generation throughput: 265.2 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.7%, CPU KV cache usage: 0.0%.
INFO 10-22 10:23:58 metrics.py:367] Prefix cache hit rate: GPU: 76.52%, CPU: 0.00%
 97%|█████████▋| 62/64 [01:03<00:00,  2.29it/s]100%|██████████| 64/64 [01:04<00:00,  2.19it/s]100%|██████████| 64/64 [01:04<00:00,  1.00s/it]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  64.10     
Total input tokens:                      131072    
Total generated tokens:                  8190      
Request throughput (req/s):              1.00      
Output token throughput (tok/s):         127.78    
Total Token throughput (tok/s):          2172.68   
---------------Time to First Token----------------
Mean TTFT (ms):                          123.97    
Median TTFT (ms):                        105.68    
P99 TTFT (ms):                           239.10    
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          14.46     
Median TPOT (ms):                        14.07     
P99 TPOT (ms):                           15.96     
---------------Inter-token Latency----------------
Mean ITL (ms):                           14.46     
Median ITL (ms):                         13.84     
P99 ITL (ms):                            40.98     
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_2048.json             --request-rate 1             --ignore-eos             --ib-input-len 2048             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_2048.json             --request-rate 1             --ignore-eos             --ib-input-len 2048             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_2048.json             --request-rate 1             --ignore-eos             --ib-input-len 2048             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_1_in_10240
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_10240.json             --request-rate 1             --ignore-eos             --ib-input-len 10240             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 1'
Running test case vllm_qwen7B_ib_prefix with qps 1
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_10240.json             --request-rate 1             --ignore-eos             --ib-input-len 10240             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_10240.json             --request-rate 1             --ignore-eos             --ib-input-len 10240             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_10240.json             --request-rate 1             --ignore-eos             --ib-input-len 10240             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_1_in_10240.json --request-rate 1 --ignore-eos --ib-input-len 10240
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 10:24:10 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 6.6 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:24:10 metrics.py:367] Prefix cache hit rate: GPU: 76.49%, CPU: 0.00%
INFO 10-22 10:24:20 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:24:20 metrics.py:367] Prefix cache hit rate: GPU: 76.49%, CPU: 0.00%
INFO 10-22 10:24:30 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:24:30 metrics.py:367] Prefix cache hit rate: GPU: 76.49%, CPU: 0.00%
INFO:     127.0.0.1:52276 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:24:39 metrics.py:351] Avg prompt throughput: 56.8 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 3.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:24:39 metrics.py:367] Prefix cache hit rate: GPU: 72.76%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=1.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_1_in_10240.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=10240, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 1.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:52292 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:52304 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:52316 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:24:44 metrics.py:351] Avg prompt throughput: 6922.9 tokens/s, Avg generation throughput: 65.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 3.1%, CPU KV cache usage: 0.0%.
INFO 10-22 10:24:44 metrics.py:367] Prefix cache hit rate: GPU: 77.21%, CPU: 0.00%
  2%|▏         | 1/64 [00:02<02:22,  2.26s/it]INFO:     127.0.0.1:52328 - "POST /v1/completions HTTP/1.1" 200 OK
  3%|▎         | 2/64 [00:03<01:29,  1.44s/it]INFO:     127.0.0.1:52340 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:52352 - "POST /v1/completions HTTP/1.1" 200 OK
  5%|▍         | 3/64 [00:04<01:26,  1.41s/it]INFO:     127.0.0.1:52858 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:52860 - "POST /v1/completions HTTP/1.1" 200 OK
  6%|▋         | 4/64 [00:06<01:28,  1.47s/it]  8%|▊         | 5/64 [00:06<01:12,  1.23s/it]INFO 10-22 10:24:49 metrics.py:351] Avg prompt throughput: 11379.2 tokens/s, Avg generation throughput: 143.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 3.1%, CPU KV cache usage: 0.0%.
INFO 10-22 10:24:49 metrics.py:367] Prefix cache hit rate: GPU: 78.54%, CPU: 0.00%
  9%|▉         | 6/64 [00:07<00:57,  1.01it/s] 11%|█         | 7/64 [00:07<00:44,  1.27it/s]INFO:     127.0.0.1:52862 - "POST /v1/completions HTTP/1.1" 200 OK
 12%|█▎        | 8/64 [00:08<00:39,  1.43it/s] 14%|█▍        | 9/64 [00:10<01:02,  1.14s/it]INFO:     127.0.0.1:52866 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:52870 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:24:54 metrics.py:351] Avg prompt throughput: 5769.6 tokens/s, Avg generation throughput: 53.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 3.1%, CPU KV cache usage: 0.0%.
INFO 10-22 10:24:54 metrics.py:367] Prefix cache hit rate: GPU: 80.91%, CPU: 0.00%
INFO:     127.0.0.1:52884 - "POST /v1/completions HTTP/1.1" 200 OK
 16%|█▌        | 10/64 [00:13<01:41,  1.88s/it]INFO:     127.0.0.1:52886 - "POST /v1/completions HTTP/1.1" 200 OK
 17%|█▋        | 11/64 [00:14<01:25,  1.62s/it]INFO:     127.0.0.1:34136 - "POST /v1/completions HTTP/1.1" 200 OK
 19%|█▉        | 12/64 [00:16<01:24,  1.62s/it] 20%|██        | 13/64 [00:16<01:02,  1.22s/it]INFO 10-22 10:24:59 metrics.py:351] Avg prompt throughput: 6487.2 tokens/s, Avg generation throughput: 119.3 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 3.1%, CPU KV cache usage: 0.0%.
INFO 10-22 10:24:59 metrics.py:367] Prefix cache hit rate: GPU: 80.03%, CPU: 0.00%
 22%|██▏       | 14/64 [00:17<00:51,  1.02s/it]INFO:     127.0.0.1:34152 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:34166 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:34174 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:34186 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:34202 - "POST /v1/completions HTTP/1.1" 200 OK
 23%|██▎       | 15/64 [00:20<01:24,  1.72s/it] 25%|██▌       | 16/64 [00:21<01:02,  1.30s/it]INFO:     127.0.0.1:34210 - "POST /v1/completions HTTP/1.1" 200 OK
 27%|██▋       | 17/64 [00:21<00:47,  1.02s/it] 28%|██▊       | 18/64 [00:21<00:37,  1.24it/s]INFO 10-22 10:25:04 metrics.py:351] Avg prompt throughput: 12255.6 tokens/s, Avg generation throughput: 133.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 3.1%, CPU KV cache usage: 0.0%.
INFO 10-22 10:25:04 metrics.py:367] Prefix cache hit rate: GPU: 81.07%, CPU: 0.00%
 30%|██▉       | 19/64 [00:22<00:38,  1.18it/s]INFO:     127.0.0.1:34220 - "POST /v1/completions HTTP/1.1" 200 OK
 31%|███▏      | 20/64 [00:23<00:36,  1.19it/s] 33%|███▎      | 21/64 [00:25<00:50,  1.18s/it]INFO:     127.0.0.1:38250 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:25:09 metrics.py:351] Avg prompt throughput: 3377.9 tokens/s, Avg generation throughput: 47.4 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 3.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:25:09 metrics.py:367] Prefix cache hit rate: GPU: 82.03%, CPU: 0.00%
INFO:     127.0.0.1:38252 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38256 - "POST /v1/completions HTTP/1.1" 200 OK
 34%|███▍      | 22/64 [00:29<01:22,  1.97s/it]INFO:     127.0.0.1:38266 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38270 - "POST /v1/completions HTTP/1.1" 200 OK
 36%|███▌      | 23/64 [00:31<01:20,  1.96s/it]INFO:     127.0.0.1:38282 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38292 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:25:14 metrics.py:351] Avg prompt throughput: 9374.4 tokens/s, Avg generation throughput: 82.4 tokens/s, Running: 4 reqs, Swapped: 0 reqs, Pending: 1 reqs, GPU KV cache usage: 6.1%, CPU KV cache usage: 0.0%.
INFO 10-22 10:25:14 metrics.py:367] Prefix cache hit rate: GPU: 82.21%, CPU: 0.00%
 38%|███▊      | 24/64 [00:32<01:07,  1.70s/it] 39%|███▉      | 25/64 [00:33<01:05,  1.67s/it] 41%|████      | 26/64 [00:34<00:48,  1.26s/it] 42%|████▏     | 27/64 [00:34<00:36,  1.03it/s] 44%|████▍     | 28/64 [00:34<00:27,  1.29it/s]INFO:     127.0.0.1:47440 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47448 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47462 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47476 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:25:19 metrics.py:351] Avg prompt throughput: 9683.7 tokens/s, Avg generation throughput: 120.5 tokens/s, Running: 4 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 6.1%, CPU KV cache usage: 0.0%.
INFO 10-22 10:25:19 metrics.py:367] Prefix cache hit rate: GPU: 82.33%, CPU: 0.00%
 45%|████▌     | 29/64 [00:38<00:52,  1.49s/it]INFO:     127.0.0.1:47484 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47490 - "POST /v1/completions HTTP/1.1" 200 OK
 47%|████▋     | 30/64 [00:38<00:44,  1.31s/it] 48%|████▊     | 31/64 [00:39<00:35,  1.08s/it]INFO:     127.0.0.1:47498 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47508 - "POST /v1/completions HTTP/1.1" 200 OK
 50%|█████     | 32/64 [00:39<00:27,  1.16it/s]INFO:     127.0.0.1:47524 - "POST /v1/completions HTTP/1.1" 200 OK
 52%|█████▏    | 33/64 [00:41<00:32,  1.05s/it]INFO:     127.0.0.1:47538 - "POST /v1/completions HTTP/1.1" 200 OK
 53%|█████▎    | 34/64 [00:41<00:27,  1.08it/s]INFO 10-22 10:25:24 metrics.py:351] Avg prompt throughput: 14378.4 tokens/s, Avg generation throughput: 182.3 tokens/s, Running: 4 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:25:24 metrics.py:367] Prefix cache hit rate: GPU: 82.71%, CPU: 0.00%
INFO:     127.0.0.1:47546 - "POST /v1/completions HTTP/1.1" 200 OK
 55%|█████▍    | 35/64 [00:42<00:26,  1.11it/s] 56%|█████▋    | 36/64 [00:43<00:20,  1.36it/s] 58%|█████▊    | 37/64 [00:43<00:16,  1.65it/s] 59%|█████▉    | 38/64 [00:43<00:14,  1.76it/s] 61%|██████    | 39/64 [00:44<00:16,  1.52it/s]INFO:     127.0.0.1:36074 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:36082 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:36092 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:25:29 metrics.py:351] Avg prompt throughput: 5830.4 tokens/s, Avg generation throughput: 89.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 1 reqs, GPU KV cache usage: 6.1%, CPU KV cache usage: 0.0%.
INFO 10-22 10:25:29 metrics.py:367] Prefix cache hit rate: GPU: 82.18%, CPU: 0.00%
INFO:     127.0.0.1:36098 - "POST /v1/completions HTTP/1.1" 200 OK
 62%|██████▎   | 40/64 [00:48<00:37,  1.54s/it]INFO:     127.0.0.1:36114 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:36128 - "POST /v1/completions HTTP/1.1" 200 OK
 64%|██████▍   | 41/64 [00:49<00:34,  1.48s/it]INFO:     127.0.0.1:36134 - "POST /v1/completions HTTP/1.1" 200 OK
 66%|██████▌   | 42/64 [00:50<00:26,  1.22s/it]INFO:     127.0.0.1:36146 - "POST /v1/completions HTTP/1.1" 200 OK
 67%|██████▋   | 43/64 [00:51<00:22,  1.09s/it]INFO:     127.0.0.1:36160 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:36164 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:36166 - "POST /v1/completions HTTP/1.1" 200 OK
 69%|██████▉   | 44/64 [00:52<00:20,  1.04s/it]INFO:     127.0.0.1:36168 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:25:34 metrics.py:351] Avg prompt throughput: 17889.6 tokens/s, Avg generation throughput: 173.3 tokens/s, Running: 6 reqs, Swapped: 0 reqs, Pending: 1 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:25:34 metrics.py:367] Prefix cache hit rate: GPU: 83.30%, CPU: 0.00%
 70%|███████   | 45/64 [00:52<00:16,  1.19it/s]INFO:     127.0.0.1:36176 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:36178 - "POST /v1/completions HTTP/1.1" 200 OK
 72%|███████▏  | 46/64 [00:53<00:17,  1.06it/s] 73%|███████▎  | 47/64 [00:54<00:15,  1.09it/s] 75%|███████▌  | 48/64 [00:54<00:12,  1.32it/s] 77%|███████▋  | 49/64 [00:55<00:09,  1.59it/s] 78%|███████▊  | 50/64 [00:55<00:07,  1.84it/s] 80%|███████▉  | 51/64 [00:55<00:06,  2.09it/s] 81%|████████▏ | 52/64 [00:56<00:05,  2.12it/s] 83%|████████▎ | 53/64 [00:56<00:04,  2.35it/s]INFO:     127.0.0.1:48432 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:25:40 metrics.py:351] Avg prompt throughput: 6103.3 tokens/s, Avg generation throughput: 147.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 3.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:25:40 metrics.py:367] Prefix cache hit rate: GPU: 83.04%, CPU: 0.00%
INFO:     127.0.0.1:48438 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48454 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48458 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48462 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48476 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48492 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48500 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48504 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48508 - "POST /v1/completions HTTP/1.1" 200 OK
 84%|████████▍ | 54/64 [01:01<00:17,  1.72s/it] 86%|████████▌ | 55/64 [01:01<00:11,  1.33s/it]INFO:     127.0.0.1:48524 - "POST /v1/completions HTTP/1.1" 200 OK
 88%|████████▊ | 56/64 [01:02<00:10,  1.27s/it]INFO 10-22 10:25:45 metrics.py:351] Avg prompt throughput: 19791.9 tokens/s, Avg generation throughput: 157.1 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 1 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:25:45 metrics.py:367] Prefix cache hit rate: GPU: 82.90%, CPU: 0.00%
 89%|████████▉ | 57/64 [01:03<00:07,  1.01s/it] 91%|█████████ | 58/64 [01:03<00:04,  1.22it/s] 92%|█████████▏| 59/64 [01:04<00:03,  1.46it/s] 94%|█████████▍| 60/64 [01:04<00:02,  1.73it/s] 95%|█████████▌| 61/64 [01:04<00:01,  1.98it/s] 97%|█████████▋| 62/64 [01:05<00:00,  2.21it/s] 98%|█████████▊| 63/64 [01:05<00:00,  2.46it/s]100%|██████████| 64/64 [01:05<00:00,  2.63it/s]100%|██████████| 64/64 [01:05<00:00,  1.03s/it]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  65.68     
Total input tokens:                      655360    
Total generated tokens:                  8192      
Request throughput (req/s):              0.97      
Output token throughput (tok/s):         124.73    
Total Token throughput (tok/s):          10102.83  
---------------Time to First Token----------------
Mean TTFT (ms):                          730.72    
Median TTFT (ms):                        616.00    
P99 TTFT (ms):                           1950.11   
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          19.34     
Median TPOT (ms):                        18.09     
P99 TPOT (ms):                           26.90     
---------------Inter-token Latency----------------
Mean ITL (ms):                           19.34     
Median ITL (ms):                         16.03     
P99 ITL (ms):                            67.61     
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_10240.json             --request-rate 1             --ignore-eos             --ib-input-len 10240             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_10240.json             --request-rate 1             --ignore-eos             --ib-input-len 10240             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_10240.json             --request-rate 1             --ignore-eos             --ib-input-len 10240             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_1_in_40960
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_40960.json             --request-rate 1             --ignore-eos             --ib-input-len 40960             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 1'
Running test case vllm_qwen7B_ib_prefix with qps 1
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_40960.json             --request-rate 1             --ignore-eos             --ib-input-len 40960             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_40960.json             --request-rate 1             --ignore-eos             --ib-input-len 40960             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_40960.json             --request-rate 1             --ignore-eos             --ib-input-len 40960             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_1_in_40960.json --request-rate 1 --ignore-eos --ib-input-len 40960
INFO 10-22 10:25:50 metrics.py:351] Avg prompt throughput: 2554.5 tokens/s, Avg generation throughput: 121.1 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:25:50 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 10:26:00 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:26:00 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 10:26:10 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:26:10 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 10:26:20 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:26:20 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 10:26:30 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:26:30 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO:     127.0.0.1:50156 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:26:35 metrics.py:351] Avg prompt throughput: 3844.1 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:26:35 metrics.py:367] Prefix cache hit rate: GPU: 80.37%, CPU: 0.00%
INFO 10-22 10:26:40 metrics.py:351] Avg prompt throughput: 4288.1 tokens/s, Avg generation throughput: 12.2 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:26:40 metrics.py:367] Prefix cache hit rate: GPU: 80.38%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=1.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_1_in_40960.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=40960, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 1.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:35020 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35028 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35030 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35040 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35046 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:26:45 metrics.py:351] Avg prompt throughput: 19271.9 tokens/s, Avg generation throughput: 41.9 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:26:45 metrics.py:367] Prefix cache hit rate: GPU: 82.80%, CPU: 0.00%
  2%|▏         | 1/64 [00:04<04:24,  4.19s/it]INFO:     127.0.0.1:35058 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50930 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50942 - "POST /v1/completions HTTP/1.1" 200 OK
  3%|▎         | 2/64 [00:06<02:54,  2.81s/it]  5%|▍         | 3/64 [00:07<02:23,  2.36s/it]INFO:     127.0.0.1:50948 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:26:50 metrics.py:351] Avg prompt throughput: 22258.2 tokens/s, Avg generation throughput: 67.4 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 3 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:26:50 metrics.py:367] Prefix cache hit rate: GPU: 81.98%, CPU: 0.00%
  6%|▋         | 4/64 [00:11<02:42,  2.71s/it]INFO:     127.0.0.1:50958 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50964 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50968 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:26:55 metrics.py:351] Avg prompt throughput: 6546.0 tokens/s, Avg generation throughput: 20.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 6 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:26:55 metrics.py:367] Prefix cache hit rate: GPU: 81.99%, CPU: 0.00%
INFO:     127.0.0.1:50980 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50994 - "POST /v1/completions HTTP/1.1" 200 OK
  8%|▊         | 5/64 [00:16<03:30,  3.57s/it]INFO:     127.0.0.1:56948 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56954 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56964 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56966 - "POST /v1/completions HTTP/1.1" 200 OK
  9%|▉         | 6/64 [00:18<02:52,  2.97s/it]INFO 10-22 10:27:00 metrics.py:351] Avg prompt throughput: 17243.5 tokens/s, Avg generation throughput: 52.9 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 9 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:27:00 metrics.py:367] Prefix cache hit rate: GPU: 83.76%, CPU: 0.00%
INFO:     127.0.0.1:56970 - "POST /v1/completions HTTP/1.1" 200 OK
 11%|█         | 7/64 [00:19<02:28,  2.60s/it]INFO:     127.0.0.1:56974 - "POST /v1/completions HTTP/1.1" 200 OK
 12%|█▎        | 8/64 [00:21<02:11,  2.35s/it]INFO:     127.0.0.1:56984 - "POST /v1/completions HTTP/1.1" 200 OK
 14%|█▍        | 9/64 [00:23<01:59,  2.18s/it]INFO 10-22 10:27:05 metrics.py:351] Avg prompt throughput: 23225.4 tokens/s, Avg generation throughput: 73.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 10 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:27:05 metrics.py:367] Prefix cache hit rate: GPU: 84.77%, CPU: 0.00%
 16%|█▌        | 10/64 [00:26<02:19,  2.59s/it]INFO:     127.0.0.1:57592 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57606 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:27:10 metrics.py:351] Avg prompt throughput: 7661.3 tokens/s, Avg generation throughput: 24.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 11 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:27:10 metrics.py:367] Prefix cache hit rate: GPU: 83.01%, CPU: 0.00%
INFO:     127.0.0.1:57616 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57626 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57640 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57646 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57662 - "POST /v1/completions HTTP/1.1" 200 OK
 17%|█▋        | 11/64 [00:32<03:04,  3.48s/it]INFO 10-22 10:27:15 metrics.py:351] Avg prompt throughput: 12964.6 tokens/s, Avg generation throughput: 41.3 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 14 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:27:15 metrics.py:367] Prefix cache hit rate: GPU: 83.96%, CPU: 0.00%
 19%|█▉        | 12/64 [00:34<02:34,  2.98s/it]INFO:     127.0.0.1:57670 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47400 - "POST /v1/completions HTTP/1.1" 200 OK
 20%|██        | 13/64 [00:36<02:13,  2.63s/it]INFO:     127.0.0.1:47412 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47414 - "POST /v1/completions HTTP/1.1" 200 OK
 22%|██▏       | 14/64 [00:37<01:59,  2.39s/it]INFO:     127.0.0.1:47430 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47436 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:27:20 metrics.py:351] Avg prompt throughput: 22020.0 tokens/s, Avg generation throughput: 66.4 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 17 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:27:20 metrics.py:367] Prefix cache hit rate: GPU: 85.21%, CPU: 0.00%
INFO:     127.0.0.1:47452 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47460 - "POST /v1/completions HTTP/1.1" 200 OK
 23%|██▎       | 15/64 [00:39<01:49,  2.23s/it]INFO:     127.0.0.1:47466 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47482 - "POST /v1/completions HTTP/1.1" 200 OK
 25%|██▌       | 16/64 [00:41<01:41,  2.11s/it]INFO:     127.0.0.1:47486 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:27:25 metrics.py:351] Avg prompt throughput: 19135.5 tokens/s, Avg generation throughput: 62.4 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 20 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:27:25 metrics.py:367] Prefix cache hit rate: GPU: 84.12%, CPU: 0.00%
INFO:     127.0.0.1:54416 - "POST /v1/completions HTTP/1.1" 200 OK
 27%|██▋       | 17/64 [00:45<02:02,  2.60s/it]INFO:     127.0.0.1:54424 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54434 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54448 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54460 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54464 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:27:30 metrics.py:351] Avg prompt throughput: 4147.7 tokens/s, Avg generation throughput: 10.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 26 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:27:30 metrics.py:367] Prefix cache hit rate: GPU: 84.12%, CPU: 0.00%
INFO:     127.0.0.1:54474 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54484 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54488 - "POST /v1/completions HTTP/1.1" 200 OK
 28%|██▊       | 18/64 [00:51<02:44,  3.58s/it]INFO:     127.0.0.1:54498 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54514 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54524 - "POST /v1/completions HTTP/1.1" 200 OK
 30%|██▉       | 19/64 [00:53<02:18,  3.07s/it]INFO:     127.0.0.1:54532 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:54540 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:27:35 metrics.py:351] Avg prompt throughput: 17144.8 tokens/s, Avg generation throughput: 52.7 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 31 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:27:35 metrics.py:367] Prefix cache hit rate: GPU: 85.20%, CPU: 0.00%
 31%|███▏      | 20/64 [00:54<01:58,  2.70s/it] 33%|███▎      | 21/64 [00:56<01:44,  2.44s/it]INFO:     127.0.0.1:57528 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57540 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57544 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57556 - "POST /v1/completions HTTP/1.1" 200 OK
 34%|███▍      | 22/64 [00:58<01:35,  2.26s/it]INFO 10-22 10:27:40 metrics.py:351] Avg prompt throughput: 22788.0 tokens/s, Avg generation throughput: 73.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:27:40 metrics.py:367] Prefix cache hit rate: GPU: 85.85%, CPU: 0.00%
INFO:     127.0.0.1:57566 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57576 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57592 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57602 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57614 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57618 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:57630 - "POST /v1/completions HTTP/1.1" 200 OK
 36%|███▌      | 23/64 [01:02<01:54,  2.78s/it]INFO 10-22 10:27:45 metrics.py:351] Avg prompt throughput: 7317.9 tokens/s, Avg generation throughput: 23.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:27:45 metrics.py:367] Prefix cache hit rate: GPU: 84.57%, CPU: 0.00%
 38%|███▊      | 24/64 [01:08<02:32,  3.81s/it]INFO 10-22 10:27:50 metrics.py:351] Avg prompt throughput: 8103.8 tokens/s, Avg generation throughput: 25.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 38 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:27:50 metrics.py:367] Prefix cache hit rate: GPU: 84.89%, CPU: 0.00%
 39%|███▉      | 25/64 [01:10<02:05,  3.23s/it] 41%|████      | 26/64 [01:12<01:47,  2.82s/it]INFO 10-22 10:27:55 metrics.py:351] Avg prompt throughput: 21763.0 tokens/s, Avg generation throughput: 67.6 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 35 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:27:55 metrics.py:367] Prefix cache hit rate: GPU: 85.78%, CPU: 0.00%
 42%|████▏     | 27/64 [01:14<01:33,  2.53s/it] 44%|████▍     | 28/64 [01:16<01:23,  2.33s/it]INFO 10-22 10:28:00 metrics.py:351] Avg prompt throughput: 17031.1 tokens/s, Avg generation throughput: 53.9 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:28:00 metrics.py:367] Prefix cache hit rate: GPU: 84.92%, CPU: 0.00%
 45%|████▌     | 29/64 [01:20<01:40,  2.88s/it]INFO 10-22 10:28:05 metrics.py:351] Avg prompt throughput: 3703.9 tokens/s, Avg generation throughput: 9.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:28:05 metrics.py:367] Prefix cache hit rate: GPU: 84.92%, CPU: 0.00%
 47%|████▋     | 30/64 [01:26<02:12,  3.90s/it] 48%|████▊     | 31/64 [01:28<01:48,  3.29s/it]INFO 10-22 10:28:10 metrics.py:351] Avg prompt throughput: 16419.2 tokens/s, Avg generation throughput: 51.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 31 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:28:10 metrics.py:367] Prefix cache hit rate: GPU: 85.47%, CPU: 0.00%
 50%|█████     | 32/64 [01:30<01:31,  2.86s/it] 52%|█████▏    | 33/64 [01:32<01:19,  2.56s/it]INFO 10-22 10:28:15 metrics.py:351] Avg prompt throughput: 19720.9 tokens/s, Avg generation throughput: 63.1 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:28:15 metrics.py:367] Prefix cache hit rate: GPU: 84.94%, CPU: 0.00%
 53%|█████▎    | 34/64 [01:36<01:30,  3.03s/it]INFO 10-22 10:28:20 metrics.py:351] Avg prompt throughput: 3858.4 tokens/s, Avg generation throughput: 11.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:28:20 metrics.py:367] Prefix cache hit rate: GPU: 84.94%, CPU: 0.00%
 55%|█████▍    | 35/64 [01:42<01:57,  4.07s/it]INFO 10-22 10:28:25 metrics.py:351] Avg prompt throughput: 11669.8 tokens/s, Avg generation throughput: 36.5 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 26 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:28:25 metrics.py:367] Prefix cache hit rate: GPU: 85.44%, CPU: 0.00%
 56%|█████▋    | 36/64 [01:44<01:35,  3.41s/it] 58%|█████▊    | 37/64 [01:46<01:19,  2.94s/it] 59%|█████▉    | 38/64 [01:48<01:08,  2.62s/it]INFO 10-22 10:28:31 metrics.py:351] Avg prompt throughput: 21529.9 tokens/s, Avg generation throughput: 65.5 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:28:31 metrics.py:367] Prefix cache hit rate: GPU: 84.59%, CPU: 0.00%
 61%|██████    | 39/64 [01:54<01:28,  3.53s/it]INFO 10-22 10:28:36 metrics.py:351] Avg prompt throughput: 4905.1 tokens/s, Avg generation throughput: 19.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:28:36 metrics.py:367] Prefix cache hit rate: GPU: 84.59%, CPU: 0.00%
INFO 10-22 10:28:41 metrics.py:351] Avg prompt throughput: 3558.4 tokens/s, Avg generation throughput: 7.8 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 22 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:28:41 metrics.py:367] Prefix cache hit rate: GPU: 84.83%, CPU: 0.00%
 62%|██████▎   | 40/64 [02:00<01:44,  4.37s/it] 64%|██████▍   | 41/64 [02:02<01:23,  3.62s/it] 66%|██████▌   | 42/64 [02:04<01:08,  3.09s/it]INFO 10-22 10:28:46 metrics.py:351] Avg prompt throughput: 22345.3 tokens/s, Avg generation throughput: 71.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 20 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:28:46 metrics.py:367] Prefix cache hit rate: GPU: 85.29%, CPU: 0.00%
 67%|██████▋   | 43/64 [02:06<00:57,  2.73s/it]INFO 10-22 10:28:51 metrics.py:351] Avg prompt throughput: 12959.2 tokens/s, Avg generation throughput: 41.5 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:28:51 metrics.py:367] Prefix cache hit rate: GPU: 84.27%, CPU: 0.00%
 69%|██████▉   | 44/64 [02:11<01:09,  3.50s/it]INFO 10-22 10:28:56 metrics.py:351] Avg prompt throughput: 3678.2 tokens/s, Avg generation throughput: 10.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:28:56 metrics.py:367] Prefix cache hit rate: GPU: 84.27%, CPU: 0.00%
 70%|███████   | 45/64 [02:18<01:24,  4.46s/it]INFO 10-22 10:29:01 metrics.py:351] Avg prompt throughput: 13284.2 tokens/s, Avg generation throughput: 43.6 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 16 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:29:01 metrics.py:367] Prefix cache hit rate: GPU: 84.72%, CPU: 0.00%
 72%|███████▏  | 46/64 [02:20<01:06,  3.68s/it] 73%|███████▎  | 47/64 [02:21<00:53,  3.14s/it] 75%|███████▌  | 48/64 [02:23<00:44,  2.76s/it]INFO 10-22 10:29:06 metrics.py:351] Avg prompt throughput: 21609.4 tokens/s, Avg generation throughput: 65.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 13 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:29:06 metrics.py:367] Prefix cache hit rate: GPU: 85.34%, CPU: 0.00%
 77%|███████▋  | 49/64 [02:25<00:37,  2.49s/it]INFO 10-22 10:29:11 metrics.py:351] Avg prompt throughput: 10751.4 tokens/s, Avg generation throughput: 35.9 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:29:11 metrics.py:367] Prefix cache hit rate: GPU: 84.21%, CPU: 0.00%
 78%|███████▊  | 50/64 [02:31<00:47,  3.41s/it]INFO 10-22 10:29:16 metrics.py:351] Avg prompt throughput: 3477.7 tokens/s, Avg generation throughput: 8.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:29:16 metrics.py:367] Prefix cache hit rate: GPU: 84.21%, CPU: 0.00%
 80%|███████▉  | 51/64 [02:37<00:57,  4.39s/it] 81%|████████▏ | 52/64 [02:39<00:43,  3.63s/it]INFO 10-22 10:29:21 metrics.py:351] Avg prompt throughput: 15719.7 tokens/s, Avg generation throughput: 49.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 10 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:29:21 metrics.py:367] Prefix cache hit rate: GPU: 84.63%, CPU: 0.00%
 83%|████████▎ | 53/64 [02:41<00:34,  3.11s/it] 84%|████████▍ | 54/64 [02:43<00:27,  2.73s/it]INFO 10-22 10:29:26 metrics.py:351] Avg prompt throughput: 18771.9 tokens/s, Avg generation throughput: 58.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:29:26 metrics.py:367] Prefix cache hit rate: GPU: 83.96%, CPU: 0.00%
 86%|████████▌ | 55/64 [02:48<00:32,  3.57s/it]INFO 10-22 10:29:31 metrics.py:351] Avg prompt throughput: 4504.7 tokens/s, Avg generation throughput: 16.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:29:31 metrics.py:367] Prefix cache hit rate: GPU: 83.96%, CPU: 0.00%
INFO 10-22 10:29:36 metrics.py:351] Avg prompt throughput: 5247.4 tokens/s, Avg generation throughput: 15.8 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 6 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:29:36 metrics.py:367] Prefix cache hit rate: GPU: 84.16%, CPU: 0.00%
 88%|████████▊ | 56/64 [02:55<00:36,  4.51s/it] 89%|████████▉ | 57/64 [02:57<00:26,  3.72s/it] 91%|█████████ | 58/64 [02:59<00:19,  3.17s/it]INFO 10-22 10:29:41 metrics.py:351] Avg prompt throughput: 21590.6 tokens/s, Avg generation throughput: 65.1 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 3 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:29:41 metrics.py:367] Prefix cache hit rate: GPU: 84.73%, CPU: 0.00%
 92%|█████████▏| 59/64 [03:01<00:13,  2.78s/it]INFO 10-22 10:29:46 metrics.py:351] Avg prompt throughput: 11373.1 tokens/s, Avg generation throughput: 38.5 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:29:46 metrics.py:367] Prefix cache hit rate: GPU: 83.74%, CPU: 0.00%
 94%|█████████▍| 60/64 [03:07<00:14,  3.68s/it]INFO 10-22 10:29:51 metrics.py:351] Avg prompt throughput: 3569.6 tokens/s, Avg generation throughput: 9.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:29:51 metrics.py:367] Prefix cache hit rate: GPU: 83.75%, CPU: 0.00%
 95%|█████████▌| 61/64 [03:13<00:13,  4.56s/it]INFO 10-22 10:29:56 metrics.py:351] Avg prompt throughput: 13173.0 tokens/s, Avg generation throughput: 43.1 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:29:56 metrics.py:367] Prefix cache hit rate: GPU: 84.12%, CPU: 0.00%
 97%|█████████▋| 62/64 [03:15<00:07,  3.76s/it] 98%|█████████▊| 63/64 [03:17<00:03,  3.11s/it]100%|██████████| 64/64 [03:18<00:00,  2.64s/it]100%|██████████| 64/64 [03:18<00:00,  3.10s/it]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  198.71    
Total input tokens:                      2621440   
Total generated tokens:                  8191      
Request throughput (req/s):              0.32      
Output token throughput (tok/s):         41.22     
Total Token throughput (tok/s):          13233.68  
---------------Time to First Token----------------
Mean TTFT (ms):                          57339.66  
Median TTFT (ms):                        51296.20  
P99 TTFT (ms):                           133767.95 
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          34.82     
Median TPOT (ms):                        21.98     
P99 TPOT (ms):                           86.58     
---------------Inter-token Latency----------------
Mean ITL (ms):                           34.81     
Median ITL (ms):                         20.43     
P99 ITL (ms):                            166.31    
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_40960.json             --request-rate 1             --ignore-eos             --ib-input-len 40960             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_40960.json             --request-rate 1             --ignore-eos             --ib-input-len 40960             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_40960.json             --request-rate 1             --ignore-eos             --ib-input-len 40960             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_1_in_81920
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_81920.json             --request-rate 1             --ignore-eos             --ib-input-len 81920             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 1'
Running test case vllm_qwen7B_ib_prefix with qps 1
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_81920.json             --request-rate 1             --ignore-eos             --ib-input-len 81920             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_81920.json             --request-rate 1             --ignore-eos             --ib-input-len 81920             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_81920.json             --request-rate 1             --ignore-eos             --ib-input-len 81920             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_1_in_81920.json --request-rate 1 --ignore-eos --ib-input-len 81920
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 10:30:10 metrics.py:351] Avg prompt throughput: 1653.0 tokens/s, Avg generation throughput: 16.5 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:30:10 metrics.py:367] Prefix cache hit rate: GPU: 84.12%, CPU: 0.00%
INFO 10-22 10:30:20 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:30:20 metrics.py:367] Prefix cache hit rate: GPU: 84.12%, CPU: 0.00%
INFO 10-22 10:30:30 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:30:30 metrics.py:367] Prefix cache hit rate: GPU: 84.12%, CPU: 0.00%
INFO 10-22 10:30:40 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:30:40 metrics.py:367] Prefix cache hit rate: GPU: 84.12%, CPU: 0.00%
INFO 10-22 10:30:50 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:30:50 metrics.py:367] Prefix cache hit rate: GPU: 84.12%, CPU: 0.00%
INFO:     127.0.0.1:57006 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:30:55 metrics.py:351] Avg prompt throughput: 915.6 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:30:55 metrics.py:367] Prefix cache hit rate: GPU: 82.24%, CPU: 0.00%
INFO 10-22 10:31:00 metrics.py:351] Avg prompt throughput: 6523.4 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:31:00 metrics.py:367] Prefix cache hit rate: GPU: 82.25%, CPU: 0.00%
INFO 10-22 10:31:05 metrics.py:351] Avg prompt throughput: 3982.9 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:31:05 metrics.py:367] Prefix cache hit rate: GPU: 82.25%, CPU: 0.00%
INFO 10-22 10:31:10 metrics.py:351] Avg prompt throughput: 3128.3 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:31:10 metrics.py:367] Prefix cache hit rate: GPU: 82.26%, CPU: 0.00%
INFO 10-22 10:31:15 metrics.py:351] Avg prompt throughput: 1634.8 tokens/s, Avg generation throughput: 20.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:31:15 metrics.py:367] Prefix cache hit rate: GPU: 82.25%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=1.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_1_in_81920.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=81920, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 1.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:40384 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40780 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40788 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40800 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40816 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40824 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:31:20 metrics.py:351] Avg prompt throughput: 18356.3 tokens/s, Avg generation throughput: 9.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 4 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:31:20 metrics.py:367] Prefix cache hit rate: GPU: 83.02%, CPU: 0.00%
INFO:     127.0.0.1:40832 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40836 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:07<07:21,  7.01s/it]INFO:     127.0.0.1:40838 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:31:25 metrics.py:351] Avg prompt throughput: 19625.2 tokens/s, Avg generation throughput: 32.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 6 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:31:25 metrics.py:367] Prefix cache hit rate: GPU: 83.38%, CPU: 0.00%
  3%|▎         | 2/64 [00:11<05:34,  5.39s/it]INFO:     127.0.0.1:33672 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:33678 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:33692 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:33700 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:31:30 metrics.py:351] Avg prompt throughput: 19217.0 tokens/s, Avg generation throughput: 31.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 9 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:31:30 metrics.py:367] Prefix cache hit rate: GPU: 83.73%, CPU: 0.00%
INFO:     127.0.0.1:33704 - "POST /v1/completions HTTP/1.1" 200 OK
  5%|▍         | 3/64 [00:15<05:00,  4.92s/it]INFO:     127.0.0.1:33716 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:33732 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:33742 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:33750 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:31:35 metrics.py:351] Avg prompt throughput: 18959.9 tokens/s, Avg generation throughput: 30.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 13 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:31:35 metrics.py:367] Prefix cache hit rate: GPU: 84.06%, CPU: 0.00%
INFO:     127.0.0.1:33760 - "POST /v1/completions HTTP/1.1" 200 OK
  6%|▋         | 4/64 [00:20<04:42,  4.71s/it]INFO:     127.0.0.1:41266 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41280 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:31:41 metrics.py:351] Avg prompt throughput: 8799.9 tokens/s, Avg generation throughput: 10.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 15 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:31:41 metrics.py:367] Prefix cache hit rate: GPU: 82.42%, CPU: 0.00%
INFO:     127.0.0.1:41292 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41304 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41320 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:31:46 metrics.py:351] Avg prompt throughput: 4301.3 tokens/s, Avg generation throughput: 8.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:31:46 metrics.py:367] Prefix cache hit rate: GPU: 82.43%, CPU: 0.00%
INFO:     127.0.0.1:49570 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49578 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49590 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49606 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:31:51 metrics.py:351] Avg prompt throughput: 3101.9 tokens/s, Avg generation throughput: 6.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 22 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:31:51 metrics.py:367] Prefix cache hit rate: GPU: 82.43%, CPU: 0.00%
INFO:     127.0.0.1:49620 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49626 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49640 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49650 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49662 - "POST /v1/completions HTTP/1.1" 200 OK
  8%|▊         | 5/64 [00:38<09:25,  9.58s/it]INFO:     127.0.0.1:49668 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49680 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49690 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:31:56 metrics.py:351] Avg prompt throughput: 2610.3 tokens/s, Avg generation throughput: 3.5 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 29 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:31:56 metrics.py:367] Prefix cache hit rate: GPU: 82.43%, CPU: 0.00%
INFO:     127.0.0.1:45002 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45014 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45016 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:32:01 metrics.py:351] Avg prompt throughput: 2354.5 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:32:01 metrics.py:367] Prefix cache hit rate: GPU: 82.43%, CPU: 0.00%
INFO:     127.0.0.1:45020 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45032 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45046 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45054 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45056 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45064 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45066 - "POST /v1/completions HTTP/1.1" 200 OK
  9%|▉         | 6/64 [00:49<09:58, 10.32s/it]INFO 10-22 10:32:06 metrics.py:351] Avg prompt throughput: 15139.7 tokens/s, Avg generation throughput: 25.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:32:06 metrics.py:367] Prefix cache hit rate: GPU: 82.77%, CPU: 0.00%
INFO:     127.0.0.1:49154 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49164 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49168 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49170 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49186 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49192 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49200 - "POST /v1/completions HTTP/1.1" 200 OK
 11%|█         | 7/64 [00:54<07:57,  8.38s/it]INFO 10-22 10:32:12 metrics.py:351] Avg prompt throughput: 16056.3 tokens/s, Avg generation throughput: 23.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 44 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:32:12 metrics.py:367] Prefix cache hit rate: GPU: 83.42%, CPU: 0.00%
INFO:     127.0.0.1:49204 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49220 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49230 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49242 - "POST /v1/completions HTTP/1.1" 200 OK
 12%|█▎        | 8/64 [00:58<06:39,  7.13s/it]INFO:     127.0.0.1:49244 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:49254 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35046 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:32:17 metrics.py:351] Avg prompt throughput: 18799.5 tokens/s, Avg generation throughput: 30.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 50 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:32:17 metrics.py:367] Prefix cache hit rate: GPU: 83.73%, CPU: 0.00%
INFO:     127.0.0.1:35048 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35064 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35074 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35088 - "POST /v1/completions HTTP/1.1" 200 OK
 14%|█▍        | 9/64 [01:03<05:47,  6.31s/it]INFO 10-22 10:32:22 metrics.py:351] Avg prompt throughput: 18612.1 tokens/s, Avg generation throughput: 30.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 53 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:32:22 metrics.py:367] Prefix cache hit rate: GPU: 84.02%, CPU: 0.00%
 16%|█▌        | 10/64 [01:07<05:09,  5.74s/it]INFO 10-22 10:32:27 metrics.py:351] Avg prompt throughput: 13125.0 tokens/s, Avg generation throughput: 19.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:32:27 metrics.py:367] Prefix cache hit rate: GPU: 82.56%, CPU: 0.00%
INFO 10-22 10:32:32 metrics.py:351] Avg prompt throughput: 4350.7 tokens/s, Avg generation throughput: 8.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:32:32 metrics.py:367] Prefix cache hit rate: GPU: 82.56%, CPU: 0.00%
INFO 10-22 10:32:37 metrics.py:351] Avg prompt throughput: 3245.3 tokens/s, Avg generation throughput: 6.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:32:37 metrics.py:367] Prefix cache hit rate: GPU: 82.56%, CPU: 0.00%
INFO 10-22 10:32:42 metrics.py:351] Avg prompt throughput: 2673.7 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:32:42 metrics.py:367] Prefix cache hit rate: GPU: 82.57%, CPU: 0.00%
 17%|█▋        | 11/64 [01:27<08:51, 10.03s/it]INFO 10-22 10:32:47 metrics.py:351] Avg prompt throughput: 2433.8 tokens/s, Avg generation throughput: 1.2 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:32:47 metrics.py:367] Prefix cache hit rate: GPU: 82.57%, CPU: 0.00%
INFO 10-22 10:32:52 metrics.py:351] Avg prompt throughput: 2631.8 tokens/s, Avg generation throughput: 1.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 51 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:32:52 metrics.py:367] Prefix cache hit rate: GPU: 82.87%, CPU: 0.00%
 19%|█▉        | 12/64 [01:39<09:06, 10.50s/it]INFO 10-22 10:32:57 metrics.py:351] Avg prompt throughput: 19407.1 tokens/s, Avg generation throughput: 31.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 50 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:32:57 metrics.py:367] Prefix cache hit rate: GPU: 83.16%, CPU: 0.00%
 20%|██        | 13/64 [01:43<07:20,  8.64s/it]INFO 10-22 10:33:02 metrics.py:351] Avg prompt throughput: 19194.7 tokens/s, Avg generation throughput: 31.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 49 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:33:02 metrics.py:367] Prefix cache hit rate: GPU: 83.45%, CPU: 0.00%
 22%|██▏       | 14/64 [01:47<06:07,  7.34s/it]INFO 10-22 10:33:07 metrics.py:351] Avg prompt throughput: 18830.2 tokens/s, Avg generation throughput: 30.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 48 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:33:07 metrics.py:367] Prefix cache hit rate: GPU: 83.72%, CPU: 0.00%
 23%|██▎       | 15/64 [01:52<05:16,  6.46s/it]INFO 10-22 10:33:12 metrics.py:351] Avg prompt throughput: 18635.1 tokens/s, Avg generation throughput: 30.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 47 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:33:12 metrics.py:367] Prefix cache hit rate: GPU: 83.99%, CPU: 0.00%
 25%|██▌       | 16/64 [01:56<04:40,  5.85s/it] 27%|██▋       | 17/64 [02:01<04:14,  5.42s/it]INFO 10-22 10:33:17 metrics.py:351] Avg prompt throughput: 19313.0 tokens/s, Avg generation throughput: 27.8 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 46 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:33:17 metrics.py:367] Prefix cache hit rate: GPU: 84.25%, CPU: 0.00%
INFO 10-22 10:33:22 metrics.py:351] Avg prompt throughput: 5575.3 tokens/s, Avg generation throughput: 7.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:33:22 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
INFO 10-22 10:33:27 metrics.py:351] Avg prompt throughput: 3614.9 tokens/s, Avg generation throughput: 7.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:33:27 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
INFO 10-22 10:33:33 metrics.py:351] Avg prompt throughput: 2847.5 tokens/s, Avg generation throughput: 5.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:33:33 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
 28%|██▊       | 18/64 [02:21<07:36,  9.92s/it]INFO 10-22 10:33:38 metrics.py:351] Avg prompt throughput: 2516.5 tokens/s, Avg generation throughput: 4.7 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:33:38 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
INFO 10-22 10:33:43 metrics.py:351] Avg prompt throughput: 2379.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:33:43 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
INFO 10-22 10:33:48 metrics.py:351] Avg prompt throughput: 8745.7 tokens/s, Avg generation throughput: 15.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 44 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:33:48 metrics.py:367] Prefix cache hit rate: GPU: 83.22%, CPU: 0.00%
 30%|██▉       | 19/64 [02:33<07:49, 10.42s/it]INFO 10-22 10:33:53 metrics.py:351] Avg prompt throughput: 19116.3 tokens/s, Avg generation throughput: 31.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 43 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:33:53 metrics.py:367] Prefix cache hit rate: GPU: 83.47%, CPU: 0.00%
 31%|███▏      | 20/64 [02:37<06:18,  8.60s/it] 33%|███▎      | 21/64 [02:41<05:15,  7.33s/it]INFO 10-22 10:33:58 metrics.py:351] Avg prompt throughput: 19159.4 tokens/s, Avg generation throughput: 30.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 42 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:33:58 metrics.py:367] Prefix cache hit rate: GPU: 83.72%, CPU: 0.00%
 34%|███▍      | 22/64 [02:46<04:30,  6.45s/it]INFO 10-22 10:34:04 metrics.py:351] Avg prompt throughput: 17099.3 tokens/s, Avg generation throughput: 22.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 40 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:34:04 metrics.py:367] Prefix cache hit rate: GPU: 84.20%, CPU: 0.00%
 36%|███▌      | 23/64 [02:50<03:59,  5.84s/it]INFO 10-22 10:34:10 metrics.py:351] Avg prompt throughput: 13568.0 tokens/s, Avg generation throughput: 21.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:34:10 metrics.py:367] Prefix cache hit rate: GPU: 83.01%, CPU: 0.00%
INFO 10-22 10:34:15 metrics.py:351] Avg prompt throughput: 5410.7 tokens/s, Avg generation throughput: 10.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:34:15 metrics.py:367] Prefix cache hit rate: GPU: 83.01%, CPU: 0.00%
INFO 10-22 10:34:20 metrics.py:351] Avg prompt throughput: 3240.7 tokens/s, Avg generation throughput: 6.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:34:20 metrics.py:367] Prefix cache hit rate: GPU: 83.02%, CPU: 0.00%
INFO 10-22 10:34:25 metrics.py:351] Avg prompt throughput: 2674.8 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:34:25 metrics.py:367] Prefix cache hit rate: GPU: 83.02%, CPU: 0.00%
 38%|███▊      | 24/64 [03:11<06:51, 10.29s/it]INFO 10-22 10:34:30 metrics.py:351] Avg prompt throughput: 2411.8 tokens/s, Avg generation throughput: 2.2 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:34:30 metrics.py:367] Prefix cache hit rate: GPU: 83.02%, CPU: 0.00%
INFO 10-22 10:34:35 metrics.py:351] Avg prompt throughput: 2208.7 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:34:35 metrics.py:367] Prefix cache hit rate: GPU: 83.02%, CPU: 0.00%
 39%|███▉      | 25/64 [03:23<06:58, 10.74s/it]INFO 10-22 10:34:40 metrics.py:351] Avg prompt throughput: 15107.0 tokens/s, Avg generation throughput: 23.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 37 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:34:40 metrics.py:367] Prefix cache hit rate: GPU: 83.49%, CPU: 0.00%
 41%|████      | 26/64 [03:27<05:35,  8.82s/it]INFO 10-22 10:34:45 metrics.py:351] Avg prompt throughput: 19278.2 tokens/s, Avg generation throughput: 31.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 36 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:34:45 metrics.py:367] Prefix cache hit rate: GPU: 83.72%, CPU: 0.00%
 42%|████▏     | 27/64 [03:31<04:36,  7.48s/it]INFO 10-22 10:34:50 metrics.py:351] Avg prompt throughput: 19026.3 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 35 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:34:50 metrics.py:367] Prefix cache hit rate: GPU: 83.94%, CPU: 0.00%
 44%|████▍     | 28/64 [03:36<03:55,  6.56s/it]INFO 10-22 10:34:55 metrics.py:351] Avg prompt throughput: 19039.5 tokens/s, Avg generation throughput: 31.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 34 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:34:55 metrics.py:367] Prefix cache hit rate: GPU: 84.16%, CPU: 0.00%
 45%|████▌     | 29/64 [03:40<03:26,  5.91s/it]INFO 10-22 10:35:00 metrics.py:351] Avg prompt throughput: 8901.5 tokens/s, Avg generation throughput: 10.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:35:00 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
INFO 10-22 10:35:06 metrics.py:351] Avg prompt throughput: 4955.5 tokens/s, Avg generation throughput: 10.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:35:06 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
INFO 10-22 10:35:11 metrics.py:351] Avg prompt throughput: 3268.7 tokens/s, Avg generation throughput: 6.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:35:11 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
INFO 10-22 10:35:16 metrics.py:351] Avg prompt throughput: 2631.2 tokens/s, Avg generation throughput: 5.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:35:16 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
 47%|████▋     | 30/64 [04:01<05:52, 10.37s/it]INFO 10-22 10:35:21 metrics.py:351] Avg prompt throughput: 2404.8 tokens/s, Avg generation throughput: 1.4 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:35:21 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
INFO 10-22 10:35:26 metrics.py:351] Avg prompt throughput: 1910.3 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 32 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:35:26 metrics.py:367] Prefix cache hit rate: GPU: 83.29%, CPU: 0.00%
 48%|████▊     | 31/64 [04:13<05:55, 10.78s/it]INFO 10-22 10:35:31 metrics.py:351] Avg prompt throughput: 19336.7 tokens/s, Avg generation throughput: 31.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 31 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:35:31 metrics.py:367] Prefix cache hit rate: GPU: 83.51%, CPU: 0.00%
 50%|█████     | 32/64 [04:17<04:43,  8.86s/it]INFO 10-22 10:35:36 metrics.py:351] Avg prompt throughput: 19022.9 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 30 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:35:36 metrics.py:367] Prefix cache hit rate: GPU: 83.72%, CPU: 0.00%
 52%|█████▏    | 33/64 [04:21<03:52,  7.51s/it]INFO 10-22 10:35:41 metrics.py:351] Avg prompt throughput: 19109.9 tokens/s, Avg generation throughput: 31.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 29 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:35:41 metrics.py:367] Prefix cache hit rate: GPU: 83.92%, CPU: 0.00%
 53%|█████▎    | 34/64 [04:26<03:16,  6.56s/it]INFO 10-22 10:35:46 metrics.py:351] Avg prompt throughput: 9436.0 tokens/s, Avg generation throughput: 11.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:35:46 metrics.py:367] Prefix cache hit rate: GPU: 82.90%, CPU: 0.00%
INFO 10-22 10:35:51 metrics.py:351] Avg prompt throughput: 4544.4 tokens/s, Avg generation throughput: 9.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:35:51 metrics.py:367] Prefix cache hit rate: GPU: 82.91%, CPU: 0.00%
INFO 10-22 10:35:56 metrics.py:351] Avg prompt throughput: 3204.0 tokens/s, Avg generation throughput: 6.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:35:56 metrics.py:367] Prefix cache hit rate: GPU: 82.91%, CPU: 0.00%
INFO 10-22 10:36:01 metrics.py:351] Avg prompt throughput: 2611.0 tokens/s, Avg generation throughput: 5.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:36:01 metrics.py:367] Prefix cache hit rate: GPU: 82.91%, CPU: 0.00%
 55%|█████▍    | 35/64 [04:46<05:12, 10.76s/it]INFO 10-22 10:36:07 metrics.py:351] Avg prompt throughput: 2386.0 tokens/s, Avg generation throughput: 1.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:36:07 metrics.py:367] Prefix cache hit rate: GPU: 82.91%, CPU: 0.00%
INFO 10-22 10:36:12 metrics.py:351] Avg prompt throughput: 2428.1 tokens/s, Avg generation throughput: 1.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 27 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:36:12 metrics.py:367] Prefix cache hit rate: GPU: 83.11%, CPU: 0.00%
 56%|█████▋    | 36/64 [04:58<05:09, 11.05s/it]INFO 10-22 10:36:17 metrics.py:351] Avg prompt throughput: 19455.0 tokens/s, Avg generation throughput: 31.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 26 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:36:17 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
 58%|█████▊    | 37/64 [05:02<04:03,  9.03s/it]INFO 10-22 10:36:22 metrics.py:351] Avg prompt throughput: 19206.0 tokens/s, Avg generation throughput: 31.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 25 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:36:22 metrics.py:367] Prefix cache hit rate: GPU: 83.52%, CPU: 0.00%
 59%|█████▉    | 38/64 [05:07<03:18,  7.63s/it]INFO 10-22 10:36:27 metrics.py:351] Avg prompt throughput: 19140.1 tokens/s, Avg generation throughput: 31.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 24 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:36:27 metrics.py:367] Prefix cache hit rate: GPU: 83.72%, CPU: 0.00%
 61%|██████    | 39/64 [05:11<02:46,  6.66s/it]INFO 10-22 10:36:32 metrics.py:351] Avg prompt throughput: 8937.7 tokens/s, Avg generation throughput: 10.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:36:32 metrics.py:367] Prefix cache hit rate: GPU: 82.76%, CPU: 0.00%
INFO 10-22 10:36:37 metrics.py:351] Avg prompt throughput: 4157.2 tokens/s, Avg generation throughput: 8.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:36:37 metrics.py:367] Prefix cache hit rate: GPU: 82.76%, CPU: 0.00%
INFO 10-22 10:36:42 metrics.py:351] Avg prompt throughput: 3172.4 tokens/s, Avg generation throughput: 6.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:36:42 metrics.py:367] Prefix cache hit rate: GPU: 82.76%, CPU: 0.00%
INFO 10-22 10:36:47 metrics.py:351] Avg prompt throughput: 2633.2 tokens/s, Avg generation throughput: 5.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:36:47 metrics.py:367] Prefix cache hit rate: GPU: 82.76%, CPU: 0.00%
 62%|██████▎   | 40/64 [05:32<04:20, 10.85s/it]INFO 10-22 10:36:52 metrics.py:351] Avg prompt throughput: 2413.9 tokens/s, Avg generation throughput: 1.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:36:52 metrics.py:367] Prefix cache hit rate: GPU: 82.76%, CPU: 0.00%
INFO 10-22 10:36:57 metrics.py:351] Avg prompt throughput: 2536.6 tokens/s, Avg generation throughput: 1.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 22 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:36:57 metrics.py:367] Prefix cache hit rate: GPU: 82.96%, CPU: 0.00%
 64%|██████▍   | 41/64 [05:43<04:14, 11.08s/it]INFO 10-22 10:37:02 metrics.py:351] Avg prompt throughput: 19555.4 tokens/s, Avg generation throughput: 32.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 21 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:37:02 metrics.py:367] Prefix cache hit rate: GPU: 83.16%, CPU: 0.00%
 66%|██████▌   | 42/64 [05:48<03:19,  9.05s/it]INFO 10-22 10:37:07 metrics.py:351] Avg prompt throughput: 19321.6 tokens/s, Avg generation throughput: 31.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 20 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:37:07 metrics.py:367] Prefix cache hit rate: GPU: 83.35%, CPU: 0.00%
 67%|██████▋   | 43/64 [05:52<02:40,  7.63s/it]INFO 10-22 10:37:12 metrics.py:351] Avg prompt throughput: 19079.8 tokens/s, Avg generation throughput: 31.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 19 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:37:12 metrics.py:367] Prefix cache hit rate: GPU: 83.53%, CPU: 0.00%
 69%|██████▉   | 44/64 [05:56<02:13,  6.66s/it]INFO 10-22 10:37:17 metrics.py:351] Avg prompt throughput: 8672.8 tokens/s, Avg generation throughput: 10.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:37:17 metrics.py:367] Prefix cache hit rate: GPU: 82.63%, CPU: 0.00%
INFO 10-22 10:37:22 metrics.py:351] Avg prompt throughput: 4240.3 tokens/s, Avg generation throughput: 8.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:37:22 metrics.py:367] Prefix cache hit rate: GPU: 82.63%, CPU: 0.00%
INFO 10-22 10:37:27 metrics.py:351] Avg prompt throughput: 3079.3 tokens/s, Avg generation throughput: 6.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:37:27 metrics.py:367] Prefix cache hit rate: GPU: 82.63%, CPU: 0.00%
INFO 10-22 10:37:32 metrics.py:351] Avg prompt throughput: 2575.6 tokens/s, Avg generation throughput: 5.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:37:32 metrics.py:367] Prefix cache hit rate: GPU: 82.63%, CPU: 0.00%
 70%|███████   | 45/64 [06:17<03:27, 10.93s/it]INFO 10-22 10:37:38 metrics.py:351] Avg prompt throughput: 2354.8 tokens/s, Avg generation throughput: 1.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:37:38 metrics.py:367] Prefix cache hit rate: GPU: 82.64%, CPU: 0.00%
INFO 10-22 10:37:43 metrics.py:351] Avg prompt throughput: 2139.3 tokens/s, Avg generation throughput: 0.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 17 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:37:43 metrics.py:367] Prefix cache hit rate: GPU: 82.82%, CPU: 0.00%
 72%|███████▏  | 46/64 [06:29<03:21, 11.19s/it]INFO 10-22 10:37:48 metrics.py:351] Avg prompt throughput: 19574.3 tokens/s, Avg generation throughput: 32.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 16 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:37:48 metrics.py:367] Prefix cache hit rate: GPU: 83.01%, CPU: 0.00%
 73%|███████▎  | 47/64 [06:33<02:35,  9.13s/it]INFO 10-22 10:37:53 metrics.py:351] Avg prompt throughput: 19206.0 tokens/s, Avg generation throughput: 31.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 15 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:37:53 metrics.py:367] Prefix cache hit rate: GPU: 83.19%, CPU: 0.00%
 75%|███████▌  | 48/64 [06:38<02:03,  7.70s/it]INFO 10-22 10:37:58 metrics.py:351] Avg prompt throughput: 19015.6 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 14 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:37:58 metrics.py:367] Prefix cache hit rate: GPU: 83.37%, CPU: 0.00%
 77%|███████▋  | 49/64 [06:42<01:40,  6.70s/it]INFO 10-22 10:38:03 metrics.py:351] Avg prompt throughput: 18823.7 tokens/s, Avg generation throughput: 30.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 13 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:38:03 metrics.py:367] Prefix cache hit rate: GPU: 83.54%, CPU: 0.00%
 78%|███████▊  | 50/64 [06:46<01:24,  6.01s/it]INFO 10-22 10:38:08 metrics.py:351] Avg prompt throughput: 7016.0 tokens/s, Avg generation throughput: 6.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:38:08 metrics.py:367] Prefix cache hit rate: GPU: 82.70%, CPU: 0.00%
INFO 10-22 10:38:13 metrics.py:351] Avg prompt throughput: 3886.0 tokens/s, Avg generation throughput: 7.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:38:13 metrics.py:367] Prefix cache hit rate: GPU: 82.70%, CPU: 0.00%
INFO 10-22 10:38:18 metrics.py:351] Avg prompt throughput: 3015.1 tokens/s, Avg generation throughput: 6.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:38:18 metrics.py:367] Prefix cache hit rate: GPU: 82.70%, CPU: 0.00%
INFO 10-22 10:38:23 metrics.py:351] Avg prompt throughput: 2529.2 tokens/s, Avg generation throughput: 5.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:38:23 metrics.py:367] Prefix cache hit rate: GPU: 82.70%, CPU: 0.00%
 80%|███████▉  | 51/64 [07:08<02:19, 10.74s/it]INFO 10-22 10:38:28 metrics.py:351] Avg prompt throughput: 2309.4 tokens/s, Avg generation throughput: 1.4 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:38:28 metrics.py:367] Prefix cache hit rate: GPU: 82.70%, CPU: 0.00%
INFO 10-22 10:38:34 metrics.py:351] Avg prompt throughput: 1875.8 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 11 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:38:34 metrics.py:367] Prefix cache hit rate: GPU: 82.88%, CPU: 0.00%
 81%|████████▏ | 52/64 [07:20<02:13, 11.13s/it]INFO 10-22 10:38:39 metrics.py:351] Avg prompt throughput: 19419.1 tokens/s, Avg generation throughput: 31.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 10 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:38:39 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
 83%|████████▎ | 53/64 [07:25<01:40,  9.09s/it]INFO 10-22 10:38:44 metrics.py:351] Avg prompt throughput: 19062.3 tokens/s, Avg generation throughput: 31.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 9 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:38:44 metrics.py:367] Prefix cache hit rate: GPU: 83.22%, CPU: 0.00%
 84%|████████▍ | 54/64 [07:29<01:16,  7.69s/it]INFO 10-22 10:38:49 metrics.py:351] Avg prompt throughput: 18483.6 tokens/s, Avg generation throughput: 29.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 8 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:38:49 metrics.py:367] Prefix cache hit rate: GPU: 83.39%, CPU: 0.00%
 86%|████████▌ | 55/64 [07:34<01:00,  6.72s/it]INFO 10-22 10:38:54 metrics.py:351] Avg prompt throughput: 10057.8 tokens/s, Avg generation throughput: 12.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:38:54 metrics.py:367] Prefix cache hit rate: GPU: 82.59%, CPU: 0.00%
INFO 10-22 10:38:59 metrics.py:351] Avg prompt throughput: 4160.2 tokens/s, Avg generation throughput: 8.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:38:59 metrics.py:367] Prefix cache hit rate: GPU: 82.59%, CPU: 0.00%
INFO 10-22 10:39:04 metrics.py:351] Avg prompt throughput: 3037.3 tokens/s, Avg generation throughput: 6.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:39:04 metrics.py:367] Prefix cache hit rate: GPU: 82.59%, CPU: 0.00%
INFO 10-22 10:39:09 metrics.py:351] Avg prompt throughput: 2575.1 tokens/s, Avg generation throughput: 5.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:39:09 metrics.py:367] Prefix cache hit rate: GPU: 82.59%, CPU: 0.00%
 88%|████████▊ | 56/64 [07:55<01:29, 11.15s/it]INFO 10-22 10:39:14 metrics.py:351] Avg prompt throughput: 2327.4 tokens/s, Avg generation throughput: 1.9 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:39:14 metrics.py:367] Prefix cache hit rate: GPU: 82.59%, CPU: 0.00%
INFO 10-22 10:39:19 metrics.py:351] Avg prompt throughput: 2136.7 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:39:19 metrics.py:367] Prefix cache hit rate: GPU: 82.59%, CPU: 0.00%
 89%|████████▉ | 57/64 [08:07<01:19, 11.41s/it]INFO 10-22 10:39:25 metrics.py:351] Avg prompt throughput: 15088.7 tokens/s, Avg generation throughput: 23.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 5 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:39:25 metrics.py:367] Prefix cache hit rate: GPU: 82.92%, CPU: 0.00%
 91%|█████████ | 58/64 [08:11<00:55,  9.29s/it]INFO 10-22 10:39:30 metrics.py:351] Avg prompt throughput: 19335.7 tokens/s, Avg generation throughput: 31.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 4 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:39:30 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
 92%|█████████▏| 59/64 [08:16<00:39,  7.81s/it]INFO 10-22 10:39:35 metrics.py:351] Avg prompt throughput: 18745.9 tokens/s, Avg generation throughput: 30.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 3 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:39:35 metrics.py:367] Prefix cache hit rate: GPU: 83.25%, CPU: 0.00%
 94%|█████████▍| 60/64 [08:20<00:27,  6.81s/it]INFO 10-22 10:39:40 metrics.py:351] Avg prompt throughput: 11562.4 tokens/s, Avg generation throughput: 15.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:39:40 metrics.py:367] Prefix cache hit rate: GPU: 82.49%, CPU: 0.00%
INFO 10-22 10:39:45 metrics.py:351] Avg prompt throughput: 4665.5 tokens/s, Avg generation throughput: 9.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:39:45 metrics.py:367] Prefix cache hit rate: GPU: 82.49%, CPU: 0.00%
INFO 10-22 10:39:50 metrics.py:351] Avg prompt throughput: 3115.0 tokens/s, Avg generation throughput: 6.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:39:50 metrics.py:367] Prefix cache hit rate: GPU: 82.49%, CPU: 0.00%
INFO 10-22 10:39:55 metrics.py:351] Avg prompt throughput: 2574.4 tokens/s, Avg generation throughput: 5.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:39:55 metrics.py:367] Prefix cache hit rate: GPU: 82.49%, CPU: 0.00%
 95%|█████████▌| 61/64 [08:42<00:33, 11.33s/it]INFO 10-22 10:40:00 metrics.py:351] Avg prompt throughput: 2341.5 tokens/s, Avg generation throughput: 2.7 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:40:00 metrics.py:367] Prefix cache hit rate: GPU: 82.49%, CPU: 0.00%
INFO 10-22 10:40:05 metrics.py:351] Avg prompt throughput: 2237.5 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:40:05 metrics.py:367] Prefix cache hit rate: GPU: 82.49%, CPU: 0.00%
 97%|█████████▋| 62/64 [08:54<00:22, 11.50s/it]INFO 10-22 10:40:10 metrics.py:351] Avg prompt throughput: 13503.6 tokens/s, Avg generation throughput: 25.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 1 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:40:10 metrics.py:367] Prefix cache hit rate: GPU: 82.65%, CPU: 0.00%
 98%|█████████▊| 63/64 [08:58<00:09,  9.38s/it]INFO 10-22 10:40:15 metrics.py:351] Avg prompt throughput: 19549.1 tokens/s, Avg generation throughput: 25.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:40:15 metrics.py:367] Prefix cache hit rate: GPU: 82.81%, CPU: 0.00%
100%|██████████| 64/64 [09:02<00:00,  7.57s/it]100%|██████████| 64/64 [09:02<00:00,  8.47s/it]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  542.26    
Total input tokens:                      5242880   
Total generated tokens:                  8190      
Request throughput (req/s):              0.12      
Output token throughput (tok/s):         15.10     
Total Token throughput (tok/s):          9683.70   
---------------Time to First Token----------------
Mean TTFT (ms):                          225844.50 
Median TTFT (ms):                        219321.34 
P99 TTFT (ms):                           475790.33 
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          43.46     
Median TPOT (ms):                        23.44     
P99 TPOT (ms):                           148.70    
---------------Inter-token Latency----------------
Mean ITL (ms):                           43.41     
Median ITL (ms):                         23.70     
P99 ITL (ms):                            207.21    
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_81920.json             --request-rate 1             --ignore-eos             --ib-input-len 81920             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_81920.json             --request-rate 1             --ignore-eos             --ib-input-len 81920             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_1_in_81920.json             --request-rate 1             --ignore-eos             --ib-input-len 81920             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for qps in $qps_list
+ [[ 4 == *\i\n\f* ]]
+ new_test_name=vllm_qwen7B_ib_prefix_qps_4
+ backend=vllm
+ [[ vllm == *\v\l\l\m* ]]
+ backend=vllm
+ [[ ib = \i\b ]]
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_4_in_2048
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_2048.json             --request-rate 4             --ignore-eos             --ib-input-len 2048             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 4'
Running test case vllm_qwen7B_ib_prefix with qps 4
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_2048.json             --request-rate 4             --ignore-eos             --ib-input-len 2048             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_2048.json             --request-rate 4             --ignore-eos             --ib-input-len 2048             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_2048.json             --request-rate 4             --ignore-eos             --ib-input-len 2048             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_4_in_2048.json --request-rate 4 --ignore-eos --ib-input-len 2048
INFO 10-22 10:40:23 metrics.py:351] Avg prompt throughput: 138.8 tokens/s, Avg generation throughput: 17.4 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:40:23 metrics.py:367] Prefix cache hit rate: GPU: 82.81%, CPU: 0.00%
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 10:40:33 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:40:33 metrics.py:367] Prefix cache hit rate: GPU: 82.81%, CPU: 0.00%
INFO 10-22 10:40:43 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:40:43 metrics.py:367] Prefix cache hit rate: GPU: 82.81%, CPU: 0.00%
INFO 10-22 10:40:53 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:40:53 metrics.py:367] Prefix cache hit rate: GPU: 82.81%, CPU: 0.00%
INFO:     127.0.0.1:58876 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:40:58 metrics.py:351] Avg prompt throughput: 409.5 tokens/s, Avg generation throughput: 22.4 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:40:58 metrics.py:367] Prefix cache hit rate: GPU: 82.79%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=4.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_4_in_2048.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=2048, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 4.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:35384 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35386 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35390 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35394 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35404 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35408 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35418 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35432 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35444 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:02<02:13,  2.13s/it]  3%|▎         | 2/64 [00:02<01:03,  1.03s/it]  5%|▍         | 3/64 [00:02<00:43,  1.40it/s]INFO:     127.0.0.1:35460 - "POST /v1/completions HTTP/1.1" 200 OK
  6%|▋         | 4/64 [00:02<00:31,  1.88it/s]INFO:     127.0.0.1:35462 - "POST /v1/completions HTTP/1.1" 200 OK
  8%|▊         | 5/64 [00:03<00:24,  2.41it/s]  9%|▉         | 6/64 [00:03<00:18,  3.11it/s]INFO:     127.0.0.1:35476 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35488 - "POST /v1/completions HTTP/1.1" 200 OK
 11%|█         | 7/64 [00:03<00:17,  3.32it/s] 12%|█▎        | 8/64 [00:03<00:14,  3.91it/s]INFO:     127.0.0.1:35500 - "POST /v1/completions HTTP/1.1" 200 OK
 14%|█▍        | 9/64 [00:04<00:19,  2.86it/s]INFO:     127.0.0.1:35512 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35520 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35526 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35532 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:41:03 metrics.py:351] Avg prompt throughput: 7371.1 tokens/s, Avg generation throughput: 319.1 tokens/s, Running: 9 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 1.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:41:03 metrics.py:367] Prefix cache hit rate: GPU: 82.80%, CPU: 0.00%
INFO:     127.0.0.1:35538 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35548 - "POST /v1/completions HTTP/1.1" 200 OK
 16%|█▌        | 10/64 [00:05<00:30,  1.75it/s] 17%|█▋        | 11/64 [00:05<00:22,  2.31it/s]INFO:     127.0.0.1:35552 - "POST /v1/completions HTTP/1.1" 200 OK
 19%|█▉        | 12/64 [00:05<00:22,  2.35it/s] 22%|██▏       | 14/64 [00:06<00:14,  3.42it/s]INFO:     127.0.0.1:35558 - "POST /v1/completions HTTP/1.1" 200 OK
 23%|██▎       | 15/64 [00:06<00:18,  2.61it/s] 27%|██▋       | 17/64 [00:06<00:11,  4.00it/s]INFO:     127.0.0.1:35566 - "POST /v1/completions HTTP/1.1" 200 OK
 30%|██▉       | 19/64 [00:07<00:09,  4.58it/s]INFO:     127.0.0.1:35572 - "POST /v1/completions HTTP/1.1" 200 OK
 31%|███▏      | 20/64 [00:07<00:09,  4.81it/s]INFO:     127.0.0.1:35586 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35588 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35600 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35602 - "POST /v1/completions HTTP/1.1" 200 OK
 33%|███▎      | 21/64 [00:08<00:13,  3.24it/s]INFO:     127.0.0.1:47938 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47940 - "POST /v1/completions HTTP/1.1" 200 OK
 34%|███▍      | 22/64 [00:09<00:19,  2.13it/s]INFO:     127.0.0.1:47956 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47962 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47966 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47982 - "POST /v1/completions HTTP/1.1" 200 OK
 36%|███▌      | 23/64 [00:09<00:21,  1.94it/s]INFO 10-22 10:41:08 metrics.py:351] Avg prompt throughput: 6426.2 tokens/s, Avg generation throughput: 394.7 tokens/s, Running: 11 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 2.1%, CPU KV cache usage: 0.0%.
INFO 10-22 10:41:08 metrics.py:367] Prefix cache hit rate: GPU: 82.78%, CPU: 0.00%
 38%|███▊      | 24/64 [00:09<00:16,  2.37it/s]INFO:     127.0.0.1:47984 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:47994 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48006 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48022 - "POST /v1/completions HTTP/1.1" 200 OK
 39%|███▉      | 25/64 [00:10<00:18,  2.06it/s]INFO:     127.0.0.1:48026 - "POST /v1/completions HTTP/1.1" 200 OK
 42%|████▏     | 27/64 [00:10<00:11,  3.33it/s]INFO:     127.0.0.1:48038 - "POST /v1/completions HTTP/1.1" 200 OK
 45%|████▌     | 29/64 [00:11<00:11,  2.94it/s]INFO:     127.0.0.1:48052 - "POST /v1/completions HTTP/1.1" 200 OK
 47%|████▋     | 30/64 [00:11<00:10,  3.27it/s]INFO:     127.0.0.1:48058 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48072 - "POST /v1/completions HTTP/1.1" 200 OK
 48%|████▊     | 31/64 [00:11<00:10,  3.24it/s]INFO:     127.0.0.1:48076 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48088 - "POST /v1/completions HTTP/1.1" 200 OK
 52%|█████▏    | 33/64 [00:12<00:07,  4.12it/s] 53%|█████▎    | 34/64 [00:12<00:06,  4.44it/s]INFO:     127.0.0.1:48100 - "POST /v1/completions HTTP/1.1" 200 OK
 55%|█████▍    | 35/64 [00:12<00:06,  4.49it/s]INFO:     127.0.0.1:48106 - "POST /v1/completions HTTP/1.1" 200 OK
 58%|█████▊    | 37/64 [00:12<00:04,  6.24it/s]INFO:     127.0.0.1:48122 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48132 - "POST /v1/completions HTTP/1.1" 200 OK
 59%|█████▉    | 38/64 [00:12<00:04,  6.25it/s]INFO:     127.0.0.1:48146 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48150 - "POST /v1/completions HTTP/1.1" 200 OK
 61%|██████    | 39/64 [00:13<00:04,  5.62it/s]INFO:     127.0.0.1:48164 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48178 - "POST /v1/completions HTTP/1.1" 200 OK
 62%|██████▎   | 40/64 [00:13<00:07,  3.06it/s] 64%|██████▍   | 41/64 [00:14<00:07,  3.18it/s] 67%|██████▋   | 43/64 [00:14<00:04,  4.80it/s]INFO:     127.0.0.1:48186 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48188 - "POST /v1/completions HTTP/1.1" 200 OK
 69%|██████▉   | 44/64 [00:14<00:04,  4.66it/s]INFO:     127.0.0.1:48204 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48206 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:41:13 metrics.py:351] Avg prompt throughput: 9066.5 tokens/s, Avg generation throughput: 596.6 tokens/s, Running: 12 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 2.1%, CPU KV cache usage: 0.0%.
INFO 10-22 10:41:13 metrics.py:367] Prefix cache hit rate: GPU: 82.79%, CPU: 0.00%
 72%|███████▏  | 46/64 [00:14<00:03,  5.36it/s]INFO:     127.0.0.1:48222 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48228 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48238 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48248 - "POST /v1/completions HTTP/1.1" 200 OK
 73%|███████▎  | 47/64 [00:15<00:04,  4.24it/s]INFO:     127.0.0.1:48260 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:48272 - "POST /v1/completions HTTP/1.1" 200 OK
 77%|███████▋  | 49/64 [00:15<00:02,  5.81it/s] 80%|███████▉  | 51/64 [00:15<00:01,  7.15it/s]INFO:     127.0.0.1:48282 - "POST /v1/completions HTTP/1.1" 200 OK
 81%|████████▏ | 52/64 [00:15<00:01,  6.61it/s] 83%|████████▎ | 53/64 [00:15<00:01,  6.72it/s] 84%|████████▍ | 54/64 [00:17<00:03,  2.59it/s] 88%|████████▊ | 56/64 [00:17<00:02,  3.92it/s] 91%|█████████ | 58/64 [00:17<00:01,  4.93it/s] 94%|█████████▍| 60/64 [00:17<00:00,  6.47it/s] 97%|█████████▋| 62/64 [00:17<00:00,  8.18it/s]100%|██████████| 64/64 [00:17<00:00,  8.91it/s]100%|██████████| 64/64 [00:17<00:00,  3.59it/s]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  17.83     
Total input tokens:                      131072    
Total generated tokens:                  8191      
Request throughput (req/s):              3.59      
Output token throughput (tok/s):         459.43    
Total Token throughput (tok/s):          7811.20   
---------------Time to First Token----------------
Mean TTFT (ms):                          167.56    
Median TTFT (ms):                        131.77    
P99 TTFT (ms):                           341.83    
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          18.19     
Median TPOT (ms):                        17.95     
P99 TPOT (ms):                           20.42     
---------------Inter-token Latency----------------
Mean ITL (ms):                           18.18     
Median ITL (ms):                         17.13     
P99 ITL (ms):                            57.55     
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_2048.json             --request-rate 4             --ignore-eos             --ib-input-len 2048             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_2048.json             --request-rate 4             --ignore-eos             --ib-input-len 2048             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_2048.json             --request-rate 4             --ignore-eos             --ib-input-len 2048             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_4_in_10240
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_10240.json             --request-rate 4             --ignore-eos             --ib-input-len 10240             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 4'
Running test case vllm_qwen7B_ib_prefix with qps 4
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_10240.json             --request-rate 4             --ignore-eos             --ib-input-len 10240             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_10240.json             --request-rate 4             --ignore-eos             --ib-input-len 10240             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_10240.json             --request-rate 4             --ignore-eos             --ib-input-len 10240             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_4_in_10240.json --request-rate 4 --ignore-eos --ib-input-len 10240
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 10:41:23 metrics.py:351] Avg prompt throughput: 1660.1 tokens/s, Avg generation throughput: 164.8 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:41:23 metrics.py:367] Prefix cache hit rate: GPU: 82.80%, CPU: 0.00%
INFO 10-22 10:41:33 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:41:33 metrics.py:367] Prefix cache hit rate: GPU: 82.80%, CPU: 0.00%
INFO 10-22 10:41:43 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:41:43 metrics.py:367] Prefix cache hit rate: GPU: 82.80%, CPU: 0.00%
INFO 10-22 10:41:53 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:41:53 metrics.py:367] Prefix cache hit rate: GPU: 82.80%, CPU: 0.00%
INFO:     127.0.0.1:36408 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:41:58 metrics.py:351] Avg prompt throughput: 2043.7 tokens/s, Avg generation throughput: 18.2 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 3.1%, CPU KV cache usage: 0.0%.
INFO 10-22 10:41:58 metrics.py:367] Prefix cache hit rate: GPU: 82.73%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=4.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_4_in_10240.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=10240, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 4.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:40618 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40630 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40632 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40642 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40644 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40656 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40660 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40670 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40672 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40674 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40676 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:03<03:32,  3.38s/it]INFO:     127.0.0.1:40688 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40702 - "POST /v1/completions HTTP/1.1" 200 OK
  3%|▎         | 2/64 [00:03<01:40,  1.63s/it]INFO:     127.0.0.1:40714 - "POST /v1/completions HTTP/1.1" 200 OK
  5%|▍         | 3/64 [00:04<01:05,  1.07s/it]INFO 10-22 10:42:03 metrics.py:351] Avg prompt throughput: 20270.0 tokens/s, Avg generation throughput: 169.1 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 4 reqs, GPU KV cache usage: 6.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:42:03 metrics.py:367] Prefix cache hit rate: GPU: 82.83%, CPU: 0.00%
INFO:     127.0.0.1:40724 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40728 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40736 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40744 - "POST /v1/completions HTTP/1.1" 200 OK
  6%|▋         | 4/64 [00:04<00:47,  1.25it/s]INFO:     127.0.0.1:40760 - "POST /v1/completions HTTP/1.1" 200 OK
  8%|▊         | 5/64 [00:05<00:41,  1.43it/s]INFO:     127.0.0.1:40764 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40766 - "POST /v1/completions HTTP/1.1" 200 OK
  9%|▉         | 6/64 [00:06<00:47,  1.23it/s] 11%|█         | 7/64 [00:06<00:38,  1.49it/s]INFO:     127.0.0.1:40774 - "POST /v1/completions HTTP/1.1" 200 OK
 12%|█▎        | 8/64 [00:06<00:32,  1.71it/s]INFO:     127.0.0.1:40780 - "POST /v1/completions HTTP/1.1" 200 OK
 14%|█▍        | 9/64 [00:07<00:29,  1.89it/s]INFO:     127.0.0.1:40792 - "POST /v1/completions HTTP/1.1" 200 OK
 16%|█▌        | 10/64 [00:07<00:26,  2.07it/s]INFO:     127.0.0.1:40808 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40816 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60470 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60472 - "POST /v1/completions HTTP/1.1" 200 OK
 17%|█▋        | 11/64 [00:08<00:26,  2.01it/s] 19%|█▉        | 12/64 [00:08<00:24,  2.15it/s]INFO:     127.0.0.1:60480 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60496 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60502 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60516 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:42:08 metrics.py:351] Avg prompt throughput: 18391.8 tokens/s, Avg generation throughput: 229.8 tokens/s, Running: 8 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 6.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:42:08 metrics.py:367] Prefix cache hit rate: GPU: 82.83%, CPU: 0.00%
INFO:     127.0.0.1:60532 - "POST /v1/completions HTTP/1.1" 200 OK
 20%|██        | 13/64 [00:09<00:31,  1.60it/s]INFO:     127.0.0.1:60538 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60544 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60548 - "POST /v1/completions HTTP/1.1" 200 OK
 22%|██▏       | 14/64 [00:10<00:27,  1.79it/s]INFO:     127.0.0.1:60562 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60568 - "POST /v1/completions HTTP/1.1" 200 OK
 23%|██▎       | 15/64 [00:10<00:25,  1.96it/s]INFO:     127.0.0.1:60578 - "POST /v1/completions HTTP/1.1" 200 OK
 25%|██▌       | 16/64 [00:10<00:22,  2.11it/s] 27%|██▋       | 17/64 [00:11<00:21,  2.22it/s]INFO:     127.0.0.1:60580 - "POST /v1/completions HTTP/1.1" 200 OK
 28%|██▊       | 18/64 [00:11<00:20,  2.23it/s]INFO:     127.0.0.1:60596 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60598 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60604 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60620 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60636 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60652 - "POST /v1/completions HTTP/1.1" 200 OK
 30%|██▉       | 19/64 [00:12<00:28,  1.60it/s]INFO:     127.0.0.1:60668 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60674 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60690 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60702 - "POST /v1/completions HTTP/1.1" 200 OK
 31%|███▏      | 20/64 [00:13<00:24,  1.80it/s]INFO:     127.0.0.1:60716 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60718 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60724 - "POST /v1/completions HTTP/1.1" 200 OK
 33%|███▎      | 21/64 [00:13<00:21,  1.99it/s] 34%|███▍      | 22/64 [00:13<00:19,  2.11it/s] 36%|███▌      | 23/64 [00:14<00:18,  2.21it/s]INFO 10-22 10:42:13 metrics.py:351] Avg prompt throughput: 22299.2 tokens/s, Avg generation throughput: 278.7 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:42:13 metrics.py:367] Prefix cache hit rate: GPU: 82.92%, CPU: 0.00%
INFO:     127.0.0.1:60736 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60740 - "POST /v1/completions HTTP/1.1" 200 OK
 38%|███▊      | 24/64 [00:14<00:18,  2.16it/s]INFO:     127.0.0.1:60750 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60752 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60768 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60774 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60786 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60790 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60798 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60806 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60812 - "POST /v1/completions HTTP/1.1" 200 OK
 39%|███▉      | 25/64 [00:15<00:24,  1.61it/s] 41%|████      | 26/64 [00:16<00:21,  1.80it/s] 42%|████▏     | 27/64 [00:16<00:18,  1.98it/s] 44%|████▍     | 28/64 [00:16<00:17,  2.11it/s] 45%|████▌     | 29/64 [00:17<00:16,  2.13it/s] 47%|████▋     | 30/64 [00:18<00:21,  1.56it/s] 48%|████▊     | 31/64 [00:18<00:18,  1.75it/s] 50%|█████     | 32/64 [00:19<00:16,  1.93it/s]INFO 10-22 10:42:18 metrics.py:351] Avg prompt throughput: 18446.0 tokens/s, Avg generation throughput: 230.7 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 25 reqs, GPU KV cache usage: 6.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:42:18 metrics.py:367] Prefix cache hit rate: GPU: 82.91%, CPU: 0.00%
 52%|█████▏    | 33/64 [00:19<00:15,  2.06it/s] 53%|█████▎    | 34/64 [00:20<00:16,  1.78it/s] 55%|█████▍    | 35/64 [00:21<00:20,  1.42it/s] 56%|█████▋    | 36/64 [00:21<00:17,  1.62it/s] 58%|█████▊    | 37/64 [00:22<00:14,  1.80it/s] 59%|█████▉    | 38/64 [00:22<00:13,  1.98it/s] 61%|██████    | 39/64 [00:23<00:13,  1.80it/s] 62%|██████▎   | 40/64 [00:24<00:17,  1.40it/s]INFO 10-22 10:42:23 metrics.py:351] Avg prompt throughput: 15650.5 tokens/s, Avg generation throughput: 195.7 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 17 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:42:23 metrics.py:367] Prefix cache hit rate: GPU: 82.88%, CPU: 0.00%
 64%|██████▍   | 41/64 [00:24<00:14,  1.62it/s] 66%|██████▌   | 42/64 [00:25<00:12,  1.79it/s] 67%|██████▋   | 43/64 [00:25<00:10,  1.95it/s] 69%|██████▉   | 44/64 [00:25<00:09,  2.10it/s] 70%|███████   | 45/64 [00:26<00:08,  2.19it/s] 72%|███████▏  | 46/64 [00:26<00:07,  2.26it/s] 73%|███████▎  | 47/64 [00:27<00:07,  2.35it/s] 75%|███████▌  | 48/64 [00:27<00:06,  2.38it/s] 77%|███████▋  | 49/64 [00:28<00:06,  2.43it/s] 78%|███████▊  | 50/64 [00:28<00:05,  2.43it/s] 80%|███████▉  | 51/64 [00:28<00:05,  2.43it/s] 81%|████████▏ | 52/64 [00:29<00:04,  2.46it/s]INFO 10-22 10:42:28 metrics.py:351] Avg prompt throughput: 25339.7 tokens/s, Avg generation throughput: 316.5 tokens/s, Running: 8 reqs, Swapped: 0 reqs, Pending: 4 reqs, GPU KV cache usage: 6.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:42:28 metrics.py:367] Prefix cache hit rate: GPU: 83.10%, CPU: 0.00%
 83%|████████▎ | 53/64 [00:29<00:04,  2.46it/s] 84%|████████▍ | 54/64 [00:30<00:04,  2.45it/s] 86%|████████▌ | 55/64 [00:30<00:03,  2.48it/s] 88%|████████▊ | 56/64 [00:30<00:03,  2.47it/s] 89%|████████▉ | 57/64 [00:31<00:02,  2.46it/s] 91%|█████████ | 58/64 [00:31<00:02,  2.52it/s] 92%|█████████▏| 59/64 [00:31<00:01,  2.60it/s] 94%|█████████▍| 60/64 [00:32<00:01,  2.67it/s] 95%|█████████▌| 61/64 [00:32<00:01,  2.78it/s] 97%|█████████▋| 62/64 [00:32<00:00,  2.86it/s] 98%|█████████▊| 63/64 [00:33<00:00,  2.97it/s]100%|██████████| 64/64 [00:33<00:00,  3.02it/s]100%|██████████| 64/64 [00:33<00:00,  1.90it/s]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  33.61     
Total input tokens:                      655360    
Total generated tokens:                  8192      
Request throughput (req/s):              1.90      
Output token throughput (tok/s):         243.77    
Total Token throughput (tok/s):          19745.14  
---------------Time to First Token----------------
Mean TTFT (ms):                          7618.06   
Median TTFT (ms):                        6904.76   
P99 TTFT (ms):                           15840.98  
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          23.63     
Median TPOT (ms):                        24.60     
P99 TPOT (ms):                           32.36     
---------------Inter-token Latency----------------
Mean ITL (ms):                           23.62     
Median ITL (ms):                         18.38     
P99 ITL (ms):                            78.66     
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_10240.json             --request-rate 4             --ignore-eos             --ib-input-len 10240             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_10240.json             --request-rate 4             --ignore-eos             --ib-input-len 10240             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_10240.json             --request-rate 4             --ignore-eos             --ib-input-len 10240             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_4_in_40960
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_40960.json             --request-rate 4             --ignore-eos             --ib-input-len 40960             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 4'
Running test case vllm_qwen7B_ib_prefix with qps 4
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_40960.json             --request-rate 4             --ignore-eos             --ib-input-len 40960             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_40960.json             --request-rate 4             --ignore-eos             --ib-input-len 40960             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_40960.json             --request-rate 4             --ignore-eos             --ib-input-len 40960             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_4_in_40960.json --request-rate 4 --ignore-eos --ib-input-len 40960
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 10:42:43 metrics.py:351] Avg prompt throughput: 3448.4 tokens/s, Avg generation throughput: 73.9 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:42:43 metrics.py:367] Prefix cache hit rate: GPU: 83.16%, CPU: 0.00%
INFO 10-22 10:42:53 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:42:53 metrics.py:367] Prefix cache hit rate: GPU: 83.16%, CPU: 0.00%
INFO 10-22 10:43:03 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:43:03 metrics.py:367] Prefix cache hit rate: GPU: 83.16%, CPU: 0.00%
INFO 10-22 10:43:13 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:43:13 metrics.py:367] Prefix cache hit rate: GPU: 83.16%, CPU: 0.00%
INFO:     127.0.0.1:47652 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:43:19 metrics.py:351] Avg prompt throughput: 88.4 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:43:19 metrics.py:367] Prefix cache hit rate: GPU: 82.92%, CPU: 0.00%
INFO 10-22 10:43:24 metrics.py:351] Avg prompt throughput: 7652.8 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:43:24 metrics.py:367] Prefix cache hit rate: GPU: 82.93%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=4.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_4_in_40960.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=40960, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 4.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:47664 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59578 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59582 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59586 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59602 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59606 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59622 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59626 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59640 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:43:29 metrics.py:351] Avg prompt throughput: 13126.8 tokens/s, Avg generation throughput: 34.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:43:29 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
INFO:     127.0.0.1:59648 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59662 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59678 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59688 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59698 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:04<04:27,  4.25s/it]INFO:     127.0.0.1:59712 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59718 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59722 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59726 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59742 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59748 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59754 - "POST /v1/completions HTTP/1.1" 200 OK
  3%|▎         | 2/64 [00:06<02:56,  2.84s/it]INFO:     127.0.0.1:59768 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59774 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59790 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:43:34 metrics.py:351] Avg prompt throughput: 21982.4 tokens/s, Avg generation throughput: 66.5 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 19 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:43:34 metrics.py:367] Prefix cache hit rate: GPU: 83.27%, CPU: 0.00%
INFO:     127.0.0.1:59800 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59804 - "POST /v1/completions HTTP/1.1" 200 OK
  5%|▍         | 3/64 [00:07<02:25,  2.39s/it]INFO:     127.0.0.1:59810 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59824 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59826 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59836 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59852 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59854 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59866 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59868 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59880 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59884 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50302 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50318 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50326 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50342 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50346 - "POST /v1/completions HTTP/1.1" 200 OK
  6%|▋         | 4/64 [00:11<02:55,  2.93s/it]INFO:     127.0.0.1:50358 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50372 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50378 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50390 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:43:39 metrics.py:351] Avg prompt throughput: 11409.5 tokens/s, Avg generation throughput: 36.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:43:39 metrics.py:367] Prefix cache hit rate: GPU: 83.04%, CPU: 0.00%
INFO:     127.0.0.1:50404 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50414 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50418 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50428 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50430 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50434 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50446 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50458 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50470 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50478 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50480 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50492 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50494 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50508 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50510 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50512 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50514 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50518 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50530 - "POST /v1/completions HTTP/1.1" 200 OK
  8%|▊         | 5/64 [00:16<03:41,  3.75s/it]INFO 10-22 10:43:44 metrics.py:351] Avg prompt throughput: 10287.2 tokens/s, Avg generation throughput: 29.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 57 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:43:44 metrics.py:367] Prefix cache hit rate: GPU: 83.11%, CPU: 0.00%
  9%|▉         | 6/64 [00:18<02:59,  3.09s/it] 11%|█         | 7/64 [00:20<02:33,  2.69s/it] 12%|█▎        | 8/64 [00:22<02:15,  2.42s/it]INFO 10-22 10:43:49 metrics.py:351] Avg prompt throughput: 21977.1 tokens/s, Avg generation throughput: 71.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 54 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:43:49 metrics.py:367] Prefix cache hit rate: GPU: 83.31%, CPU: 0.00%
 14%|█▍        | 9/64 [00:24<02:02,  2.23s/it]INFO 10-22 10:43:54 metrics.py:351] Avg prompt throughput: 15007.4 tokens/s, Avg generation throughput: 46.8 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:43:54 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
 16%|█▌        | 10/64 [00:28<02:31,  2.81s/it]INFO 10-22 10:43:59 metrics.py:351] Avg prompt throughput: 4136.3 tokens/s, Avg generation throughput: 9.7 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 51 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:43:59 metrics.py:367] Prefix cache hit rate: GPU: 83.22%, CPU: 0.00%
 17%|█▋        | 11/64 [00:33<03:12,  3.64s/it] 19%|█▉        | 12/64 [00:35<02:40,  3.09s/it] 20%|██        | 13/64 [00:37<02:18,  2.71s/it]INFO 10-22 10:44:04 metrics.py:351] Avg prompt throughput: 22401.5 tokens/s, Avg generation throughput: 72.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 49 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:44:04 metrics.py:367] Prefix cache hit rate: GPU: 83.35%, CPU: 0.00%
 22%|██▏       | 14/64 [00:39<02:02,  2.45s/it] 23%|██▎       | 15/64 [00:41<01:51,  2.27s/it]INFO 10-22 10:44:09 metrics.py:351] Avg prompt throughput: 21865.2 tokens/s, Avg generation throughput: 69.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 46 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:44:09 metrics.py:367] Prefix cache hit rate: GPU: 83.54%, CPU: 0.00%
 25%|██▌       | 16/64 [00:43<01:42,  2.15s/it] 27%|██▋       | 17/64 [00:47<02:08,  2.73s/it]INFO 10-22 10:44:14 metrics.py:351] Avg prompt throughput: 9910.6 tokens/s, Avg generation throughput: 31.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:44:14 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
INFO 10-22 10:44:19 metrics.py:351] Avg prompt throughput: 6821.4 tokens/s, Avg generation throughput: 21.5 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 44 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:44:19 metrics.py:367] Prefix cache hit rate: GPU: 83.38%, CPU: 0.00%
 28%|██▊       | 18/64 [00:53<02:49,  3.68s/it] 30%|██▉       | 19/64 [00:54<02:21,  3.14s/it] 31%|███▏      | 20/64 [00:56<02:01,  2.76s/it]INFO 10-22 10:44:24 metrics.py:351] Avg prompt throughput: 21582.2 tokens/s, Avg generation throughput: 64.7 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 41 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:44:24 metrics.py:367] Prefix cache hit rate: GPU: 83.57%, CPU: 0.00%
 33%|███▎      | 21/64 [00:58<01:47,  2.49s/it] 34%|███▍      | 22/64 [01:00<01:36,  2.31s/it]INFO 10-22 10:44:29 metrics.py:351] Avg prompt throughput: 17824.5 tokens/s, Avg generation throughput: 57.2 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:44:29 metrics.py:367] Prefix cache hit rate: GPU: 83.42%, CPU: 0.00%
 36%|███▌      | 23/64 [01:05<02:03,  3.02s/it]INFO 10-22 10:44:34 metrics.py:351] Avg prompt throughput: 4095.0 tokens/s, Avg generation throughput: 12.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:44:34 metrics.py:367] Prefix cache hit rate: GPU: 83.42%, CPU: 0.00%
 38%|███▊      | 24/64 [01:11<02:40,  4.02s/it]INFO 10-22 10:44:39 metrics.py:351] Avg prompt throughput: 12453.0 tokens/s, Avg generation throughput: 39.9 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 37 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:44:39 metrics.py:367] Prefix cache hit rate: GPU: 83.54%, CPU: 0.00%
 39%|███▉      | 25/64 [01:13<02:11,  3.37s/it] 41%|████      | 26/64 [01:15<01:51,  2.92s/it] 42%|████▏     | 27/64 [01:17<01:36,  2.61s/it]INFO 10-22 10:44:44 metrics.py:351] Avg prompt throughput: 21666.4 tokens/s, Avg generation throughput: 65.1 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 34 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:44:44 metrics.py:367] Prefix cache hit rate: GPU: 83.72%, CPU: 0.00%
 44%|████▍     | 28/64 [01:19<01:25,  2.39s/it]INFO 10-22 10:44:50 metrics.py:351] Avg prompt throughput: 12294.8 tokens/s, Avg generation throughput: 42.4 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:44:50 metrics.py:367] Prefix cache hit rate: GPU: 83.51%, CPU: 0.00%
 45%|████▌     | 29/64 [01:23<01:44,  3.00s/it]INFO 10-22 10:44:55 metrics.py:351] Avg prompt throughput: 3454.0 tokens/s, Avg generation throughput: 7.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:44:55 metrics.py:367] Prefix cache hit rate: GPU: 83.51%, CPU: 0.00%
 47%|████▋     | 30/64 [01:30<02:17,  4.04s/it] 48%|████▊     | 31/64 [01:31<01:52,  3.40s/it]INFO 10-22 10:45:00 metrics.py:351] Avg prompt throughput: 18936.1 tokens/s, Avg generation throughput: 61.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 30 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:45:00 metrics.py:367] Prefix cache hit rate: GPU: 83.69%, CPU: 0.00%
 50%|█████     | 32/64 [01:33<01:34,  2.94s/it] 52%|█████▏    | 33/64 [01:35<01:21,  2.62s/it]INFO 10-22 10:45:05 metrics.py:351] Avg prompt throughput: 17222.5 tokens/s, Avg generation throughput: 54.6 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:45:05 metrics.py:367] Prefix cache hit rate: GPU: 83.54%, CPU: 0.00%
 53%|█████▎    | 34/64 [01:40<01:34,  3.15s/it]INFO 10-22 10:45:10 metrics.py:351] Avg prompt throughput: 3647.2 tokens/s, Avg generation throughput: 9.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:45:10 metrics.py:367] Prefix cache hit rate: GPU: 83.54%, CPU: 0.00%
 55%|█████▍    | 35/64 [01:46<02:00,  4.15s/it] 56%|█████▋    | 36/64 [01:48<01:37,  3.47s/it]INFO 10-22 10:45:15 metrics.py:351] Avg prompt throughput: 13963.5 tokens/s, Avg generation throughput: 46.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 26 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:45:15 metrics.py:367] Prefix cache hit rate: GPU: 83.66%, CPU: 0.00%
 58%|█████▊    | 37/64 [01:50<01:20,  3.00s/it] 59%|█████▉    | 38/64 [01:52<01:09,  2.67s/it]INFO 10-22 10:45:20 metrics.py:351] Avg prompt throughput: 20343.0 tokens/s, Avg generation throughput: 59.9 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:45:20 metrics.py:367] Prefix cache hit rate: GPU: 83.49%, CPU: 0.00%
 61%|██████    | 39/64 [01:57<01:29,  3.56s/it]INFO 10-22 10:45:25 metrics.py:351] Avg prompt throughput: 4589.6 tokens/s, Avg generation throughput: 17.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:45:25 metrics.py:367] Prefix cache hit rate: GPU: 83.49%, CPU: 0.00%
INFO 10-22 10:45:30 metrics.py:351] Avg prompt throughput: 3468.3 tokens/s, Avg generation throughput: 7.8 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 22 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:45:30 metrics.py:367] Prefix cache hit rate: GPU: 83.55%, CPU: 0.00%
 62%|██████▎   | 40/64 [02:04<01:47,  4.47s/it] 64%|██████▍   | 41/64 [02:06<01:25,  3.70s/it] 66%|██████▌   | 42/64 [02:08<01:09,  3.15s/it]INFO 10-22 10:45:35 metrics.py:351] Avg prompt throughput: 21957.5 tokens/s, Avg generation throughput: 70.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 20 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:45:35 metrics.py:367] Prefix cache hit rate: GPU: 83.66%, CPU: 0.00%
 67%|██████▋   | 43/64 [02:10<00:58,  2.78s/it]INFO 10-22 10:45:40 metrics.py:351] Avg prompt throughput: 13121.6 tokens/s, Avg generation throughput: 41.5 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:45:40 metrics.py:367] Prefix cache hit rate: GPU: 83.43%, CPU: 0.00%
 69%|██████▉   | 44/64 [02:15<01:11,  3.58s/it]INFO 10-22 10:45:45 metrics.py:351] Avg prompt throughput: 3669.1 tokens/s, Avg generation throughput: 10.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:45:45 metrics.py:367] Prefix cache hit rate: GPU: 83.43%, CPU: 0.00%
 70%|███████   | 45/64 [02:22<01:26,  4.57s/it]INFO 10-22 10:45:50 metrics.py:351] Avg prompt throughput: 10701.8 tokens/s, Avg generation throughput: 32.6 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 16 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:45:50 metrics.py:367] Prefix cache hit rate: GPU: 83.55%, CPU: 0.00%
 72%|███████▏  | 46/64 [02:24<01:07,  3.77s/it] 73%|███████▎  | 47/64 [02:26<00:54,  3.20s/it] 75%|███████▌  | 48/64 [02:28<00:44,  2.81s/it]INFO 10-22 10:45:55 metrics.py:351] Avg prompt throughput: 22382.4 tokens/s, Avg generation throughput: 70.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 14 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:45:55 metrics.py:367] Prefix cache hit rate: GPU: 83.66%, CPU: 0.00%
 77%|███████▋  | 49/64 [02:30<00:37,  2.53s/it]INFO 10-22 10:46:00 metrics.py:351] Avg prompt throughput: 12018.8 tokens/s, Avg generation throughput: 38.5 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:46:00 metrics.py:367] Prefix cache hit rate: GPU: 83.44%, CPU: 0.00%
 78%|███████▊  | 50/64 [02:36<00:50,  3.60s/it]INFO 10-22 10:46:05 metrics.py:351] Avg prompt throughput: 3622.0 tokens/s, Avg generation throughput: 10.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:46:05 metrics.py:367] Prefix cache hit rate: GPU: 83.44%, CPU: 0.00%
 80%|███████▉  | 51/64 [02:42<00:59,  4.57s/it]INFO 10-22 10:46:10 metrics.py:351] Avg prompt throughput: 9750.1 tokens/s, Avg generation throughput: 28.6 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 10 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:46:10 metrics.py:367] Prefix cache hit rate: GPU: 83.55%, CPU: 0.00%
 81%|████████▏ | 52/64 [02:44<00:45,  3.77s/it] 83%|████████▎ | 53/64 [02:46<00:35,  3.21s/it] 84%|████████▍ | 54/64 [02:48<00:28,  2.81s/it]INFO 10-22 10:46:15 metrics.py:351] Avg prompt throughput: 22013.7 tokens/s, Avg generation throughput: 71.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 8 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:46:15 metrics.py:367] Prefix cache hit rate: GPU: 83.66%, CPU: 0.00%
INFO 10-22 10:46:20 metrics.py:351] Avg prompt throughput: 6428.3 tokens/s, Avg generation throughput: 21.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:46:20 metrics.py:367] Prefix cache hit rate: GPU: 83.38%, CPU: 0.00%
 86%|████████▌ | 55/64 [02:54<00:34,  3.80s/it]INFO 10-22 10:46:25 metrics.py:351] Avg prompt throughput: 3373.5 tokens/s, Avg generation throughput: 7.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:46:25 metrics.py:367] Prefix cache hit rate: GPU: 83.38%, CPU: 0.00%
 88%|████████▊ | 56/64 [03:01<00:37,  4.68s/it] 89%|████████▉ | 57/64 [03:03<00:26,  3.85s/it]INFO 10-22 10:46:31 metrics.py:351] Avg prompt throughput: 16466.1 tokens/s, Avg generation throughput: 50.6 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 4 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:46:31 metrics.py:367] Prefix cache hit rate: GPU: 83.55%, CPU: 0.00%
 91%|█████████ | 58/64 [03:05<00:19,  3.26s/it] 92%|█████████▏| 59/64 [03:07<00:14,  2.85s/it]INFO 10-22 10:46:36 metrics.py:351] Avg prompt throughput: 17747.3 tokens/s, Avg generation throughput: 56.8 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:46:36 metrics.py:367] Prefix cache hit rate: GPU: 83.33%, CPU: 0.00%
 94%|█████████▍| 60/64 [03:13<00:15,  3.82s/it]INFO 10-22 10:46:41 metrics.py:351] Avg prompt throughput: 4011.4 tokens/s, Avg generation throughput: 14.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:46:41 metrics.py:367] Prefix cache hit rate: GPU: 83.33%, CPU: 0.00%
INFO 10-22 10:46:46 metrics.py:351] Avg prompt throughput: 4155.2 tokens/s, Avg generation throughput: 11.2 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 1 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:46:46 metrics.py:367] Prefix cache hit rate: GPU: 83.39%, CPU: 0.00%
 95%|█████████▌| 61/64 [03:20<00:14,  4.73s/it] 97%|█████████▋| 62/64 [03:21<00:07,  3.88s/it] 98%|█████████▊| 63/64 [03:23<00:03,  3.20s/it]INFO 10-22 10:46:51 metrics.py:351] Avg prompt throughput: 14983.7 tokens/s, Avg generation throughput: 72.3 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:46:51 metrics.py:367] Prefix cache hit rate: GPU: 83.44%, CPU: 0.00%
100%|██████████| 64/64 [03:25<00:00,  2.69s/it]100%|██████████| 64/64 [03:25<00:00,  3.20s/it]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  205.10    
Total input tokens:                      2621440   
Total generated tokens:                  8191      
Request throughput (req/s):              0.31      
Output token throughput (tok/s):         39.94     
Total Token throughput (tok/s):          12821.39  
---------------Time to First Token----------------
Mean TTFT (ms):                          86527.52  
Median TTFT (ms):                        82560.14  
P99 TTFT (ms):                           186274.82 
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          35.83     
Median TPOT (ms):                        22.20     
P99 TPOT (ms):                           91.13     
---------------Inter-token Latency----------------
Mean ITL (ms):                           35.82     
Median ITL (ms):                         20.50     
P99 ITL (ms):                            170.82    
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_40960.json             --request-rate 4             --ignore-eos             --ib-input-len 40960             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_40960.json             --request-rate 4             --ignore-eos             --ib-input-len 40960             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_40960.json             --request-rate 4             --ignore-eos             --ib-input-len 40960             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_4_in_81920
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_81920.json             --request-rate 4             --ignore-eos             --ib-input-len 81920             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 4'
Running test case vllm_qwen7B_ib_prefix with qps 4
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_81920.json             --request-rate 4             --ignore-eos             --ib-input-len 81920             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_81920.json             --request-rate 4             --ignore-eos             --ib-input-len 81920             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_81920.json             --request-rate 4             --ignore-eos             --ib-input-len 81920             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_4_in_81920.json --request-rate 4 --ignore-eos --ib-input-len 81920
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 10:47:03 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 3.1 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:47:03 metrics.py:367] Prefix cache hit rate: GPU: 83.44%, CPU: 0.00%
INFO 10-22 10:47:13 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:47:13 metrics.py:367] Prefix cache hit rate: GPU: 83.44%, CPU: 0.00%
INFO 10-22 10:47:23 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:47:23 metrics.py:367] Prefix cache hit rate: GPU: 83.44%, CPU: 0.00%
INFO 10-22 10:47:33 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:47:33 metrics.py:367] Prefix cache hit rate: GPU: 83.44%, CPU: 0.00%
INFO 10-22 10:47:43 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:47:43 metrics.py:367] Prefix cache hit rate: GPU: 83.44%, CPU: 0.00%
INFO:     127.0.0.1:35556 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:47:48 metrics.py:351] Avg prompt throughput: 4073.9 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:47:48 metrics.py:367] Prefix cache hit rate: GPU: 82.91%, CPU: 0.00%
INFO 10-22 10:47:53 metrics.py:351] Avg prompt throughput: 5029.7 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:47:53 metrics.py:367] Prefix cache hit rate: GPU: 82.91%, CPU: 0.00%
INFO 10-22 10:47:58 metrics.py:351] Avg prompt throughput: 3570.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:47:58 metrics.py:367] Prefix cache hit rate: GPU: 82.91%, CPU: 0.00%
INFO 10-22 10:48:03 metrics.py:351] Avg prompt throughput: 2852.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:48:03 metrics.py:367] Prefix cache hit rate: GPU: 82.91%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=4.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_4_in_81920.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=81920, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 4.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:40160 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40166 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40168 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40174 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40188 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:48:08 metrics.py:351] Avg prompt throughput: 3372.4 tokens/s, Avg generation throughput: 25.5 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 4 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:48:08 metrics.py:367] Prefix cache hit rate: GPU: 83.02%, CPU: 0.00%
INFO:     127.0.0.1:40194 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40196 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40208 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40212 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40218 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40228 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40238 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40246 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40250 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40252 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40256 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40272 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40282 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40292 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40308 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40316 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:48:13 metrics.py:351] Avg prompt throughput: 23463.1 tokens/s, Avg generation throughput: 19.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 19 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:48:13 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
INFO:     127.0.0.1:40326 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:06<07:16,  6.93s/it]INFO:     127.0.0.1:40332 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40346 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40358 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40368 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40382 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40388 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40396 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40402 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40418 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:40424 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50886 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50890 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50906 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50908 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50924 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50938 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50954 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:48:18 metrics.py:351] Avg prompt throughput: 18938.4 tokens/s, Avg generation throughput: 30.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 36 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:48:18 metrics.py:367] Prefix cache hit rate: GPU: 83.24%, CPU: 0.00%
  3%|▎         | 2/64 [00:11<05:34,  5.40s/it]INFO:     127.0.0.1:50968 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50982 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:50996 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51000 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51010 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51026 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51036 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51040 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51048 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51062 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51068 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51078 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51080 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51084 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51094 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51126 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51100 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51116 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51134 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51146 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51154 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51160 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51172 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51174 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:51182 - "POST /v1/completions HTTP/1.1" 200 OK
  5%|▍         | 3/64 [00:16<05:12,  5.12s/it]INFO 10-22 10:48:23 metrics.py:351] Avg prompt throughput: 19021.1 tokens/s, Avg generation throughput: 26.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 60 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:48:23 metrics.py:367] Prefix cache hit rate: GPU: 83.34%, CPU: 0.00%
  6%|▋         | 4/64 [00:20<04:41,  4.69s/it]INFO 10-22 10:48:29 metrics.py:351] Avg prompt throughput: 14480.4 tokens/s, Avg generation throughput: 21.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:48:29 metrics.py:367] Prefix cache hit rate: GPU: 82.94%, CPU: 0.00%
INFO 10-22 10:48:34 metrics.py:351] Avg prompt throughput: 5739.5 tokens/s, Avg generation throughput: 11.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:48:34 metrics.py:367] Prefix cache hit rate: GPU: 82.94%, CPU: 0.00%
INFO 10-22 10:48:39 metrics.py:351] Avg prompt throughput: 3504.1 tokens/s, Avg generation throughput: 7.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:48:39 metrics.py:367] Prefix cache hit rate: GPU: 82.94%, CPU: 0.00%
INFO 10-22 10:48:44 metrics.py:351] Avg prompt throughput: 2759.1 tokens/s, Avg generation throughput: 5.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:48:44 metrics.py:367] Prefix cache hit rate: GPU: 82.94%, CPU: 0.00%
  8%|▊         | 5/64 [00:38<09:31,  9.69s/it]INFO 10-22 10:48:49 metrics.py:351] Avg prompt throughput: 2514.2 tokens/s, Avg generation throughput: 1.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:48:49 metrics.py:367] Prefix cache hit rate: GPU: 82.94%, CPU: 0.00%
INFO 10-22 10:48:55 metrics.py:351] Avg prompt throughput: 3920.1 tokens/s, Avg generation throughput: 4.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 57 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:48:55 metrics.py:367] Prefix cache hit rate: GPU: 83.04%, CPU: 0.00%
  9%|▉         | 6/64 [00:50<09:55, 10.26s/it]INFO 10-22 10:49:00 metrics.py:351] Avg prompt throughput: 19374.8 tokens/s, Avg generation throughput: 31.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 56 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:49:00 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
 11%|█         | 7/64 [00:54<07:54,  8.33s/it]INFO 10-22 10:49:05 metrics.py:351] Avg prompt throughput: 18914.4 tokens/s, Avg generation throughput: 30.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 55 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:49:05 metrics.py:367] Prefix cache hit rate: GPU: 83.25%, CPU: 0.00%
 12%|█▎        | 8/64 [00:58<06:36,  7.07s/it]INFO 10-22 10:49:10 metrics.py:351] Avg prompt throughput: 18963.0 tokens/s, Avg generation throughput: 30.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 54 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:49:10 metrics.py:367] Prefix cache hit rate: GPU: 83.36%, CPU: 0.00%
 14%|█▍        | 9/64 [01:03<05:42,  6.23s/it] 16%|█▌        | 10/64 [01:07<05:06,  5.67s/it]INFO 10-22 10:49:15 metrics.py:351] Avg prompt throughput: 18740.9 tokens/s, Avg generation throughput: 30.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 53 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:49:15 metrics.py:367] Prefix cache hit rate: GPU: 83.46%, CPU: 0.00%
INFO 10-22 10:49:20 metrics.py:351] Avg prompt throughput: 6894.9 tokens/s, Avg generation throughput: 7.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:49:20 metrics.py:367] Prefix cache hit rate: GPU: 82.96%, CPU: 0.00%
INFO 10-22 10:49:25 metrics.py:351] Avg prompt throughput: 3541.4 tokens/s, Avg generation throughput: 7.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:49:25 metrics.py:367] Prefix cache hit rate: GPU: 82.97%, CPU: 0.00%
INFO 10-22 10:49:30 metrics.py:351] Avg prompt throughput: 2895.0 tokens/s, Avg generation throughput: 5.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:49:30 metrics.py:367] Prefix cache hit rate: GPU: 82.97%, CPU: 0.00%
INFO 10-22 10:49:35 metrics.py:351] Avg prompt throughput: 2474.6 tokens/s, Avg generation throughput: 5.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:49:35 metrics.py:367] Prefix cache hit rate: GPU: 82.97%, CPU: 0.00%
 17%|█▋        | 11/64 [01:28<09:05, 10.29s/it]INFO 10-22 10:49:40 metrics.py:351] Avg prompt throughput: 2305.4 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:49:40 metrics.py:367] Prefix cache hit rate: GPU: 82.97%, CPU: 0.00%
INFO 10-22 10:49:45 metrics.py:351] Avg prompt throughput: 4690.7 tokens/s, Avg generation throughput: 6.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 51 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:49:45 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
 19%|█▉        | 12/64 [01:40<09:21, 10.80s/it]INFO 10-22 10:49:50 metrics.py:351] Avg prompt throughput: 19129.9 tokens/s, Avg generation throughput: 31.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 50 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:49:50 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
 20%|██        | 13/64 [01:44<07:31,  8.85s/it]INFO 10-22 10:49:55 metrics.py:351] Avg prompt throughput: 18950.6 tokens/s, Avg generation throughput: 30.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 49 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:49:55 metrics.py:367] Prefix cache hit rate: GPU: 83.27%, CPU: 0.00%
 22%|██▏       | 14/64 [01:49<06:15,  7.50s/it]INFO 10-22 10:50:00 metrics.py:351] Avg prompt throughput: 18763.6 tokens/s, Avg generation throughput: 30.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 48 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:50:00 metrics.py:367] Prefix cache hit rate: GPU: 83.37%, CPU: 0.00%
 23%|██▎       | 15/64 [01:53<05:22,  6.57s/it] 25%|██▌       | 16/64 [01:57<04:44,  5.93s/it]INFO 10-22 10:50:05 metrics.py:351] Avg prompt throughput: 18885.8 tokens/s, Avg generation throughput: 29.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 47 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:50:05 metrics.py:367] Prefix cache hit rate: GPU: 83.47%, CPU: 0.00%
 27%|██▋       | 17/64 [02:02<04:17,  5.49s/it]INFO 10-22 10:50:12 metrics.py:351] Avg prompt throughput: 14687.2 tokens/s, Avg generation throughput: 19.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:50:12 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
INFO 10-22 10:50:17 metrics.py:351] Avg prompt throughput: 4936.3 tokens/s, Avg generation throughput: 10.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:50:17 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
INFO 10-22 10:50:22 metrics.py:351] Avg prompt throughput: 3199.1 tokens/s, Avg generation throughput: 6.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:50:22 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
INFO 10-22 10:50:27 metrics.py:351] Avg prompt throughput: 2705.7 tokens/s, Avg generation throughput: 5.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:50:27 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
 28%|██▊       | 18/64 [02:23<07:45, 10.12s/it]INFO 10-22 10:50:32 metrics.py:351] Avg prompt throughput: 2410.8 tokens/s, Avg generation throughput: 2.9 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:50:32 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
INFO 10-22 10:50:37 metrics.py:351] Avg prompt throughput: 2219.6 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:50:37 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
 30%|██▉       | 19/64 [02:35<07:59, 10.65s/it]INFO 10-22 10:50:42 metrics.py:351] Avg prompt throughput: 13902.5 tokens/s, Avg generation throughput: 25.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 44 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:50:42 metrics.py:367] Prefix cache hit rate: GPU: 83.19%, CPU: 0.00%
 31%|███▏      | 20/64 [02:39<06:25,  8.76s/it]INFO 10-22 10:50:48 metrics.py:351] Avg prompt throughput: 17167.0 tokens/s, Avg generation throughput: 22.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 42 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:50:48 metrics.py:367] Prefix cache hit rate: GPU: 83.38%, CPU: 0.00%
 33%|███▎      | 21/64 [02:43<05:20,  7.46s/it]INFO 10-22 10:50:53 metrics.py:351] Avg prompt throughput: 19125.0 tokens/s, Avg generation throughput: 31.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 41 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:50:53 metrics.py:367] Prefix cache hit rate: GPU: 83.47%, CPU: 0.00%
 34%|███▍      | 22/64 [02:48<04:34,  6.53s/it]INFO 10-22 10:50:58 metrics.py:351] Avg prompt throughput: 19120.7 tokens/s, Avg generation throughput: 31.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 40 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:50:58 metrics.py:367] Prefix cache hit rate: GPU: 83.57%, CPU: 0.00%
 36%|███▌      | 23/64 [02:52<04:01,  5.89s/it]INFO 10-22 10:51:03 metrics.py:351] Avg prompt throughput: 11121.1 tokens/s, Avg generation throughput: 15.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:51:03 metrics.py:367] Prefix cache hit rate: GPU: 83.11%, CPU: 0.00%
INFO 10-22 10:51:08 metrics.py:351] Avg prompt throughput: 5139.9 tokens/s, Avg generation throughput: 10.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:51:08 metrics.py:367] Prefix cache hit rate: GPU: 83.11%, CPU: 0.00%
INFO 10-22 10:51:13 metrics.py:351] Avg prompt throughput: 3229.3 tokens/s, Avg generation throughput: 6.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:51:13 metrics.py:367] Prefix cache hit rate: GPU: 83.11%, CPU: 0.00%
INFO 10-22 10:51:18 metrics.py:351] Avg prompt throughput: 2642.1 tokens/s, Avg generation throughput: 5.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:51:18 metrics.py:367] Prefix cache hit rate: GPU: 83.11%, CPU: 0.00%
 38%|███▊      | 24/64 [03:13<06:57, 10.45s/it]INFO 10-22 10:51:23 metrics.py:351] Avg prompt throughput: 2394.9 tokens/s, Avg generation throughput: 2.4 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:51:23 metrics.py:367] Prefix cache hit rate: GPU: 83.11%, CPU: 0.00%
INFO 10-22 10:51:28 metrics.py:351] Avg prompt throughput: 2192.7 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:51:28 metrics.py:367] Prefix cache hit rate: GPU: 83.11%, CPU: 0.00%
 39%|███▉      | 25/64 [03:25<07:05, 10.90s/it]INFO 10-22 10:51:33 metrics.py:351] Avg prompt throughput: 16235.0 tokens/s, Avg generation throughput: 25.5 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 38 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:51:33 metrics.py:367] Prefix cache hit rate: GPU: 83.21%, CPU: 0.00%
 41%|████      | 26/64 [03:30<05:40,  8.95s/it]INFO 10-22 10:51:38 metrics.py:351] Avg prompt throughput: 16012.6 tokens/s, Avg generation throughput: 24.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 36 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:51:38 metrics.py:367] Prefix cache hit rate: GPU: 83.39%, CPU: 0.00%
 42%|████▏     | 27/64 [03:34<04:40,  7.58s/it]INFO 10-22 10:51:43 metrics.py:351] Avg prompt throughput: 18843.2 tokens/s, Avg generation throughput: 30.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 35 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:51:43 metrics.py:367] Prefix cache hit rate: GPU: 83.48%, CPU: 0.00%
 44%|████▍     | 28/64 [03:38<03:59,  6.66s/it]INFO 10-22 10:51:49 metrics.py:351] Avg prompt throughput: 18394.9 tokens/s, Avg generation throughput: 29.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 34 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:51:49 metrics.py:367] Prefix cache hit rate: GPU: 83.57%, CPU: 0.00%
 45%|████▌     | 29/64 [03:43<03:31,  6.03s/it]INFO 10-22 10:51:54 metrics.py:351] Avg prompt throughput: 11000.2 tokens/s, Avg generation throughput: 15.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:51:54 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
INFO 10-22 10:51:59 metrics.py:351] Avg prompt throughput: 4909.3 tokens/s, Avg generation throughput: 9.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:51:59 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
INFO 10-22 10:52:04 metrics.py:351] Avg prompt throughput: 3316.0 tokens/s, Avg generation throughput: 6.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:52:04 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
INFO 10-22 10:52:09 metrics.py:351] Avg prompt throughput: 2678.4 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:52:09 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
 47%|████▋     | 30/64 [04:05<06:08, 10.84s/it]INFO 10-22 10:52:14 metrics.py:351] Avg prompt throughput: 2328.2 tokens/s, Avg generation throughput: 2.9 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:52:14 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
INFO 10-22 10:52:20 metrics.py:351] Avg prompt throughput: 2151.8 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:52:20 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
INFO 10-22 10:52:25 metrics.py:351] Avg prompt throughput: 12100.3 tokens/s, Avg generation throughput: 23.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 32 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:52:25 metrics.py:367] Prefix cache hit rate: GPU: 83.22%, CPU: 0.00%
 48%|████▊     | 31/64 [04:17<06:12, 11.28s/it] 50%|█████     | 32/64 [04:22<04:55,  9.23s/it]INFO 10-22 10:52:30 metrics.py:351] Avg prompt throughput: 19104.2 tokens/s, Avg generation throughput: 27.8 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 31 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:52:30 metrics.py:367] Prefix cache hit rate: GPU: 83.31%, CPU: 0.00%
 52%|█████▏    | 33/64 [04:26<04:01,  7.81s/it]INFO 10-22 10:52:35 metrics.py:351] Avg prompt throughput: 16287.8 tokens/s, Avg generation throughput: 22.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 29 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:52:35 metrics.py:367] Prefix cache hit rate: GPU: 83.49%, CPU: 0.00%
 53%|█████▎    | 34/64 [04:31<03:24,  6.81s/it]INFO 10-22 10:52:42 metrics.py:351] Avg prompt throughput: 12913.5 tokens/s, Avg generation throughput: 20.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:52:42 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 10:52:47 metrics.py:351] Avg prompt throughput: 5041.4 tokens/s, Avg generation throughput: 10.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:52:47 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 10:52:52 metrics.py:351] Avg prompt throughput: 3286.9 tokens/s, Avg generation throughput: 6.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:52:52 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 10:52:57 metrics.py:351] Avg prompt throughput: 2668.8 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:52:57 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
 55%|█████▍    | 35/64 [04:53<05:28, 11.31s/it]INFO 10-22 10:53:02 metrics.py:351] Avg prompt throughput: 2382.6 tokens/s, Avg generation throughput: 3.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:53:02 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 10:53:07 metrics.py:351] Avg prompt throughput: 2207.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:53:07 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 10:53:12 metrics.py:351] Avg prompt throughput: 12374.6 tokens/s, Avg generation throughput: 23.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 27 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:53:12 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
 56%|█████▋    | 36/64 [05:05<05:23, 11.54s/it] 58%|█████▊    | 37/64 [05:09<04:13,  9.40s/it]INFO 10-22 10:53:17 metrics.py:351] Avg prompt throughput: 19488.0 tokens/s, Avg generation throughput: 27.1 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 26 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:53:17 metrics.py:367] Prefix cache hit rate: GPU: 83.24%, CPU: 0.00%
 59%|█████▉    | 38/64 [05:14<03:26,  7.93s/it]INFO 10-22 10:53:23 metrics.py:351] Avg prompt throughput: 16171.0 tokens/s, Avg generation throughput: 23.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 24 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:53:23 metrics.py:367] Prefix cache hit rate: GPU: 83.41%, CPU: 0.00%
 61%|██████    | 39/64 [05:18<02:51,  6.87s/it]INFO 10-22 10:53:29 metrics.py:351] Avg prompt throughput: 13046.0 tokens/s, Avg generation throughput: 20.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:53:29 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 10:53:34 metrics.py:351] Avg prompt throughput: 5064.8 tokens/s, Avg generation throughput: 10.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:53:34 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 10:53:39 metrics.py:351] Avg prompt throughput: 3245.0 tokens/s, Avg generation throughput: 6.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:53:39 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 10:53:44 metrics.py:351] Avg prompt throughput: 2673.7 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:53:44 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
 62%|██████▎   | 40/64 [05:40<04:31, 11.33s/it]INFO 10-22 10:53:49 metrics.py:351] Avg prompt throughput: 2381.5 tokens/s, Avg generation throughput: 3.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:53:49 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 10:53:54 metrics.py:351] Avg prompt throughput: 2199.4 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:53:54 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 10:53:59 metrics.py:351] Avg prompt throughput: 12564.0 tokens/s, Avg generation throughput: 24.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 22 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:53:59 metrics.py:367] Prefix cache hit rate: GPU: 83.08%, CPU: 0.00%
 64%|██████▍   | 41/64 [05:52<04:25, 11.54s/it] 66%|██████▌   | 42/64 [05:56<03:26,  9.41s/it]INFO 10-22 10:54:04 metrics.py:351] Avg prompt throughput: 19493.1 tokens/s, Avg generation throughput: 26.7 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 21 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:54:04 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
 67%|██████▋   | 43/64 [06:01<02:46,  7.92s/it]INFO 10-22 10:54:10 metrics.py:351] Avg prompt throughput: 16061.0 tokens/s, Avg generation throughput: 23.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 19 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:54:10 metrics.py:367] Prefix cache hit rate: GPU: 83.33%, CPU: 0.00%
 69%|██████▉   | 44/64 [06:05<02:17,  6.88s/it]INFO 10-22 10:54:16 metrics.py:351] Avg prompt throughput: 13548.4 tokens/s, Avg generation throughput: 21.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:54:16 metrics.py:367] Prefix cache hit rate: GPU: 82.93%, CPU: 0.00%
INFO 10-22 10:54:21 metrics.py:351] Avg prompt throughput: 5178.8 tokens/s, Avg generation throughput: 10.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:54:21 metrics.py:367] Prefix cache hit rate: GPU: 82.93%, CPU: 0.00%
INFO 10-22 10:54:26 metrics.py:351] Avg prompt throughput: 3276.2 tokens/s, Avg generation throughput: 6.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:54:26 metrics.py:367] Prefix cache hit rate: GPU: 82.93%, CPU: 0.00%
INFO 10-22 10:54:31 metrics.py:351] Avg prompt throughput: 2677.0 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:54:31 metrics.py:367] Prefix cache hit rate: GPU: 82.93%, CPU: 0.00%
 70%|███████   | 45/64 [06:26<03:33, 11.22s/it]INFO 10-22 10:54:36 metrics.py:351] Avg prompt throughput: 2396.4 tokens/s, Avg generation throughput: 2.8 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:54:36 metrics.py:367] Prefix cache hit rate: GPU: 82.93%, CPU: 0.00%
INFO 10-22 10:54:41 metrics.py:351] Avg prompt throughput: 2206.3 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:54:41 metrics.py:367] Prefix cache hit rate: GPU: 82.93%, CPU: 0.00%
 72%|███████▏  | 46/64 [06:38<03:25, 11.44s/it]INFO 10-22 10:54:46 metrics.py:351] Avg prompt throughput: 13681.8 tokens/s, Avg generation throughput: 25.5 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 17 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:54:46 metrics.py:367] Prefix cache hit rate: GPU: 83.01%, CPU: 0.00%
 73%|███████▎  | 47/64 [06:43<02:38,  9.32s/it]INFO 10-22 10:54:52 metrics.py:351] Avg prompt throughput: 17037.3 tokens/s, Avg generation throughput: 22.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 15 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:54:52 metrics.py:367] Prefix cache hit rate: GPU: 83.18%, CPU: 0.00%
 75%|███████▌  | 48/64 [06:47<02:05,  7.86s/it]INFO 10-22 10:54:57 metrics.py:351] Avg prompt throughput: 18915.4 tokens/s, Avg generation throughput: 30.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 14 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:54:57 metrics.py:367] Prefix cache hit rate: GPU: 83.26%, CPU: 0.00%
 77%|███████▋  | 49/64 [06:52<01:42,  6.83s/it]INFO 10-22 10:55:02 metrics.py:351] Avg prompt throughput: 18794.7 tokens/s, Avg generation throughput: 30.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 13 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:55:02 metrics.py:367] Prefix cache hit rate: GPU: 83.35%, CPU: 0.00%
 78%|███████▊  | 50/64 [06:56<01:25,  6.12s/it]INFO 10-22 10:55:07 metrics.py:351] Avg prompt throughput: 10415.7 tokens/s, Avg generation throughput: 14.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:55:07 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
INFO 10-22 10:55:12 metrics.py:351] Avg prompt throughput: 5358.9 tokens/s, Avg generation throughput: 10.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:55:12 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
INFO 10-22 10:55:17 metrics.py:351] Avg prompt throughput: 3172.7 tokens/s, Avg generation throughput: 6.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:55:17 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
INFO 10-22 10:55:22 metrics.py:351] Avg prompt throughput: 2763.9 tokens/s, Avg generation throughput: 5.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:55:22 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
 80%|███████▉  | 51/64 [07:18<02:20, 10.78s/it]INFO 10-22 10:55:27 metrics.py:351] Avg prompt throughput: 2398.2 tokens/s, Avg generation throughput: 2.8 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:55:27 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
INFO 10-22 10:55:32 metrics.py:351] Avg prompt throughput: 2207.2 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:55:32 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
 81%|████████▏ | 52/64 [07:30<02:13, 11.13s/it]INFO 10-22 10:55:37 metrics.py:351] Avg prompt throughput: 13608.2 tokens/s, Avg generation throughput: 25.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 11 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:55:37 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
 83%|████████▎ | 53/64 [07:34<01:40,  9.10s/it]INFO 10-22 10:55:45 metrics.py:351] Avg prompt throughput: 12690.5 tokens/s, Avg generation throughput: 16.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 9 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:55:45 metrics.py:367] Prefix cache hit rate: GPU: 82.73%, CPU: 0.00%
INFO 10-22 10:55:50 metrics.py:351] Avg prompt throughput: 5347.1 tokens/s, Avg generation throughput: 10.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 9 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:55:50 metrics.py:367] Prefix cache hit rate: GPU: 82.73%, CPU: 0.00%
INFO 10-22 10:55:55 metrics.py:351] Avg prompt throughput: 3384.8 tokens/s, Avg generation throughput: 6.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 9 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:55:55 metrics.py:367] Prefix cache hit rate: GPU: 82.73%, CPU: 0.00%
INFO 10-22 10:56:00 metrics.py:351] Avg prompt throughput: 2735.2 tokens/s, Avg generation throughput: 5.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 9 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:56:00 metrics.py:367] Prefix cache hit rate: GPU: 82.73%, CPU: 0.00%
 84%|████████▍ | 54/64 [07:55<02:06, 12.64s/it]INFO 10-22 10:56:05 metrics.py:351] Avg prompt throughput: 2466.6 tokens/s, Avg generation throughput: 2.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 9 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:56:05 metrics.py:367] Prefix cache hit rate: GPU: 82.73%, CPU: 0.00%
INFO 10-22 10:56:11 metrics.py:351] Avg prompt throughput: 1952.7 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 8 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:56:11 metrics.py:367] Prefix cache hit rate: GPU: 82.81%, CPU: 0.00%
 86%|████████▌ | 55/64 [08:07<01:51, 12.35s/it]INFO 10-22 10:56:16 metrics.py:351] Avg prompt throughput: 19017.1 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:56:16 metrics.py:367] Prefix cache hit rate: GPU: 82.89%, CPU: 0.00%
 88%|████████▊ | 56/64 [08:11<01:19,  9.97s/it]INFO 10-22 10:56:21 metrics.py:351] Avg prompt throughput: 18624.2 tokens/s, Avg generation throughput: 30.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 6 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:56:21 metrics.py:367] Prefix cache hit rate: GPU: 82.97%, CPU: 0.00%
 89%|████████▉ | 57/64 [08:16<00:58,  8.33s/it]INFO 10-22 10:56:26 metrics.py:351] Avg prompt throughput: 18735.4 tokens/s, Avg generation throughput: 30.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 5 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:56:26 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
 91%|█████████ | 58/64 [08:20<00:42,  7.16s/it]INFO 10-22 10:56:31 metrics.py:351] Avg prompt throughput: 18578.8 tokens/s, Avg generation throughput: 30.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 4 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:56:31 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
 92%|█████████▏| 59/64 [08:25<00:31,  6.35s/it]INFO 10-22 10:56:36 metrics.py:351] Avg prompt throughput: 18457.8 tokens/s, Avg generation throughput: 29.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 3 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:56:36 metrics.py:367] Prefix cache hit rate: GPU: 83.21%, CPU: 0.00%
 94%|█████████▍| 60/64 [08:29<00:23,  5.80s/it]INFO 10-22 10:56:41 metrics.py:351] Avg prompt throughput: 6860.8 tokens/s, Avg generation throughput: 6.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:56:41 metrics.py:367] Prefix cache hit rate: GPU: 82.83%, CPU: 0.00%
INFO 10-22 10:56:46 metrics.py:351] Avg prompt throughput: 3963.9 tokens/s, Avg generation throughput: 8.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:56:46 metrics.py:367] Prefix cache hit rate: GPU: 82.83%, CPU: 0.00%
INFO 10-22 10:56:51 metrics.py:351] Avg prompt throughput: 3060.2 tokens/s, Avg generation throughput: 6.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:56:51 metrics.py:367] Prefix cache hit rate: GPU: 82.83%, CPU: 0.00%
INFO 10-22 10:56:57 metrics.py:351] Avg prompt throughput: 2588.7 tokens/s, Avg generation throughput: 5.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:56:57 metrics.py:367] Prefix cache hit rate: GPU: 82.83%, CPU: 0.00%
 95%|█████████▌| 61/64 [08:50<00:31, 10.47s/it]INFO 10-22 10:57:02 metrics.py:351] Avg prompt throughput: 2397.7 tokens/s, Avg generation throughput: 1.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:57:02 metrics.py:367] Prefix cache hit rate: GPU: 82.83%, CPU: 0.00%
INFO 10-22 10:57:07 metrics.py:351] Avg prompt throughput: 2133.6 tokens/s, Avg generation throughput: 0.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 1 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:57:07 metrics.py:367] Prefix cache hit rate: GPU: 82.91%, CPU: 0.00%
 97%|█████████▋| 62/64 [09:02<00:21, 10.86s/it]INFO 10-22 10:57:12 metrics.py:351] Avg prompt throughput: 19214.9 tokens/s, Avg generation throughput: 31.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:57:12 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
 98%|█████████▊| 63/64 [09:07<00:08,  8.92s/it]INFO 10-22 10:57:17 metrics.py:351] Avg prompt throughput: 13193.4 tokens/s, Avg generation throughput: 39.2 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:57:17 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
100%|██████████| 64/64 [09:10<00:00,  7.23s/it]100%|██████████| 64/64 [09:10<00:00,  8.60s/it]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  550.33    
Total input tokens:                      5242880   
Total generated tokens:                  8190      
Request throughput (req/s):              0.12      
Output token throughput (tok/s):         14.88     
Total Token throughput (tok/s):          9541.69   
---------------Time to First Token----------------
Mean TTFT (ms):                          257554.81 
Median TTFT (ms):                        252256.58 
P99 TTFT (ms):                           530047.51 
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          43.96     
Median TPOT (ms):                        23.54     
P99 TPOT (ms):                           146.75    
---------------Inter-token Latency----------------
Mean ITL (ms):                           43.92     
Median ITL (ms):                         23.86     
P99 ITL (ms):                            209.83    
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_81920.json             --request-rate 4             --ignore-eos             --ib-input-len 81920             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_81920.json             --request-rate 4             --ignore-eos             --ib-input-len 81920             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_4_in_81920.json             --request-rate 4             --ignore-eos             --ib-input-len 81920             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for qps in $qps_list
+ [[ 16 == *\i\n\f* ]]
+ new_test_name=vllm_qwen7B_ib_prefix_qps_16
+ backend=vllm
+ [[ vllm == *\v\l\l\m* ]]
+ backend=vllm
+ [[ ib = \i\b ]]
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_16_in_2048
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_2048.json             --request-rate 16             --ignore-eos             --ib-input-len 2048             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 16'
Running test case vllm_qwen7B_ib_prefix with qps 16
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_2048.json             --request-rate 16             --ignore-eos             --ib-input-len 2048             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_2048.json             --request-rate 16             --ignore-eos             --ib-input-len 2048             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_2048.json             --request-rate 16             --ignore-eos             --ib-input-len 2048             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_16_in_2048.json --request-rate 16 --ignore-eos --ib-input-len 2048
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 10:57:27 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 2.6 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:57:27 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 10:57:37 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:57:37 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 10:57:47 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:57:47 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO:     127.0.0.1:59592 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:57:56 metrics.py:351] Avg prompt throughput: 60.3 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.6%, CPU KV cache usage: 0.0%.
INFO 10-22 10:57:56 metrics.py:367] Prefix cache hit rate: GPU: 82.98%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=16.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_16_in_2048.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=2048, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 16.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:60420 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60430 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60446 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60450 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60464 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60470 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60478 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60486 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60494 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60502 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60508 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60516 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60520 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60530 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60540 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60542 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60554 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60570 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60572 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60588 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60600 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60602 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60606 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60620 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60626 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60628 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60636 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60646 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60648 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60662 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60668 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60674 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60676 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60690 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60702 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60710 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60726 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60742 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60754 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60764 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60770 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60784 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60796 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:58:01 metrics.py:351] Avg prompt throughput: 12705.0 tokens/s, Avg generation throughput: 404.4 tokens/s, Running: 31 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 4.4%, CPU KV cache usage: 0.0%.
INFO 10-22 10:58:01 metrics.py:367] Prefix cache hit rate: GPU: 82.97%, CPU: 0.00%
INFO:     127.0.0.1:60812 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60820 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60832 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:03<03:26,  3.27s/it]INFO:     127.0.0.1:60848 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60856 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60866 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60870 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60876 - "POST /v1/completions HTTP/1.1" 200 OK
  3%|▎         | 2/64 [00:03<01:27,  1.41s/it]INFO:     127.0.0.1:60886 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60898 - "POST /v1/completions HTTP/1.1" 200 OK
  5%|▍         | 3/64 [00:03<00:49,  1.22it/s]INFO:     127.0.0.1:60910 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60918 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60934 - "POST /v1/completions HTTP/1.1" 200 OK
  8%|▊         | 5/64 [00:03<00:25,  2.33it/s]INFO:     127.0.0.1:60940 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60942 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60952 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60966 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60968 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60970 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:60986 - "POST /v1/completions HTTP/1.1" 200 OK
  9%|▉         | 6/64 [00:03<00:20,  2.79it/s]INFO:     127.0.0.1:60998 - "POST /v1/completions HTTP/1.1" 200 OK
 12%|█▎        | 8/64 [00:04<00:13,  4.24it/s] 16%|█▌        | 10/64 [00:04<00:11,  4.91it/s] 17%|█▋        | 11/64 [00:04<00:10,  5.18it/s] 20%|██        | 13/64 [00:04<00:07,  6.53it/s] 23%|██▎       | 15/64 [00:04<00:06,  7.71it/s] 27%|██▋       | 17/64 [00:05<00:05,  8.40it/s] 30%|██▉       | 19/64 [00:05<00:04,  9.23it/s] 33%|███▎      | 21/64 [00:05<00:04,  9.56it/s] 36%|███▌      | 23/64 [00:05<00:04, 10.08it/s] 39%|███▉      | 25/64 [00:05<00:03, 10.17it/s] 42%|████▏     | 27/64 [00:06<00:03, 10.54it/s] 45%|████▌     | 29/64 [00:06<00:03, 10.47it/s] 48%|████▊     | 31/64 [00:06<00:03, 10.77it/s] 52%|█████▏    | 33/64 [00:06<00:02, 10.63it/s] 55%|█████▍    | 35/64 [00:06<00:02, 11.03it/s] 58%|█████▊    | 37/64 [00:06<00:02, 11.14it/s] 61%|██████    | 39/64 [00:07<00:02, 11.61it/s] 64%|██████▍   | 41/64 [00:07<00:01, 11.61it/s] 67%|██████▋   | 43/64 [00:07<00:01, 12.06it/s] 70%|███████   | 45/64 [00:07<00:01, 12.03it/s] 73%|███████▎  | 47/64 [00:07<00:01, 12.45it/s] 77%|███████▋  | 49/64 [00:07<00:01, 12.41it/s] 80%|███████▉  | 51/64 [00:08<00:01, 12.46it/s]INFO 10-22 10:58:06 metrics.py:351] Avg prompt throughput: 13778.7 tokens/s, Avg generation throughput: 1194.8 tokens/s, Running: 12 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 2.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:58:06 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
 83%|████████▎ | 53/64 [00:08<00:00, 12.94it/s] 86%|████████▌ | 55/64 [00:08<00:00, 12.95it/s] 89%|████████▉ | 57/64 [00:08<00:00, 13.62it/s] 92%|█████████▏| 59/64 [00:08<00:00, 13.78it/s] 95%|█████████▌| 61/64 [00:08<00:00, 14.57it/s] 98%|█████████▊| 63/64 [00:08<00:00, 14.99it/s]100%|██████████| 64/64 [00:08<00:00,  7.18it/s]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  8.91      
Total input tokens:                      131072    
Total generated tokens:                  8191      
Request throughput (req/s):              7.18      
Output token throughput (tok/s):         919.31    
Total Token throughput (tok/s):          15630.05  
---------------Time to First Token----------------
Mean TTFT (ms):                          1178.13   
Median TTFT (ms):                        1056.80   
P99 TTFT (ms):                           2701.29   
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          23.67     
Median TPOT (ms):                        24.59     
P99 TPOT (ms):                           28.61     
---------------Inter-token Latency----------------
Mean ITL (ms):                           23.66     
Median ITL (ms):                         20.83     
P99 ITL (ms):                            107.59    
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_2048.json             --request-rate 16             --ignore-eos             --ib-input-len 2048             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_2048.json             --request-rate 16             --ignore-eos             --ib-input-len 2048             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_2048.json             --request-rate 16             --ignore-eos             --ib-input-len 2048             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_16_in_10240
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_10240.json             --request-rate 16             --ignore-eos             --ib-input-len 10240             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 16'
Running test case vllm_qwen7B_ib_prefix with qps 16
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_10240.json             --request-rate 16             --ignore-eos             --ib-input-len 10240             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_10240.json             --request-rate 16             --ignore-eos             --ib-input-len 10240             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_10240.json             --request-rate 16             --ignore-eos             --ib-input-len 10240             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_16_in_10240.json --request-rate 16 --ignore-eos --ib-input-len 10240
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 10:58:17 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 27.7 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:58:17 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 10:58:27 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:58:27 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 10:58:37 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:58:37 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO:     127.0.0.1:37922 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:58:47 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 3.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:58:47 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=16.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_16_in_10240.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=10240, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 16.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:37932 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37942 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37954 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37968 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37976 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37982 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37986 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:37998 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38000 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38014 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38030 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38040 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38052 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38054 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38068 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38078 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38080 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38096 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38110 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38116 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38122 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38130 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38138 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38154 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38164 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38166 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38174 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38182 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 10:58:52 metrics.py:351] Avg prompt throughput: 13102.9 tokens/s, Avg generation throughput: 75.9 tokens/s, Running: 6 reqs, Swapped: 0 reqs, Pending: 22 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:58:52 metrics.py:367] Prefix cache hit rate: GPU: 82.96%, CPU: 0.00%
INFO:     127.0.0.1:38192 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38194 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38204 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38214 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38226 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38236 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38238 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38252 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38262 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38270 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38272 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38276 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38292 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38308 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38320 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38334 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38336 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38344 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38354 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38370 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38376 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38378 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38390 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38398 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:03<03:35,  3.43s/it]INFO:     127.0.0.1:38406 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38412 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38416 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38418 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38428 - "POST /v1/completions HTTP/1.1" 200 OK
  3%|▎         | 2/64 [00:03<01:41,  1.64s/it]INFO:     127.0.0.1:38442 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38456 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38464 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38476 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38480 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38484 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:38486 - "POST /v1/completions HTTP/1.1" 200 OK
  5%|▍         | 3/64 [00:04<01:05,  1.08s/it]  6%|▋         | 4/64 [00:04<00:48,  1.25it/s]  8%|▊         | 5/64 [00:05<00:41,  1.41it/s]  9%|▉         | 6/64 [00:06<00:47,  1.23it/s] 11%|█         | 7/64 [00:06<00:38,  1.49it/s] 12%|█▎        | 8/64 [00:06<00:32,  1.70it/s]INFO 10-22 10:58:57 metrics.py:351] Avg prompt throughput: 19515.7 tokens/s, Avg generation throughput: 240.1 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 49 reqs, GPU KV cache usage: 6.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:58:57 metrics.py:367] Prefix cache hit rate: GPU: 83.00%, CPU: 0.00%
 14%|█▍        | 9/64 [00:07<00:29,  1.89it/s] 16%|█▌        | 10/64 [00:07<00:26,  2.07it/s] 17%|█▋        | 11/64 [00:08<00:24,  2.18it/s] 19%|█▉        | 12/64 [00:08<00:24,  2.10it/s] 20%|██        | 13/64 [00:09<00:32,  1.59it/s] 22%|██▏       | 14/64 [00:10<00:28,  1.78it/s] 23%|██▎       | 15/64 [00:10<00:25,  1.95it/s] 25%|██▌       | 16/64 [00:10<00:22,  2.11it/s] 27%|██▋       | 17/64 [00:11<00:21,  2.22it/s] 28%|██▊       | 18/64 [00:11<00:20,  2.22it/s]INFO 10-22 10:59:02 metrics.py:351] Avg prompt throughput: 19878.2 tokens/s, Avg generation throughput: 248.8 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:59:02 metrics.py:367] Prefix cache hit rate: GPU: 83.00%, CPU: 0.00%
 30%|██▉       | 19/64 [00:12<00:28,  1.60it/s] 31%|███▏      | 20/64 [00:13<00:24,  1.80it/s] 33%|███▎      | 21/64 [00:13<00:21,  1.98it/s] 34%|███▍      | 22/64 [00:13<00:19,  2.12it/s] 36%|███▌      | 23/64 [00:14<00:18,  2.22it/s] 38%|███▊      | 24/64 [00:14<00:17,  2.26it/s] 39%|███▉      | 25/64 [00:15<00:24,  1.62it/s] 41%|████      | 26/64 [00:16<00:20,  1.81it/s] 42%|████▏     | 27/64 [00:16<00:18,  2.00it/s] 44%|████▍     | 28/64 [00:16<00:16,  2.13it/s]INFO 10-22 10:59:07 metrics.py:351] Avg prompt throughput: 21165.9 tokens/s, Avg generation throughput: 264.8 tokens/s, Running: 8 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 9.3%, CPU KV cache usage: 0.0%.
INFO 10-22 10:59:07 metrics.py:367] Prefix cache hit rate: GPU: 83.01%, CPU: 0.00%
 45%|████▌     | 29/64 [00:17<00:16,  2.15it/s] 47%|████▋     | 30/64 [00:18<00:21,  1.59it/s] 48%|████▊     | 31/64 [00:18<00:18,  1.78it/s] 50%|█████     | 32/64 [00:19<00:16,  1.96it/s] 52%|█████▏    | 33/64 [00:19<00:14,  2.09it/s] 53%|█████▎    | 34/64 [00:20<00:16,  1.79it/s] 55%|█████▍    | 35/64 [00:21<00:20,  1.44it/s] 56%|█████▋    | 36/64 [00:21<00:17,  1.64it/s] 58%|█████▊    | 37/64 [00:22<00:14,  1.82it/s]INFO 10-22 10:59:12 metrics.py:351] Avg prompt throughput: 17413.8 tokens/s, Avg generation throughput: 217.4 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 20 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:59:12 metrics.py:367] Prefix cache hit rate: GPU: 83.04%, CPU: 0.00%
 59%|█████▉    | 38/64 [00:22<00:13,  1.99it/s] 61%|██████    | 39/64 [00:23<00:13,  1.80it/s] 62%|██████▎   | 40/64 [00:24<00:16,  1.41it/s] 64%|██████▍   | 41/64 [00:24<00:14,  1.63it/s] 66%|██████▌   | 42/64 [00:25<00:12,  1.82it/s] 67%|██████▋   | 43/64 [00:25<00:10,  1.97it/s] 69%|██████▉   | 44/64 [00:25<00:09,  2.12it/s] 70%|███████   | 45/64 [00:26<00:08,  2.21it/s] 72%|███████▏  | 46/64 [00:26<00:07,  2.28it/s] 73%|███████▎  | 47/64 [00:27<00:07,  2.37it/s]INFO 10-22 10:59:17 metrics.py:351] Avg prompt throughput: 20870.1 tokens/s, Avg generation throughput: 260.8 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 10 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:59:17 metrics.py:367] Prefix cache hit rate: GPU: 83.08%, CPU: 0.00%
 75%|███████▌  | 48/64 [00:27<00:06,  2.40it/s] 77%|███████▋  | 49/64 [00:27<00:06,  2.45it/s] 78%|███████▊  | 50/64 [00:28<00:05,  2.45it/s] 80%|███████▉  | 51/64 [00:28<00:05,  2.45it/s] 81%|████████▏ | 52/64 [00:29<00:04,  2.48it/s] 83%|████████▎ | 53/64 [00:29<00:04,  2.48it/s] 84%|████████▍ | 54/64 [00:29<00:04,  2.47it/s] 86%|████████▌ | 55/64 [00:30<00:03,  2.50it/s] 88%|████████▊ | 56/64 [00:30<00:03,  2.48it/s] 89%|████████▉ | 57/64 [00:31<00:02,  2.47it/s] 91%|█████████ | 58/64 [00:31<00:02,  2.53it/s] 92%|█████████▏| 59/64 [00:31<00:01,  2.61it/s] 94%|█████████▍| 60/64 [00:32<00:01,  2.68it/s]INFO 10-22 10:59:22 metrics.py:351] Avg prompt throughput: 20782.8 tokens/s, Avg generation throughput: 318.6 tokens/s, Running: 4 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 10:59:22 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
 95%|█████████▌| 61/64 [00:32<00:01,  2.80it/s] 97%|█████████▋| 62/64 [00:32<00:00,  2.87it/s] 98%|█████████▊| 63/64 [00:33<00:00,  2.99it/s]100%|██████████| 64/64 [00:33<00:00,  3.04it/s]100%|██████████| 64/64 [00:33<00:00,  1.91it/s]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  33.43     
Total input tokens:                      655360    
Total generated tokens:                  8190      
Request throughput (req/s):              1.91      
Output token throughput (tok/s):         244.99    
Total Token throughput (tok/s):          19849.16  
---------------Time to First Token----------------
Mean TTFT (ms):                          14075.00  
Median TTFT (ms):                        13892.95  
P99 TTFT (ms):                           27214.14  
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          23.49     
Median TPOT (ms):                        24.53     
P99 TPOT (ms):                           31.91     
---------------Inter-token Latency----------------
Mean ITL (ms):                           23.48     
Median ITL (ms):                         18.27     
P99 ITL (ms):                            65.21     
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_10240.json             --request-rate 16             --ignore-eos             --ib-input-len 10240             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_10240.json             --request-rate 16             --ignore-eos             --ib-input-len 10240             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_10240.json             --request-rate 16             --ignore-eos             --ib-input-len 10240             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_16_in_40960
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_40960.json             --request-rate 16             --ignore-eos             --ib-input-len 40960             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 16'
Running test case vllm_qwen7B_ib_prefix with qps 16
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_40960.json             --request-rate 16             --ignore-eos             --ib-input-len 40960             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_40960.json             --request-rate 16             --ignore-eos             --ib-input-len 40960             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_40960.json             --request-rate 16             --ignore-eos             --ib-input-len 40960             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_16_in_40960.json --request-rate 16 --ignore-eos --ib-input-len 40960
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 10:59:37 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 11.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:59:37 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
INFO 10-22 10:59:47 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:59:47 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
INFO 10-22 10:59:57 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 10:59:57 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
INFO 10-22 11:00:07 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:00:07 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
INFO:     127.0.0.1:57936 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 11:00:12 metrics.py:351] Avg prompt throughput: 4556.9 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:00:12 metrics.py:367] Prefix cache hit rate: GPU: 83.04%, CPU: 0.00%
INFO 10-22 11:00:17 metrics.py:351] Avg prompt throughput: 3577.8 tokens/s, Avg generation throughput: 18.8 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:00:17 metrics.py:367] Prefix cache hit rate: GPU: 83.04%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=16.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_16_in_40960.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=40960, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 16.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:56334 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56342 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56354 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56370 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56374 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56382 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56386 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56394 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56406 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56408 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56422 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56424 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56430 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56446 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56452 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56468 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56480 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56484 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56494 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56504 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56520 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56526 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56532 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56534 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56536 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56538 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56548 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56550 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56566 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56582 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56596 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56602 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56618 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56628 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56634 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56644 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56650 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56664 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56680 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56690 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56694 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56710 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56714 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56722 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56724 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56738 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56746 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56756 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56758 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56766 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56772 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56774 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56790 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56802 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56806 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56812 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56824 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 11:00:22 metrics.py:351] Avg prompt throughput: 21230.2 tokens/s, Avg generation throughput: 42.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 54 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:00:22 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO:     127.0.0.1:56832 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56846 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56858 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56874 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56880 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56882 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56892 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:04<04:45,  4.54s/it]  3%|▎         | 2/64 [00:06<02:57,  2.87s/it]  5%|▍         | 3/64 [00:08<02:26,  2.40s/it]INFO 10-22 11:00:27 metrics.py:351] Avg prompt throughput: 19306.5 tokens/s, Avg generation throughput: 56.9 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:00:27 metrics.py:367] Prefix cache hit rate: GPU: 83.10%, CPU: 0.00%
  6%|▋         | 4/64 [00:11<02:57,  2.96s/it]INFO 10-22 11:00:32 metrics.py:351] Avg prompt throughput: 7181.0 tokens/s, Avg generation throughput: 23.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:00:32 metrics.py:367] Prefix cache hit rate: GPU: 83.10%, CPU: 0.00%
  8%|▊         | 5/64 [00:16<03:39,  3.73s/it]  9%|▉         | 6/64 [00:18<02:58,  3.08s/it]INFO 10-22 11:00:38 metrics.py:351] Avg prompt throughput: 16895.2 tokens/s, Avg generation throughput: 51.7 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 55 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:00:38 metrics.py:367] Prefix cache hit rate: GPU: 83.21%, CPU: 0.00%
 11%|█         | 7/64 [00:20<02:32,  2.67s/it] 12%|█▎        | 8/64 [00:22<02:14,  2.41s/it] 14%|█▍        | 9/64 [00:24<02:02,  2.22s/it]INFO 10-22 11:00:43 metrics.py:351] Avg prompt throughput: 22969.6 tokens/s, Avg generation throughput: 73.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 53 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:00:43 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
 16%|█▌        | 10/64 [00:28<02:34,  2.86s/it]INFO 10-22 11:00:48 metrics.py:351] Avg prompt throughput: 7239.6 tokens/s, Avg generation throughput: 23.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:00:48 metrics.py:367] Prefix cache hit rate: GPU: 83.16%, CPU: 0.00%
 17%|█▋        | 11/64 [00:34<03:13,  3.65s/it]INFO 10-22 11:00:53 metrics.py:351] Avg prompt throughput: 10472.7 tokens/s, Avg generation throughput: 30.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 51 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:00:53 metrics.py:367] Prefix cache hit rate: GPU: 83.20%, CPU: 0.00%
 19%|█▉        | 12/64 [00:35<02:41,  3.11s/it] 20%|██        | 13/64 [00:37<02:19,  2.73s/it] 22%|██▏       | 14/64 [00:39<02:03,  2.47s/it]INFO 10-22 11:00:58 metrics.py:351] Avg prompt throughput: 21703.8 tokens/s, Avg generation throughput: 70.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 48 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:00:58 metrics.py:367] Prefix cache hit rate: GPU: 83.30%, CPU: 0.00%
 23%|██▎       | 15/64 [00:41<01:52,  2.29s/it] 25%|██▌       | 16/64 [00:43<01:43,  2.16s/it]INFO 10-22 11:01:03 metrics.py:351] Avg prompt throughput: 20509.0 tokens/s, Avg generation throughput: 61.9 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:01:03 metrics.py:367] Prefix cache hit rate: GPU: 83.25%, CPU: 0.00%
 27%|██▋       | 17/64 [00:47<02:06,  2.70s/it]INFO 10-22 11:01:08 metrics.py:351] Avg prompt throughput: 5505.8 tokens/s, Avg generation throughput: 17.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:01:08 metrics.py:367] Prefix cache hit rate: GPU: 83.25%, CPU: 0.00%
 28%|██▊       | 18/64 [00:53<02:46,  3.62s/it]INFO 10-22 11:01:13 metrics.py:351] Avg prompt throughput: 13689.0 tokens/s, Avg generation throughput: 44.6 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 43 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:01:13 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
 30%|██▉       | 19/64 [00:54<02:19,  3.09s/it] 31%|███▏      | 20/64 [00:56<01:59,  2.72s/it] 33%|███▎      | 21/64 [00:58<01:45,  2.46s/it]INFO 10-22 11:01:18 metrics.py:351] Avg prompt throughput: 21842.0 tokens/s, Avg generation throughput: 66.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 40 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:01:18 metrics.py:367] Prefix cache hit rate: GPU: 83.43%, CPU: 0.00%
 34%|███▍      | 22/64 [01:00<01:35,  2.28s/it] 36%|███▌      | 23/64 [01:04<01:59,  2.92s/it]INFO 10-22 11:01:23 metrics.py:351] Avg prompt throughput: 11202.6 tokens/s, Avg generation throughput: 37.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:01:23 metrics.py:367] Prefix cache hit rate: GPU: 83.31%, CPU: 0.00%
INFO 10-22 11:01:28 metrics.py:351] Avg prompt throughput: 3459.9 tokens/s, Avg generation throughput: 7.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 38 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:01:28 metrics.py:367] Prefix cache hit rate: GPU: 83.34%, CPU: 0.00%
 38%|███▊      | 24/64 [01:11<02:36,  3.92s/it] 39%|███▉      | 25/64 [01:12<02:08,  3.29s/it] 41%|████      | 26/64 [01:14<01:49,  2.87s/it]INFO 10-22 11:01:33 metrics.py:351] Avg prompt throughput: 21999.4 tokens/s, Avg generation throughput: 71.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 36 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:01:33 metrics.py:367] Prefix cache hit rate: GPU: 83.41%, CPU: 0.00%
 42%|████▏     | 27/64 [01:16<01:34,  2.57s/it] 44%|████▍     | 28/64 [01:18<01:24,  2.36s/it]INFO 10-22 11:01:38 metrics.py:351] Avg prompt throughput: 20472.6 tokens/s, Avg generation throughput: 62.6 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:01:38 metrics.py:367] Prefix cache hit rate: GPU: 83.36%, CPU: 0.00%
 45%|████▌     | 29/64 [01:23<01:44,  3.00s/it]INFO 10-22 11:01:43 metrics.py:351] Avg prompt throughput: 4567.9 tokens/s, Avg generation throughput: 15.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:01:43 metrics.py:367] Prefix cache hit rate: GPU: 83.36%, CPU: 0.00%
 47%|████▋     | 30/64 [01:29<02:15,  3.99s/it]INFO 10-22 11:01:48 metrics.py:351] Avg prompt throughput: 9938.4 tokens/s, Avg generation throughput: 29.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 31 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:01:48 metrics.py:367] Prefix cache hit rate: GPU: 83.43%, CPU: 0.00%
 48%|████▊     | 31/64 [01:31<01:50,  3.35s/it] 50%|█████     | 32/64 [01:33<01:32,  2.90s/it] 52%|█████▏    | 33/64 [01:34<01:20,  2.60s/it]INFO 10-22 11:01:53 metrics.py:351] Avg prompt throughput: 22577.8 tokens/s, Avg generation throughput: 72.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 29 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:01:53 metrics.py:367] Prefix cache hit rate: GPU: 83.50%, CPU: 0.00%
 53%|█████▎    | 34/64 [01:39<01:30,  3.03s/it]INFO 10-22 11:01:58 metrics.py:351] Avg prompt throughput: 7509.2 tokens/s, Avg generation throughput: 24.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:01:58 metrics.py:367] Prefix cache hit rate: GPU: 83.38%, CPU: 0.00%
INFO 10-22 11:02:03 metrics.py:351] Avg prompt throughput: 6540.5 tokens/s, Avg generation throughput: 21.2 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 27 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 11:02:03 metrics.py:367] Prefix cache hit rate: GPU: 83.41%, CPU: 0.00%
 55%|█████▍    | 35/64 [01:45<01:57,  4.06s/it] 56%|█████▋    | 36/64 [01:47<01:35,  3.41s/it] 58%|█████▊    | 37/64 [01:49<01:19,  2.95s/it]INFO 10-22 11:02:08 metrics.py:351] Avg prompt throughput: 21263.0 tokens/s, Avg generation throughput: 63.4 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 24 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:02:08 metrics.py:367] Prefix cache hit rate: GPU: 83.51%, CPU: 0.00%
 59%|█████▉    | 38/64 [01:51<01:08,  2.64s/it]INFO 10-22 11:02:13 metrics.py:351] Avg prompt throughput: 11038.8 tokens/s, Avg generation throughput: 37.2 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 11:02:13 metrics.py:367] Prefix cache hit rate: GPU: 83.35%, CPU: 0.00%
 61%|██████    | 39/64 [01:56<01:26,  3.47s/it]INFO 10-22 11:02:18 metrics.py:351] Avg prompt throughput: 3508.4 tokens/s, Avg generation throughput: 8.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:02:18 metrics.py:367] Prefix cache hit rate: GPU: 83.35%, CPU: 0.00%
 62%|██████▎   | 40/64 [02:03<01:46,  4.44s/it] 64%|██████▍   | 41/64 [02:05<01:24,  3.67s/it]INFO 10-22 11:02:23 metrics.py:351] Avg prompt throughput: 15516.8 tokens/s, Avg generation throughput: 49.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 21 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:02:23 metrics.py:367] Prefix cache hit rate: GPU: 83.42%, CPU: 0.00%
 66%|██████▌   | 42/64 [02:07<01:09,  3.14s/it] 67%|██████▋   | 43/64 [02:08<00:58,  2.77s/it]INFO 10-22 11:02:28 metrics.py:351] Avg prompt throughput: 18634.0 tokens/s, Avg generation throughput: 57.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:02:28 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
 69%|██████▉   | 44/64 [02:14<01:13,  3.70s/it]INFO 10-22 11:02:34 metrics.py:351] Avg prompt throughput: 4479.4 tokens/s, Avg generation throughput: 16.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:02:34 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
INFO 10-22 11:02:39 metrics.py:351] Avg prompt throughput: 3262.8 tokens/s, Avg generation throughput: 7.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 17 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:02:39 metrics.py:367] Prefix cache hit rate: GPU: 83.35%, CPU: 0.00%
 70%|███████   | 45/64 [02:21<01:28,  4.63s/it] 72%|███████▏  | 46/64 [02:23<01:08,  3.81s/it] 73%|███████▎  | 47/64 [02:25<00:54,  3.23s/it]INFO 10-22 11:02:44 metrics.py:351] Avg prompt throughput: 22043.2 tokens/s, Avg generation throughput: 71.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 15 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:02:44 metrics.py:367] Prefix cache hit rate: GPU: 83.42%, CPU: 0.00%
 75%|███████▌  | 48/64 [02:27<00:45,  2.83s/it] 77%|███████▋  | 49/64 [02:29<00:38,  2.55s/it]INFO 10-22 11:02:49 metrics.py:351] Avg prompt throughput: 18987.8 tokens/s, Avg generation throughput: 57.2 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:02:49 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
 78%|███████▊  | 50/64 [02:35<00:50,  3.62s/it]INFO 10-22 11:02:54 metrics.py:351] Avg prompt throughput: 4448.7 tokens/s, Avg generation throughput: 17.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:02:54 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
INFO 10-22 11:02:59 metrics.py:351] Avg prompt throughput: 3154.8 tokens/s, Avg generation throughput: 6.4 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 11 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:02:59 metrics.py:367] Prefix cache hit rate: GPU: 83.36%, CPU: 0.00%
 80%|███████▉  | 51/64 [02:41<00:58,  4.53s/it] 81%|████████▏ | 52/64 [02:43<00:44,  3.74s/it] 83%|████████▎ | 53/64 [02:45<00:35,  3.19s/it]INFO 10-22 11:03:04 metrics.py:351] Avg prompt throughput: 21718.6 tokens/s, Avg generation throughput: 71.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 9 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:03:04 metrics.py:367] Prefix cache hit rate: GPU: 83.42%, CPU: 0.00%
 84%|████████▍ | 54/64 [02:47<00:27,  2.80s/it]INFO 10-22 11:03:09 metrics.py:351] Avg prompt throughput: 13547.0 tokens/s, Avg generation throughput: 41.5 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 11:03:09 metrics.py:367] Prefix cache hit rate: GPU: 83.29%, CPU: 0.00%
 86%|████████▌ | 55/64 [02:53<00:33,  3.75s/it]INFO 10-22 11:03:14 metrics.py:351] Avg prompt throughput: 3671.5 tokens/s, Avg generation throughput: 11.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:03:14 metrics.py:367] Prefix cache hit rate: GPU: 83.29%, CPU: 0.00%
 88%|████████▊ | 56/64 [03:00<00:37,  4.66s/it]INFO 10-22 11:03:19 metrics.py:351] Avg prompt throughput: 9498.4 tokens/s, Avg generation throughput: 28.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 6 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:03:19 metrics.py:367] Prefix cache hit rate: GPU: 83.33%, CPU: 0.00%
 89%|████████▉ | 57/64 [03:02<00:26,  3.84s/it] 91%|█████████ | 58/64 [03:04<00:19,  3.26s/it]INFO 10-22 11:03:24 metrics.py:351] Avg prompt throughput: 21188.7 tokens/s, Avg generation throughput: 69.5 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 3 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:03:24 metrics.py:367] Prefix cache hit rate: GPU: 83.42%, CPU: 0.00%
 92%|█████████▏| 59/64 [03:06<00:14,  2.85s/it]INFO 10-22 11:03:29 metrics.py:351] Avg prompt throughput: 7773.7 tokens/s, Avg generation throughput: 24.1 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 11:03:29 metrics.py:367] Prefix cache hit rate: GPU: 83.27%, CPU: 0.00%
 94%|█████████▍| 60/64 [03:11<00:14,  3.73s/it]INFO 10-22 11:03:34 metrics.py:351] Avg prompt throughput: 3538.6 tokens/s, Avg generation throughput: 8.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:03:34 metrics.py:367] Prefix cache hit rate: GPU: 83.27%, CPU: 0.00%
 95%|█████████▌| 61/64 [03:18<00:13,  4.58s/it] 97%|█████████▋| 62/64 [03:20<00:07,  3.77s/it]INFO 10-22 11:03:39 metrics.py:351] Avg prompt throughput: 16962.8 tokens/s, Avg generation throughput: 54.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:03:39 metrics.py:367] Prefix cache hit rate: GPU: 83.33%, CPU: 0.00%
 98%|█████████▊| 63/64 [03:21<00:03,  3.13s/it]100%|██████████| 64/64 [03:23<00:00,  2.65s/it]100%|██████████| 64/64 [03:23<00:00,  3.18s/it]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  203.54    
Total input tokens:                      2621440   
Total generated tokens:                  8190      
Request throughput (req/s):              0.31      
Output token throughput (tok/s):         40.24     
Total Token throughput (tok/s):          12919.66  
---------------Time to First Token----------------
Mean TTFT (ms):                          92490.29  
Median TTFT (ms):                        88914.69  
P99 TTFT (ms):                           196129.12 
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          35.43     
Median TPOT (ms):                        22.21     
P99 TPOT (ms):                           89.91     
---------------Inter-token Latency----------------
Mean ITL (ms):                           35.42     
Median ITL (ms):                         20.54     
P99 ITL (ms):                            168.08    
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_40960.json             --request-rate 16             --ignore-eos             --ib-input-len 40960             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_40960.json             --request-rate 16             --ignore-eos             --ib-input-len 40960             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_40960.json             --request-rate 16             --ignore-eos             --ib-input-len 40960             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_16_in_81920
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_81920.json             --request-rate 16             --ignore-eos             --ib-input-len 81920             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 16'
Running test case vllm_qwen7B_ib_prefix with qps 16
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_81920.json             --request-rate 16             --ignore-eos             --ib-input-len 81920             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_81920.json             --request-rate 16             --ignore-eos             --ib-input-len 81920             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_81920.json             --request-rate 16             --ignore-eos             --ib-input-len 81920             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_16_in_81920.json --request-rate 16 --ignore-eos --ib-input-len 81920
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 11:03:48 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 17.5 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:03:48 metrics.py:367] Prefix cache hit rate: GPU: 83.33%, CPU: 0.00%
INFO 10-22 11:03:58 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:03:58 metrics.py:367] Prefix cache hit rate: GPU: 83.33%, CPU: 0.00%
INFO 10-22 11:04:08 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:04:08 metrics.py:367] Prefix cache hit rate: GPU: 83.33%, CPU: 0.00%
INFO 10-22 11:04:18 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:04:18 metrics.py:367] Prefix cache hit rate: GPU: 83.33%, CPU: 0.00%
INFO 10-22 11:04:28 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:04:28 metrics.py:367] Prefix cache hit rate: GPU: 83.33%, CPU: 0.00%
INFO:     127.0.0.1:35294 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 11:04:37 metrics.py:351] Avg prompt throughput: 60.3 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:04:37 metrics.py:367] Prefix cache hit rate: GPU: 83.02%, CPU: 0.00%
INFO 10-22 11:04:42 metrics.py:351] Avg prompt throughput: 6965.8 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:04:42 metrics.py:367] Prefix cache hit rate: GPU: 83.02%, CPU: 0.00%
INFO 10-22 11:04:47 metrics.py:351] Avg prompt throughput: 4061.3 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:04:47 metrics.py:367] Prefix cache hit rate: GPU: 83.02%, CPU: 0.00%
INFO 10-22 11:04:52 metrics.py:351] Avg prompt throughput: 3138.3 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:04:52 metrics.py:367] Prefix cache hit rate: GPU: 83.02%, CPU: 0.00%
INFO 10-22 11:04:57 metrics.py:351] Avg prompt throughput: 1943.9 tokens/s, Avg generation throughput: 14.2 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:04:57 metrics.py:367] Prefix cache hit rate: GPU: 83.02%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=16.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_16_in_81920.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=81920, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 16.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:41714 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41720 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41728 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41740 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41744 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41758 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41760 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41776 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41778 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41788 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41792 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41798 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41802 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41806 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41816 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41818 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41826 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41834 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41848 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41852 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41862 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41878 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 11:05:02 metrics.py:351] Avg prompt throughput: 15838.5 tokens/s, Avg generation throughput: 11.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 20 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:05:02 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO:     127.0.0.1:41890 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41904 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41916 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41932 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41948 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41950 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41962 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41968 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41972 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41974 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41976 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41984 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:41994 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42006 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42018 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42032 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42036 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42048 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42056 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42066 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42068 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42070 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42084 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42092 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42108 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42112 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42114 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42128 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42132 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42134 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42146 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42162 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42178 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42192 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42198 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42206 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42216 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42230 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42246 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42256 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42260 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42268 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:08<08:53,  8.46s/it]INFO 10-22 11:05:07 metrics.py:351] Avg prompt throughput: 18026.2 tokens/s, Avg generation throughput: 28.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 61 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:05:07 metrics.py:367] Prefix cache hit rate: GPU: 83.21%, CPU: 0.00%
  3%|▎         | 2/64 [00:11<05:31,  5.35s/it]INFO 10-22 11:05:12 metrics.py:351] Avg prompt throughput: 19413.3 tokens/s, Avg generation throughput: 31.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 60 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:05:12 metrics.py:367] Prefix cache hit rate: GPU: 83.27%, CPU: 0.00%
  5%|▍         | 3/64 [00:15<04:58,  4.89s/it]INFO 10-22 11:05:17 metrics.py:351] Avg prompt throughput: 19491.4 tokens/s, Avg generation throughput: 31.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 59 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:05:17 metrics.py:367] Prefix cache hit rate: GPU: 83.34%, CPU: 0.00%
  6%|▋         | 4/64 [00:20<04:38,  4.65s/it]INFO 10-22 11:05:22 metrics.py:351] Avg prompt throughput: 10776.9 tokens/s, Avg generation throughput: 14.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:05:22 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
INFO 10-22 11:05:27 metrics.py:351] Avg prompt throughput: 4520.6 tokens/s, Avg generation throughput: 9.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:05:27 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
INFO 10-22 11:05:32 metrics.py:351] Avg prompt throughput: 3235.4 tokens/s, Avg generation throughput: 6.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:05:32 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
  8%|▊         | 5/64 [00:38<09:28,  9.64s/it]INFO 10-22 11:05:37 metrics.py:351] Avg prompt throughput: 2663.8 tokens/s, Avg generation throughput: 4.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:05:37 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
INFO 10-22 11:05:43 metrics.py:351] Avg prompt throughput: 2429.9 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:05:43 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
INFO 10-22 11:05:48 metrics.py:351] Avg prompt throughput: 10791.3 tokens/s, Avg generation throughput: 20.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 57 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:05:48 metrics.py:367] Prefix cache hit rate: GPU: 83.10%, CPU: 0.00%
  9%|▉         | 6/64 [00:50<09:52, 10.22s/it] 11%|█         | 7/64 [00:54<07:52,  8.29s/it]INFO 10-22 11:05:53 metrics.py:351] Avg prompt throughput: 19105.6 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 56 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:05:53 metrics.py:367] Prefix cache hit rate: GPU: 83.16%, CPU: 0.00%
 12%|█▎        | 8/64 [00:58<06:34,  7.05s/it]INFO 10-22 11:05:58 metrics.py:351] Avg prompt throughput: 17406.4 tokens/s, Avg generation throughput: 22.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 54 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:05:58 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
 14%|█▍        | 9/64 [01:03<05:41,  6.21s/it]INFO 10-22 11:06:03 metrics.py:351] Avg prompt throughput: 19232.7 tokens/s, Avg generation throughput: 31.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 53 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:06:03 metrics.py:367] Prefix cache hit rate: GPU: 83.34%, CPU: 0.00%
 16%|█▌        | 10/64 [01:07<05:04,  5.65s/it]INFO 10-22 11:06:08 metrics.py:351] Avg prompt throughput: 14228.3 tokens/s, Avg generation throughput: 21.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:06:08 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
INFO 10-22 11:06:13 metrics.py:351] Avg prompt throughput: 4832.3 tokens/s, Avg generation throughput: 9.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:06:13 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
INFO 10-22 11:06:18 metrics.py:351] Avg prompt throughput: 3256.7 tokens/s, Avg generation throughput: 6.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:06:18 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
INFO 10-22 11:06:24 metrics.py:351] Avg prompt throughput: 2644.8 tokens/s, Avg generation throughput: 5.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:06:24 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
 17%|█▋        | 11/64 [01:27<08:50, 10.01s/it]INFO 10-22 11:06:29 metrics.py:351] Avg prompt throughput: 2396.3 tokens/s, Avg generation throughput: 1.8 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:06:29 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
INFO 10-22 11:06:34 metrics.py:351] Avg prompt throughput: 1930.2 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 51 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:06:34 metrics.py:367] Prefix cache hit rate: GPU: 83.11%, CPU: 0.00%
 19%|█▉        | 12/64 [01:39<09:08, 10.55s/it]INFO 10-22 11:06:39 metrics.py:351] Avg prompt throughput: 19436.1 tokens/s, Avg generation throughput: 31.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 50 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:06:39 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
 20%|██        | 13/64 [01:43<07:22,  8.67s/it]INFO 10-22 11:06:44 metrics.py:351] Avg prompt throughput: 18914.1 tokens/s, Avg generation throughput: 30.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 49 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:06:44 metrics.py:367] Prefix cache hit rate: GPU: 83.23%, CPU: 0.00%
 22%|██▏       | 14/64 [01:48<06:09,  7.39s/it]INFO 10-22 11:06:49 metrics.py:351] Avg prompt throughput: 18653.6 tokens/s, Avg generation throughput: 30.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 48 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:06:49 metrics.py:367] Prefix cache hit rate: GPU: 83.29%, CPU: 0.00%
 23%|██▎       | 15/64 [01:52<05:18,  6.50s/it]INFO 10-22 11:06:54 metrics.py:351] Avg prompt throughput: 18519.4 tokens/s, Avg generation throughput: 29.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 47 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:06:54 metrics.py:367] Prefix cache hit rate: GPU: 83.35%, CPU: 0.00%
 25%|██▌       | 16/64 [01:56<04:42,  5.90s/it]INFO 10-22 11:06:59 metrics.py:351] Avg prompt throughput: 18601.5 tokens/s, Avg generation throughput: 30.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 46 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:06:59 metrics.py:367] Prefix cache hit rate: GPU: 83.41%, CPU: 0.00%
 27%|██▋       | 17/64 [02:01<04:16,  5.46s/it]INFO 10-22 11:07:05 metrics.py:351] Avg prompt throughput: 7338.8 tokens/s, Avg generation throughput: 7.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:07:05 metrics.py:367] Prefix cache hit rate: GPU: 83.12%, CPU: 0.00%
INFO 10-22 11:07:10 metrics.py:351] Avg prompt throughput: 3435.9 tokens/s, Avg generation throughput: 6.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:07:10 metrics.py:367] Prefix cache hit rate: GPU: 83.12%, CPU: 0.00%
INFO 10-22 11:07:15 metrics.py:351] Avg prompt throughput: 2876.3 tokens/s, Avg generation throughput: 5.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:07:15 metrics.py:367] Prefix cache hit rate: GPU: 83.12%, CPU: 0.00%
INFO 10-22 11:07:20 metrics.py:351] Avg prompt throughput: 2458.1 tokens/s, Avg generation throughput: 5.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:07:20 metrics.py:367] Prefix cache hit rate: GPU: 83.12%, CPU: 0.00%
 28%|██▊       | 18/64 [02:22<07:47, 10.17s/it]INFO 10-22 11:07:25 metrics.py:351] Avg prompt throughput: 2295.5 tokens/s, Avg generation throughput: 0.8 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:07:25 metrics.py:367] Prefix cache hit rate: GPU: 83.12%, CPU: 0.00%
INFO 10-22 11:07:30 metrics.py:351] Avg prompt throughput: 1824.8 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 44 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:07:30 metrics.py:367] Prefix cache hit rate: GPU: 83.18%, CPU: 0.00%
 30%|██▉       | 19/64 [02:34<08:02, 10.73s/it]INFO 10-22 11:07:35 metrics.py:351] Avg prompt throughput: 19089.9 tokens/s, Avg generation throughput: 31.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 43 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:07:35 metrics.py:367] Prefix cache hit rate: GPU: 83.24%, CPU: 0.00%
 31%|███▏      | 20/64 [02:39<06:29,  8.85s/it]INFO 10-22 11:07:40 metrics.py:351] Avg prompt throughput: 18857.9 tokens/s, Avg generation throughput: 30.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 42 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:07:40 metrics.py:367] Prefix cache hit rate: GPU: 83.30%, CPU: 0.00%
 33%|███▎      | 21/64 [02:43<05:23,  7.51s/it]INFO 10-22 11:07:45 metrics.py:351] Avg prompt throughput: 18496.5 tokens/s, Avg generation throughput: 29.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 41 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:07:45 metrics.py:367] Prefix cache hit rate: GPU: 83.36%, CPU: 0.00%
 34%|███▍      | 22/64 [02:47<04:37,  6.60s/it]INFO 10-22 11:07:50 metrics.py:351] Avg prompt throughput: 18664.6 tokens/s, Avg generation throughput: 30.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 40 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:07:50 metrics.py:367] Prefix cache hit rate: GPU: 83.42%, CPU: 0.00%
 36%|███▌      | 23/64 [02:52<04:04,  5.96s/it]INFO 10-22 11:07:55 metrics.py:351] Avg prompt throughput: 8127.1 tokens/s, Avg generation throughput: 9.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:07:55 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
INFO 10-22 11:08:00 metrics.py:351] Avg prompt throughput: 4414.5 tokens/s, Avg generation throughput: 8.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:08:00 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
INFO 10-22 11:08:05 metrics.py:351] Avg prompt throughput: 3192.5 tokens/s, Avg generation throughput: 6.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:08:05 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
INFO 10-22 11:08:10 metrics.py:351] Avg prompt throughput: 2638.1 tokens/s, Avg generation throughput: 5.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:08:10 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
 38%|███▊      | 24/64 [03:13<07:01, 10.53s/it]INFO 10-22 11:08:15 metrics.py:351] Avg prompt throughput: 2401.9 tokens/s, Avg generation throughput: 1.4 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:08:15 metrics.py:367] Prefix cache hit rate: GPU: 83.14%, CPU: 0.00%
INFO 10-22 11:08:21 metrics.py:351] Avg prompt throughput: 1892.9 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 38 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:08:21 metrics.py:367] Prefix cache hit rate: GPU: 83.19%, CPU: 0.00%
 39%|███▉      | 25/64 [03:25<07:05, 10.90s/it]INFO 10-22 11:08:26 metrics.py:351] Avg prompt throughput: 19210.6 tokens/s, Avg generation throughput: 31.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 37 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:08:26 metrics.py:367] Prefix cache hit rate: GPU: 83.25%, CPU: 0.00%
 41%|████      | 26/64 [03:29<05:40,  8.95s/it]INFO 10-22 11:08:31 metrics.py:351] Avg prompt throughput: 18840.5 tokens/s, Avg generation throughput: 30.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 36 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:08:31 metrics.py:367] Prefix cache hit rate: GPU: 83.31%, CPU: 0.00%
 42%|████▏     | 27/64 [03:34<04:41,  7.60s/it]INFO 10-22 11:08:36 metrics.py:351] Avg prompt throughput: 18834.4 tokens/s, Avg generation throughput: 30.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 35 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:08:36 metrics.py:367] Prefix cache hit rate: GPU: 83.37%, CPU: 0.00%
 44%|████▍     | 28/64 [03:38<03:59,  6.65s/it]INFO 10-22 11:08:41 metrics.py:351] Avg prompt throughput: 18758.8 tokens/s, Avg generation throughput: 30.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 34 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:08:41 metrics.py:367] Prefix cache hit rate: GPU: 83.42%, CPU: 0.00%
 45%|████▌     | 29/64 [03:43<03:29,  5.98s/it]INFO 10-22 11:08:46 metrics.py:351] Avg prompt throughput: 7946.6 tokens/s, Avg generation throughput: 8.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:08:46 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO 10-22 11:08:51 metrics.py:351] Avg prompt throughput: 4084.0 tokens/s, Avg generation throughput: 8.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:08:51 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO 10-22 11:08:56 metrics.py:351] Avg prompt throughput: 3109.3 tokens/s, Avg generation throughput: 6.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:08:56 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO 10-22 11:09:01 metrics.py:351] Avg prompt throughput: 2575.2 tokens/s, Avg generation throughput: 5.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:09:01 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
 47%|████▋     | 30/64 [04:04<06:02, 10.65s/it]INFO 10-22 11:09:06 metrics.py:351] Avg prompt throughput: 2347.6 tokens/s, Avg generation throughput: 1.4 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:09:06 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO 10-22 11:09:12 metrics.py:351] Avg prompt throughput: 1862.3 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 32 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:09:12 metrics.py:367] Prefix cache hit rate: GPU: 83.20%, CPU: 0.00%
 48%|████▊     | 31/64 [04:16<06:04, 11.04s/it]INFO 10-22 11:09:17 metrics.py:351] Avg prompt throughput: 19021.8 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 31 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:09:17 metrics.py:367] Prefix cache hit rate: GPU: 83.26%, CPU: 0.00%
 50%|█████     | 32/64 [04:20<04:50,  9.06s/it]INFO 10-22 11:09:22 metrics.py:351] Avg prompt throughput: 18761.7 tokens/s, Avg generation throughput: 30.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 30 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:09:22 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
 52%|█████▏    | 33/64 [04:25<03:58,  7.68s/it]INFO 10-22 11:09:27 metrics.py:351] Avg prompt throughput: 18477.0 tokens/s, Avg generation throughput: 29.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 29 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:09:27 metrics.py:367] Prefix cache hit rate: GPU: 83.37%, CPU: 0.00%
 53%|█████▎    | 34/64 [04:29<03:22,  6.74s/it]INFO 10-22 11:09:32 metrics.py:351] Avg prompt throughput: 9636.1 tokens/s, Avg generation throughput: 12.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:09:32 metrics.py:367] Prefix cache hit rate: GPU: 83.10%, CPU: 0.00%
INFO 10-22 11:09:37 metrics.py:351] Avg prompt throughput: 4764.2 tokens/s, Avg generation throughput: 9.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:09:37 metrics.py:367] Prefix cache hit rate: GPU: 83.10%, CPU: 0.00%
INFO 10-22 11:09:42 metrics.py:351] Avg prompt throughput: 3167.5 tokens/s, Avg generation throughput: 6.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:09:42 metrics.py:367] Prefix cache hit rate: GPU: 83.10%, CPU: 0.00%
INFO 10-22 11:09:47 metrics.py:351] Avg prompt throughput: 2650.6 tokens/s, Avg generation throughput: 5.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:09:47 metrics.py:367] Prefix cache hit rate: GPU: 83.10%, CPU: 0.00%
 55%|█████▍    | 35/64 [04:51<05:25, 11.23s/it]INFO 10-22 11:09:52 metrics.py:351] Avg prompt throughput: 2381.9 tokens/s, Avg generation throughput: 2.4 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:09:52 metrics.py:367] Prefix cache hit rate: GPU: 83.10%, CPU: 0.00%
INFO 10-22 11:09:57 metrics.py:351] Avg prompt throughput: 2184.4 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:09:57 metrics.py:367] Prefix cache hit rate: GPU: 83.10%, CPU: 0.00%
 56%|█████▋    | 36/64 [05:03<05:20, 11.46s/it]INFO 10-22 11:10:02 metrics.py:351] Avg prompt throughput: 16159.4 tokens/s, Avg generation throughput: 25.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 27 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:10:02 metrics.py:367] Prefix cache hit rate: GPU: 83.16%, CPU: 0.00%
 58%|█████▊    | 37/64 [05:08<04:12,  9.35s/it]INFO 10-22 11:10:08 metrics.py:351] Avg prompt throughput: 15717.3 tokens/s, Avg generation throughput: 24.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 25 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:10:08 metrics.py:367] Prefix cache hit rate: GPU: 83.27%, CPU: 0.00%
 59%|█████▉    | 38/64 [05:12<03:25,  7.89s/it]INFO 10-22 11:10:13 metrics.py:351] Avg prompt throughput: 18608.2 tokens/s, Avg generation throughput: 30.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 24 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:10:13 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
 61%|██████    | 39/64 [05:17<02:52,  6.89s/it]INFO 10-22 11:10:19 metrics.py:351] Avg prompt throughput: 11714.4 tokens/s, Avg generation throughput: 17.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:10:19 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:10:24 metrics.py:351] Avg prompt throughput: 5107.1 tokens/s, Avg generation throughput: 10.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:10:24 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:10:29 metrics.py:351] Avg prompt throughput: 3208.4 tokens/s, Avg generation throughput: 6.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:10:29 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:10:34 metrics.py:351] Avg prompt throughput: 2640.0 tokens/s, Avg generation throughput: 5.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:10:34 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
 62%|██████▎   | 40/64 [05:39<04:34, 11.44s/it]INFO 10-22 11:10:39 metrics.py:351] Avg prompt throughput: 2346.6 tokens/s, Avg generation throughput: 2.9 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:10:39 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:10:44 metrics.py:351] Avg prompt throughput: 2177.2 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:10:44 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:10:49 metrics.py:351] Avg prompt throughput: 12372.3 tokens/s, Avg generation throughput: 23.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 22 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:10:49 metrics.py:367] Prefix cache hit rate: GPU: 83.11%, CPU: 0.00%
 64%|██████▍   | 41/64 [05:51<04:28, 11.66s/it] 66%|██████▌   | 42/64 [05:55<03:28,  9.49s/it]INFO 10-22 11:10:54 metrics.py:351] Avg prompt throughput: 19160.3 tokens/s, Avg generation throughput: 27.1 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 21 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:10:54 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
 67%|██████▋   | 43/64 [06:00<02:47,  8.00s/it]INFO 10-22 11:11:00 metrics.py:351] Avg prompt throughput: 16138.8 tokens/s, Avg generation throughput: 23.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 19 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:11:00 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
 69%|██████▉   | 44/64 [06:04<02:18,  6.95s/it]INFO 10-22 11:11:06 metrics.py:351] Avg prompt throughput: 12727.5 tokens/s, Avg generation throughput: 19.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:11:06 metrics.py:367] Prefix cache hit rate: GPU: 83.01%, CPU: 0.00%
INFO 10-22 11:11:11 metrics.py:351] Avg prompt throughput: 5367.3 tokens/s, Avg generation throughput: 10.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:11:11 metrics.py:367] Prefix cache hit rate: GPU: 83.01%, CPU: 0.00%
INFO 10-22 11:11:16 metrics.py:351] Avg prompt throughput: 3239.2 tokens/s, Avg generation throughput: 6.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:11:16 metrics.py:367] Prefix cache hit rate: GPU: 83.01%, CPU: 0.00%
INFO 10-22 11:11:22 metrics.py:351] Avg prompt throughput: 2651.3 tokens/s, Avg generation throughput: 5.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:11:22 metrics.py:367] Prefix cache hit rate: GPU: 83.01%, CPU: 0.00%
 70%|███████   | 45/64 [06:26<03:35, 11.34s/it]INFO 10-22 11:11:27 metrics.py:351] Avg prompt throughput: 2279.4 tokens/s, Avg generation throughput: 2.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:11:27 metrics.py:367] Prefix cache hit rate: GPU: 83.01%, CPU: 0.00%
INFO 10-22 11:11:32 metrics.py:351] Avg prompt throughput: 2108.3 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:11:32 metrics.py:367] Prefix cache hit rate: GPU: 83.02%, CPU: 0.00%
INFO 10-22 11:11:37 metrics.py:351] Avg prompt throughput: 12205.8 tokens/s, Avg generation throughput: 23.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 17 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:11:37 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
 72%|███████▏  | 46/64 [06:38<03:29, 11.66s/it] 73%|███████▎  | 47/64 [06:43<02:40,  9.47s/it]INFO 10-22 11:11:42 metrics.py:351] Avg prompt throughput: 19721.0 tokens/s, Avg generation throughput: 27.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 16 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:11:42 metrics.py:367] Prefix cache hit rate: GPU: 83.12%, CPU: 0.00%
 75%|███████▌  | 48/64 [06:47<02:07,  7.97s/it]INFO 10-22 11:11:47 metrics.py:351] Avg prompt throughput: 15832.9 tokens/s, Avg generation throughput: 22.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 14 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:11:47 metrics.py:367] Prefix cache hit rate: GPU: 83.23%, CPU: 0.00%
 77%|███████▋  | 49/64 [06:52<01:44,  6.94s/it]INFO 10-22 11:11:52 metrics.py:351] Avg prompt throughput: 18643.5 tokens/s, Avg generation throughput: 30.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 13 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:11:52 metrics.py:367] Prefix cache hit rate: GPU: 83.29%, CPU: 0.00%
 78%|███████▊  | 50/64 [06:56<01:27,  6.22s/it]INFO 10-22 11:11:58 metrics.py:351] Avg prompt throughput: 11639.2 tokens/s, Avg generation throughput: 17.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:11:58 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
INFO 10-22 11:12:03 metrics.py:351] Avg prompt throughput: 5294.9 tokens/s, Avg generation throughput: 10.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:12:03 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
INFO 10-22 11:12:09 metrics.py:351] Avg prompt throughput: 3206.6 tokens/s, Avg generation throughput: 6.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:12:09 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
INFO 10-22 11:12:14 metrics.py:351] Avg prompt throughput: 2629.8 tokens/s, Avg generation throughput: 5.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:12:14 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
 80%|███████▉  | 51/64 [07:18<02:22, 10.93s/it]INFO 10-22 11:12:19 metrics.py:351] Avg prompt throughput: 2347.5 tokens/s, Avg generation throughput: 2.7 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:12:19 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
INFO 10-22 11:12:24 metrics.py:351] Avg prompt throughput: 2173.4 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:12:24 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
 81%|████████▏ | 52/64 [07:30<02:15, 11.29s/it]INFO 10-22 11:12:29 metrics.py:351] Avg prompt throughput: 13281.0 tokens/s, Avg generation throughput: 25.5 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 11 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:12:29 metrics.py:367] Prefix cache hit rate: GPU: 83.08%, CPU: 0.00%
 83%|████████▎ | 53/64 [07:35<01:41,  9.23s/it]INFO 10-22 11:12:34 metrics.py:351] Avg prompt throughput: 19752.4 tokens/s, Avg generation throughput: 25.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 10 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:12:34 metrics.py:367] Prefix cache hit rate: GPU: 83.14%, CPU: 0.00%
 84%|████████▍ | 54/64 [07:39<01:17,  7.78s/it]INFO 10-22 11:12:39 metrics.py:351] Avg prompt throughput: 15632.6 tokens/s, Avg generation throughput: 24.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 8 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:12:39 metrics.py:367] Prefix cache hit rate: GPU: 83.24%, CPU: 0.00%
 86%|████████▌ | 55/64 [07:44<01:01,  6.80s/it]INFO 10-22 11:12:46 metrics.py:351] Avg prompt throughput: 12625.5 tokens/s, Avg generation throughput: 19.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:12:46 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 11:12:51 metrics.py:351] Avg prompt throughput: 5170.0 tokens/s, Avg generation throughput: 10.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:12:51 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 11:12:56 metrics.py:351] Avg prompt throughput: 3138.1 tokens/s, Avg generation throughput: 6.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:12:56 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 11:13:01 metrics.py:351] Avg prompt throughput: 2567.2 tokens/s, Avg generation throughput: 5.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:13:01 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
 88%|████████▊ | 56/64 [08:06<01:31, 11.46s/it]INFO 10-22 11:13:06 metrics.py:351] Avg prompt throughput: 2309.7 tokens/s, Avg generation throughput: 3.1 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:13:06 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 11:13:11 metrics.py:351] Avg prompt throughput: 2180.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:13:11 metrics.py:367] Prefix cache hit rate: GPU: 82.99%, CPU: 0.00%
INFO 10-22 11:13:16 metrics.py:351] Avg prompt throughput: 11328.9 tokens/s, Avg generation throughput: 21.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 6 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:13:16 metrics.py:367] Prefix cache hit rate: GPU: 83.04%, CPU: 0.00%
 89%|████████▉ | 57/64 [08:18<01:21, 11.68s/it] 91%|█████████ | 58/64 [08:23<00:56,  9.49s/it]INFO 10-22 11:13:21 metrics.py:351] Avg prompt throughput: 19072.6 tokens/s, Avg generation throughput: 29.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 5 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:13:21 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
 92%|█████████▏| 59/64 [08:27<00:39,  7.97s/it]INFO 10-22 11:13:27 metrics.py:351] Avg prompt throughput: 17137.5 tokens/s, Avg generation throughput: 22.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 3 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:13:27 metrics.py:367] Prefix cache hit rate: GPU: 83.20%, CPU: 0.00%
 94%|█████████▍| 60/64 [08:31<00:27,  6.89s/it]INFO 10-22 11:13:33 metrics.py:351] Avg prompt throughput: 12946.6 tokens/s, Avg generation throughput: 20.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:13:33 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
INFO 10-22 11:13:38 metrics.py:351] Avg prompt throughput: 5490.6 tokens/s, Avg generation throughput: 11.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:13:38 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
INFO 10-22 11:13:43 metrics.py:351] Avg prompt throughput: 3433.2 tokens/s, Avg generation throughput: 6.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:13:43 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
INFO 10-22 11:13:48 metrics.py:351] Avg prompt throughput: 2677.9 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:13:48 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
 95%|█████████▌| 61/64 [08:52<00:32, 10.90s/it]INFO 10-22 11:13:54 metrics.py:351] Avg prompt throughput: 2560.7 tokens/s, Avg generation throughput: 1.8 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:13:54 metrics.py:367] Prefix cache hit rate: GPU: 82.95%, CPU: 0.00%
INFO 10-22 11:13:59 metrics.py:351] Avg prompt throughput: 1737.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 1 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:13:59 metrics.py:367] Prefix cache hit rate: GPU: 83.00%, CPU: 0.00%
 97%|█████████▋| 62/64 [09:04<00:22, 11.29s/it]INFO 10-22 11:14:04 metrics.py:351] Avg prompt throughput: 16820.6 tokens/s, Avg generation throughput: 26.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:14:04 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
 98%|█████████▊| 63/64 [09:08<00:09,  9.30s/it]INFO 10-22 11:14:09 metrics.py:351] Avg prompt throughput: 15977.2 tokens/s, Avg generation throughput: 36.8 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:14:09 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
100%|██████████| 64/64 [09:12<00:00,  7.57s/it]100%|██████████| 64/64 [09:12<00:00,  8.63s/it]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  552.43    
Total input tokens:                      5242880   
Total generated tokens:                  8190      
Request throughput (req/s):              0.12      
Output token throughput (tok/s):         14.83     
Total Token throughput (tok/s):          9505.33   
---------------Time to First Token----------------
Mean TTFT (ms):                          263238.11 
Median TTFT (ms):                        257852.31 
P99 TTFT (ms):                           543335.99 
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          43.46     
Median TPOT (ms):                        23.54     
P99 TPOT (ms):                           147.43    
---------------Inter-token Latency----------------
Mean ITL (ms):                           43.42     
Median ITL (ms):                         23.82     
P99 ITL (ms):                            210.54    
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_81920.json             --request-rate 16             --ignore-eos             --ib-input-len 81920             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_81920.json             --request-rate 16             --ignore-eos             --ib-input-len 81920             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_16_in_81920.json             --request-rate 16             --ignore-eos             --ib-input-len 81920             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for qps in $qps_list
+ [[ 64 == *\i\n\f* ]]
+ new_test_name=vllm_qwen7B_ib_prefix_qps_64
+ backend=vllm
+ [[ vllm == *\v\l\l\m* ]]
+ backend=vllm
+ [[ ib = \i\b ]]
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_64_in_2048
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_2048.json             --request-rate 64             --ignore-eos             --ib-input-len 2048             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 64'
Running test case vllm_qwen7B_ib_prefix with qps 64
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_2048.json             --request-rate 64             --ignore-eos             --ib-input-len 2048             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_2048.json             --request-rate 64             --ignore-eos             --ib-input-len 2048             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_2048.json             --request-rate 64             --ignore-eos             --ib-input-len 2048             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_64_in_2048.json --request-rate 64 --ignore-eos --ib-input-len 2048
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 11:14:19 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 6.7 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:14:19 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
INFO 10-22 11:14:29 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:14:29 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
INFO 10-22 11:14:39 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:14:39 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
INFO 10-22 11:14:49 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:14:49 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
INFO:     127.0.0.1:56286 - "POST /v1/completions HTTP/1.1" 200 OK
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=64.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_64_in_2048.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=2048, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 64.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:56294 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56304 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56308 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56316 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56332 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56344 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56352 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56356 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56364 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56370 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56374 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56382 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56388 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56396 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56402 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56404 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56418 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56426 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56436 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56452 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56460 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56466 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56476 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56486 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56500 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56514 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56530 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56536 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56546 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56562 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56568 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56582 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56598 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56610 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56620 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56624 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56636 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56640 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56654 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56668 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56676 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56678 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56682 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56686 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56698 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56708 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56710 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56712 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56724 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56738 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56744 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56746 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56762 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56770 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56776 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56778 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56786 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56798 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56804 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56814 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56826 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56828 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56842 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:56858 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 11:14:54 metrics.py:351] Avg prompt throughput: 11775.1 tokens/s, Avg generation throughput: 341.5 tokens/s, Running: 29 reqs, Swapped: 0 reqs, Pending: 35 reqs, GPU KV cache usage: 3.7%, CPU KV cache usage: 0.0%.
INFO 10-22 11:14:54 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
  2%|▏         | 1/64 [00:03<03:25,  3.27s/it]  3%|▎         | 2/64 [00:03<01:27,  1.41s/it]  6%|▋         | 4/64 [00:03<00:34,  1.72it/s]  8%|▊         | 5/64 [00:03<00:27,  2.15it/s]  9%|▉         | 6/64 [00:03<00:21,  2.72it/s] 12%|█▎        | 8/64 [00:04<00:13,  4.21it/s] 14%|█▍        | 9/64 [00:04<00:11,  4.87it/s] 16%|█▌        | 10/64 [00:04<00:10,  4.94it/s] 17%|█▋        | 11/64 [00:04<00:10,  5.28it/s] 20%|██        | 13/64 [00:04<00:07,  6.90it/s] 23%|██▎       | 15/64 [00:04<00:06,  8.15it/s] 27%|██▋       | 17/64 [00:05<00:05,  8.76it/s] 30%|██▉       | 19/64 [00:05<00:04,  9.52it/s] 33%|███▎      | 21/64 [00:05<00:04,  9.77it/s] 36%|███▌      | 23/64 [00:05<00:03, 10.26it/s] 39%|███▉      | 25/64 [00:05<00:03, 10.30it/s] 42%|████▏     | 27/64 [00:05<00:03, 10.63it/s] 45%|████▌     | 29/64 [00:06<00:03, 10.54it/s] 48%|████▊     | 31/64 [00:06<00:03, 10.83it/s] 52%|█████▏    | 33/64 [00:06<00:02, 10.65it/s] 55%|█████▍    | 35/64 [00:06<00:02, 11.06it/s] 58%|█████▊    | 37/64 [00:06<00:02, 11.16it/s] 61%|██████    | 39/64 [00:07<00:02, 11.63it/s] 64%|██████▍   | 41/64 [00:07<00:01, 11.64it/s] 67%|██████▋   | 43/64 [00:07<00:01, 12.07it/s] 70%|███████   | 45/64 [00:07<00:01, 12.04it/s] 73%|███████▎  | 47/64 [00:07<00:01, 12.06it/s]INFO 10-22 11:14:59 metrics.py:351] Avg prompt throughput: 14804.3 tokens/s, Avg generation throughput: 1200.6 tokens/s, Running: 17 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 3.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:14:59 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
 77%|███████▋  | 49/64 [00:07<00:01, 12.53it/s] 80%|███████▉  | 51/64 [00:08<00:01, 12.54it/s] 83%|████████▎ | 53/64 [00:08<00:00, 13.01it/s] 86%|████████▌ | 55/64 [00:08<00:00, 13.00it/s] 89%|████████▉ | 57/64 [00:08<00:00, 13.66it/s] 92%|█████████▏| 59/64 [00:08<00:00, 13.81it/s] 95%|█████████▌| 61/64 [00:08<00:00, 14.58it/s] 98%|█████████▊| 63/64 [00:08<00:00, 14.99it/s]100%|██████████| 64/64 [00:08<00:00,  7.21it/s]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  8.88      
Total input tokens:                      131072    
Total generated tokens:                  8192      
Request throughput (req/s):              7.21      
Output token throughput (tok/s):         922.73    
Total Token throughput (tok/s):          15686.35  
---------------Time to First Token----------------
Mean TTFT (ms):                          2766.22   
Median TTFT (ms):                        2793.98   
P99 TTFT (ms):                           5506.90   
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          23.64     
Median TPOT (ms):                        24.54     
P99 TPOT (ms):                           28.56     
---------------Inter-token Latency----------------
Mean ITL (ms):                           23.63     
Median ITL (ms):                         20.82     
P99 ITL (ms):                            103.79    
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_2048.json             --request-rate 64             --ignore-eos             --ib-input-len 2048             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_2048.json             --request-rate 64             --ignore-eos             --ib-input-len 2048             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_2048.json             --request-rate 64             --ignore-eos             --ib-input-len 2048             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_64_in_10240
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_10240.json             --request-rate 64             --ignore-eos             --ib-input-len 10240             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 64'
Running test case vllm_qwen7B_ib_prefix with qps 64
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_10240.json             --request-rate 64             --ignore-eos             --ib-input-len 10240             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_10240.json             --request-rate 64             --ignore-eos             --ib-input-len 10240             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_10240.json             --request-rate 64             --ignore-eos             --ib-input-len 10240             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_64_in_10240.json --request-rate 64 --ignore-eos --ib-input-len 10240
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 11:15:09 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 59.5 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:15:09 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
INFO 10-22 11:15:19 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:15:19 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
INFO 10-22 11:15:29 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:15:29 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
INFO 10-22 11:15:39 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:15:39 metrics.py:367] Prefix cache hit rate: GPU: 83.05%, CPU: 0.00%
INFO:     127.0.0.1:42406 - "POST /v1/completions HTTP/1.1" 200 OK
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=64.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_64_in_10240.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=10240, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 64.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:42414 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42428 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42434 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42440 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42446 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42458 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42462 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42476 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42490 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42496 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42504 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42510 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42512 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42528 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42540 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42552 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42554 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42556 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42570 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42580 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42590 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42600 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42616 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42630 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42632 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42636 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42644 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42656 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42672 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42682 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42686 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42700 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42710 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42718 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42730 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42722 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42742 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42752 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42754 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42764 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42770 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42774 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42778 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42784 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42798 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 11:15:44 metrics.py:351] Avg prompt throughput: 7759.3 tokens/s, Avg generation throughput: 36.6 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 42 reqs, GPU KV cache usage: 3.1%, CPU KV cache usage: 0.0%.
INFO 10-22 11:15:44 metrics.py:367] Prefix cache hit rate: GPU: 83.04%, CPU: 0.00%
INFO:     127.0.0.1:42814 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42822 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42834 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42848 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42864 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42870 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42872 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42882 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42884 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42900 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42914 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42918 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42920 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42936 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42944 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42948 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42950 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42964 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:42972 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:03<03:35,  3.42s/it]  3%|▎         | 2/64 [00:03<01:41,  1.64s/it]  5%|▍         | 3/64 [00:04<01:05,  1.08s/it]  6%|▋         | 4/64 [00:04<00:48,  1.25it/s]  8%|▊         | 5/64 [00:05<00:41,  1.42it/s]INFO 10-22 11:15:49 metrics.py:351] Avg prompt throughput: 18685.6 tokens/s, Avg generation throughput: 202.3 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 6.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:15:49 metrics.py:367] Prefix cache hit rate: GPU: 83.04%, CPU: 0.00%
  9%|▉         | 6/64 [00:06<00:47,  1.23it/s] 11%|█         | 7/64 [00:06<00:38,  1.49it/s] 12%|█▎        | 8/64 [00:06<00:32,  1.71it/s] 14%|█▍        | 9/64 [00:07<00:28,  1.90it/s] 16%|█▌        | 10/64 [00:07<00:26,  2.07it/s] 17%|█▋        | 11/64 [00:08<00:24,  2.19it/s] 19%|█▉        | 12/64 [00:08<00:24,  2.12it/s] 20%|██        | 13/64 [00:09<00:31,  1.60it/s] 22%|██▏       | 14/64 [00:10<00:27,  1.79it/s] 23%|██▎       | 15/64 [00:10<00:25,  1.96it/s] 25%|██▌       | 16/64 [00:10<00:22,  2.12it/s]INFO 10-22 11:15:54 metrics.py:351] Avg prompt throughput: 22065.5 tokens/s, Avg generation throughput: 276.1 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 41 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:15:54 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
 27%|██▋       | 17/64 [00:11<00:21,  2.22it/s] 28%|██▊       | 18/64 [00:11<00:20,  2.24it/s] 30%|██▉       | 19/64 [00:12<00:27,  1.61it/s] 31%|███▏      | 20/64 [00:13<00:24,  1.80it/s] 33%|███▎      | 21/64 [00:13<00:21,  1.99it/s] 34%|███▍      | 22/64 [00:13<00:19,  2.12it/s] 36%|███▌      | 23/64 [00:14<00:18,  2.23it/s] 38%|███▊      | 24/64 [00:14<00:17,  2.28it/s] 39%|███▉      | 25/64 [00:15<00:24,  1.62it/s]INFO 10-22 11:15:59 metrics.py:351] Avg prompt throughput: 18999.2 tokens/s, Avg generation throughput: 237.4 tokens/s, Running: 8 reqs, Swapped: 0 reqs, Pending: 31 reqs, GPU KV cache usage: 6.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:15:59 metrics.py:367] Prefix cache hit rate: GPU: 83.08%, CPU: 0.00%
 41%|████      | 26/64 [00:16<00:20,  1.82it/s] 42%|████▏     | 27/64 [00:16<00:18,  2.00it/s] 44%|████▍     | 28/64 [00:16<00:16,  2.13it/s] 45%|████▌     | 29/64 [00:17<00:16,  2.15it/s] 47%|████▋     | 30/64 [00:18<00:22,  1.50it/s] 48%|████▊     | 31/64 [00:18<00:19,  1.70it/s] 50%|█████     | 32/64 [00:19<00:16,  1.89it/s] 52%|█████▏    | 33/64 [00:19<00:15,  2.03it/s] 53%|█████▎    | 34/64 [00:20<00:16,  1.78it/s]INFO 10-22 11:16:04 metrics.py:351] Avg prompt throughput: 17799.7 tokens/s, Avg generation throughput: 222.5 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 9.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:16:04 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
 55%|█████▍    | 35/64 [00:21<00:20,  1.44it/s] 56%|█████▋    | 36/64 [00:21<00:17,  1.64it/s] 58%|█████▊    | 37/64 [00:22<00:14,  1.83it/s] 59%|█████▉    | 38/64 [00:22<00:12,  2.00it/s] 61%|██████    | 39/64 [00:23<00:13,  1.81it/s] 62%|██████▎   | 40/64 [00:24<00:16,  1.43it/s] 64%|██████▍   | 41/64 [00:24<00:13,  1.65it/s] 66%|██████▌   | 42/64 [00:25<00:11,  1.83it/s] 67%|██████▋   | 43/64 [00:25<00:10,  1.99it/s] 69%|██████▉   | 44/64 [00:25<00:09,  2.13it/s]INFO 10-22 11:16:09 metrics.py:351] Avg prompt throughput: 20180.6 tokens/s, Avg generation throughput: 252.3 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 13 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:16:09 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
 70%|███████   | 45/64 [00:26<00:08,  2.23it/s] 72%|███████▏  | 46/64 [00:26<00:07,  2.30it/s] 73%|███████▎  | 47/64 [00:27<00:07,  2.38it/s] 75%|███████▌  | 48/64 [00:27<00:06,  2.40it/s] 77%|███████▋  | 49/64 [00:27<00:06,  2.44it/s] 78%|███████▊  | 50/64 [00:28<00:05,  2.45it/s] 80%|███████▉  | 51/64 [00:28<00:05,  2.45it/s] 81%|████████▏ | 52/64 [00:29<00:04,  2.49it/s] 83%|████████▎ | 53/64 [00:29<00:04,  2.48it/s] 84%|████████▍ | 54/64 [00:29<00:04,  2.48it/s] 86%|████████▌ | 55/64 [00:30<00:03,  2.51it/s] 88%|████████▊ | 56/64 [00:30<00:03,  2.50it/s]INFO 10-22 11:16:14 metrics.py:351] Avg prompt throughput: 25586.9 tokens/s, Avg generation throughput: 320.3 tokens/s, Running: 7 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 6.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:16:14 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
 89%|████████▉ | 57/64 [00:31<00:02,  2.49it/s] 91%|█████████ | 58/64 [00:31<00:02,  2.55it/s] 92%|█████████▏| 59/64 [00:31<00:01,  2.62it/s] 94%|█████████▍| 60/64 [00:32<00:01,  2.70it/s] 95%|█████████▌| 61/64 [00:32<00:01,  2.81it/s] 97%|█████████▋| 62/64 [00:32<00:00,  2.89it/s] 98%|█████████▊| 63/64 [00:33<00:00,  3.01it/s]100%|██████████| 64/64 [00:33<00:00,  3.06it/s]100%|██████████| 64/64 [00:33<00:00,  1.92it/s]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  33.41     
Total input tokens:                      655360    
Total generated tokens:                  8192      
Request throughput (req/s):              1.92      
Output token throughput (tok/s):         245.20    
Total Token throughput (tok/s):          19861.47  
---------------Time to First Token----------------
Mean TTFT (ms):                          15688.48  
Median TTFT (ms):                        15596.21  
P99 TTFT (ms):                           30037.29  
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          23.43     
Median TPOT (ms):                        24.41     
P99 TPOT (ms):                           31.95     
---------------Inter-token Latency----------------
Mean ITL (ms):                           23.42     
Median ITL (ms):                         18.21     
P99 ITL (ms):                            64.04     
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_10240.json             --request-rate 64             --ignore-eos             --ib-input-len 10240             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_10240.json             --request-rate 64             --ignore-eos             --ib-input-len 10240             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_10240.json             --request-rate 64             --ignore-eos             --ib-input-len 10240             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_64_in_40960
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_40960.json             --request-rate 64             --ignore-eos             --ib-input-len 40960             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 64'
Running test case vllm_qwen7B_ib_prefix with qps 64
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_40960.json             --request-rate 64             --ignore-eos             --ib-input-len 40960             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_40960.json             --request-rate 64             --ignore-eos             --ib-input-len 40960             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_40960.json             --request-rate 64             --ignore-eos             --ib-input-len 40960             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_64_in_40960.json --request-rate 64 --ignore-eos --ib-input-len 40960
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 11:16:29 metrics.py:351] Avg prompt throughput: 553.8 tokens/s, Avg generation throughput: 37.5 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:16:29 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
INFO 10-22 11:16:39 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:16:39 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
INFO 10-22 11:16:49 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:16:49 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
INFO:     127.0.0.1:52994 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 11:16:55 metrics.py:351] Avg prompt throughput: 83.8 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:16:55 metrics.py:367] Prefix cache hit rate: GPU: 83.08%, CPU: 0.00%
INFO 10-22 11:17:00 metrics.py:351] Avg prompt throughput: 7665.2 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:17:00 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=64.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_64_in_40960.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=40960, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 64.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:35038 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35052 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35058 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35068 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35082 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35088 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35098 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35110 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35122 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35128 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35142 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35144 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35152 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35166 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35172 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35188 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35202 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35218 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 11:17:05 metrics.py:351] Avg prompt throughput: 13062.4 tokens/s, Avg generation throughput: 34.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 16 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:17:05 metrics.py:367] Prefix cache hit rate: GPU: 83.14%, CPU: 0.00%
INFO:     127.0.0.1:35220 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35230 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35236 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35252 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35266 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35270 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35276 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35282 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35288 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35294 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35304 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35306 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35314 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35330 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35340 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35346 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35348 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35354 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35356 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35370 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35378 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35384 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35398 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35400 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35416 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35422 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35424 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35440 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35452 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35464 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35478 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35490 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35500 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35510 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35514 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35516 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35528 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35532 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35542 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35554 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35568 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35580 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35592 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35594 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35604 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:35620 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:04<04:37,  4.41s/it]  3%|▎         | 2/64 [00:06<02:59,  2.89s/it]INFO 10-22 11:17:10 metrics.py:351] Avg prompt throughput: 21488.6 tokens/s, Avg generation throughput: 64.3 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 59 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:17:10 metrics.py:367] Prefix cache hit rate: GPU: 83.21%, CPU: 0.00%
  5%|▍         | 3/64 [00:08<02:27,  2.42s/it]  6%|▋         | 4/64 [00:11<02:56,  2.95s/it]INFO 10-22 11:17:15 metrics.py:351] Avg prompt throughput: 11830.7 tokens/s, Avg generation throughput: 38.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:17:15 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
  8%|▊         | 5/64 [00:16<03:38,  3.71s/it]INFO 10-22 11:17:20 metrics.py:351] Avg prompt throughput: 10512.2 tokens/s, Avg generation throughput: 30.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 57 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:17:20 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
  9%|▉         | 6/64 [00:18<02:57,  3.06s/it] 11%|█         | 7/64 [00:20<02:32,  2.67s/it] 12%|█▎        | 8/64 [00:22<02:14,  2.40s/it]INFO 10-22 11:17:25 metrics.py:351] Avg prompt throughput: 22084.8 tokens/s, Avg generation throughput: 71.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 54 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:17:25 metrics.py:367] Prefix cache hit rate: GPU: 83.22%, CPU: 0.00%
 14%|█▍        | 9/64 [00:24<02:02,  2.22s/it]INFO 10-22 11:17:30 metrics.py:351] Avg prompt throughput: 14737.4 tokens/s, Avg generation throughput: 46.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 11:17:30 metrics.py:367] Prefix cache hit rate: GPU: 83.16%, CPU: 0.00%
 16%|█▌        | 10/64 [00:28<02:33,  2.84s/it]INFO 10-22 11:17:36 metrics.py:351] Avg prompt throughput: 4275.5 tokens/s, Avg generation throughput: 10.2 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 51 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:17:36 metrics.py:367] Prefix cache hit rate: GPU: 83.19%, CPU: 0.00%
 17%|█▋        | 11/64 [00:33<03:11,  3.62s/it] 19%|█▉        | 12/64 [00:35<02:39,  3.08s/it] 20%|██        | 13/64 [00:37<02:17,  2.70s/it]INFO 10-22 11:17:41 metrics.py:351] Avg prompt throughput: 22551.6 tokens/s, Avg generation throughput: 72.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 49 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:17:41 metrics.py:367] Prefix cache hit rate: GPU: 83.24%, CPU: 0.00%
 22%|██▏       | 14/64 [00:39<02:01,  2.44s/it] 23%|██▎       | 15/64 [00:41<01:50,  2.26s/it]INFO 10-22 11:17:46 metrics.py:351] Avg prompt throughput: 22082.6 tokens/s, Avg generation throughput: 70.3 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 46 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:17:46 metrics.py:367] Prefix cache hit rate: GPU: 83.31%, CPU: 0.00%
 25%|██▌       | 16/64 [00:42<01:42,  2.13s/it] 27%|██▋       | 17/64 [00:46<02:04,  2.64s/it]INFO 10-22 11:17:51 metrics.py:351] Avg prompt throughput: 9800.0 tokens/s, Avg generation throughput: 30.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:17:51 metrics.py:367] Prefix cache hit rate: GPU: 83.23%, CPU: 0.00%
 28%|██▊       | 18/64 [00:52<02:44,  3.57s/it]INFO 10-22 11:17:56 metrics.py:351] Avg prompt throughput: 9008.1 tokens/s, Avg generation throughput: 27.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 44 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:17:56 metrics.py:367] Prefix cache hit rate: GPU: 83.25%, CPU: 0.00%
 30%|██▉       | 19/64 [00:54<02:17,  3.06s/it] 31%|███▏      | 20/64 [00:56<01:58,  2.70s/it]INFO 10-22 11:18:01 metrics.py:351] Avg prompt throughput: 21896.4 tokens/s, Avg generation throughput: 69.9 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 41 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:18:01 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
 33%|███▎      | 21/64 [00:58<01:44,  2.44s/it] 34%|███▍      | 22/64 [00:59<01:35,  2.27s/it]INFO 10-22 11:18:06 metrics.py:351] Avg prompt throughput: 15654.6 tokens/s, Avg generation throughput: 48.4 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 11:18:06 metrics.py:367] Prefix cache hit rate: GPU: 83.27%, CPU: 0.00%
 36%|███▌      | 23/64 [01:04<01:58,  2.89s/it]INFO 10-22 11:18:11 metrics.py:351] Avg prompt throughput: 4051.5 tokens/s, Avg generation throughput: 10.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:18:11 metrics.py:367] Prefix cache hit rate: GPU: 83.27%, CPU: 0.00%
 38%|███▊      | 24/64 [01:10<02:36,  3.91s/it] 39%|███▉      | 25/64 [01:12<02:08,  3.29s/it]INFO 10-22 11:18:16 metrics.py:351] Avg prompt throughput: 16408.1 tokens/s, Avg generation throughput: 51.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 37 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:18:16 metrics.py:367] Prefix cache hit rate: GPU: 83.31%, CPU: 0.00%
 41%|████      | 26/64 [01:14<01:48,  2.87s/it] 42%|████▏     | 27/64 [01:16<01:35,  2.57s/it]INFO 10-22 11:18:21 metrics.py:351] Avg prompt throughput: 21631.2 tokens/s, Avg generation throughput: 70.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 34 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:18:21 metrics.py:367] Prefix cache hit rate: GPU: 83.38%, CPU: 0.00%
 44%|████▍     | 28/64 [01:18<01:24,  2.36s/it] 45%|████▌     | 29/64 [01:22<01:42,  2.92s/it]INFO 10-22 11:18:26 metrics.py:351] Avg prompt throughput: 8917.8 tokens/s, Avg generation throughput: 27.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:18:26 metrics.py:367] Prefix cache hit rate: GPU: 83.30%, CPU: 0.00%
INFO 10-22 11:18:31 metrics.py:351] Avg prompt throughput: 4949.8 tokens/s, Avg generation throughput: 14.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 32 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 11:18:31 metrics.py:367] Prefix cache hit rate: GPU: 83.33%, CPU: 0.00%
 47%|████▋     | 30/64 [01:28<02:13,  3.94s/it] 48%|████▊     | 31/64 [01:30<01:49,  3.32s/it] 50%|█████     | 32/64 [01:32<01:32,  2.88s/it]INFO 10-22 11:18:36 metrics.py:351] Avg prompt throughput: 22382.3 tokens/s, Avg generation throughput: 68.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 30 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:18:36 metrics.py:367] Prefix cache hit rate: GPU: 83.37%, CPU: 0.00%
 52%|█████▏    | 33/64 [01:34<01:20,  2.58s/it]INFO 10-22 11:18:41 metrics.py:351] Avg prompt throughput: 12549.0 tokens/s, Avg generation throughput: 43.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 11:18:41 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
 53%|█████▎    | 34/64 [01:38<01:31,  3.06s/it]INFO 10-22 11:18:46 metrics.py:351] Avg prompt throughput: 3460.3 tokens/s, Avg generation throughput: 7.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:18:46 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
 55%|█████▍    | 35/64 [01:44<01:58,  4.08s/it] 56%|█████▋    | 36/64 [01:46<01:35,  3.42s/it]INFO 10-22 11:18:51 metrics.py:351] Avg prompt throughput: 19143.6 tokens/s, Avg generation throughput: 61.8 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 25 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:18:51 metrics.py:367] Prefix cache hit rate: GPU: 83.39%, CPU: 0.00%
 58%|█████▊    | 37/64 [01:48<01:19,  2.96s/it] 59%|█████▉    | 38/64 [01:50<01:08,  2.64s/it]INFO 10-22 11:18:56 metrics.py:351] Avg prompt throughput: 16155.8 tokens/s, Avg generation throughput: 50.2 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 11:18:56 metrics.py:367] Prefix cache hit rate: GPU: 83.30%, CPU: 0.00%
 61%|██████    | 39/64 [01:55<01:26,  3.47s/it]INFO 10-22 11:19:01 metrics.py:351] Avg prompt throughput: 3961.1 tokens/s, Avg generation throughput: 12.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:19:01 metrics.py:367] Prefix cache hit rate: GPU: 83.30%, CPU: 0.00%
 62%|██████▎   | 40/64 [02:02<01:44,  4.33s/it]INFO 10-22 11:19:06 metrics.py:351] Avg prompt throughput: 10686.4 tokens/s, Avg generation throughput: 32.1 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 21 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:19:06 metrics.py:367] Prefix cache hit rate: GPU: 83.34%, CPU: 0.00%
 64%|██████▍   | 41/64 [02:04<01:22,  3.60s/it] 66%|██████▌   | 42/64 [02:06<01:07,  3.08s/it] 67%|██████▋   | 43/64 [02:07<00:57,  2.72s/it]INFO 10-22 11:19:11 metrics.py:351] Avg prompt throughput: 22512.1 tokens/s, Avg generation throughput: 71.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 19 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:19:11 metrics.py:367] Prefix cache hit rate: GPU: 83.39%, CPU: 0.00%
INFO 10-22 11:19:16 metrics.py:351] Avg prompt throughput: 5653.4 tokens/s, Avg generation throughput: 20.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:19:16 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
 69%|██████▉   | 44/64 [02:13<01:12,  3.60s/it]INFO 10-22 11:19:21 metrics.py:351] Avg prompt throughput: 3533.9 tokens/s, Avg generation throughput: 7.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:19:21 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
 70%|███████   | 45/64 [02:20<01:24,  4.46s/it] 72%|███████▏  | 46/64 [02:21<01:06,  3.68s/it]INFO 10-22 11:19:26 metrics.py:351] Avg prompt throughput: 19985.9 tokens/s, Avg generation throughput: 65.4 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 15 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:19:26 metrics.py:367] Prefix cache hit rate: GPU: 83.34%, CPU: 0.00%
 73%|███████▎  | 47/64 [02:23<00:53,  3.13s/it] 75%|███████▌  | 48/64 [02:25<00:44,  2.76s/it] 77%|███████▋  | 49/64 [02:27<00:37,  2.49s/it]INFO 10-22 11:19:32 metrics.py:351] Avg prompt throughput: 20196.7 tokens/s, Avg generation throughput: 60.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:19:32 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
 78%|███████▊  | 50/64 [02:32<00:46,  3.29s/it]INFO 10-22 11:19:37 metrics.py:351] Avg prompt throughput: 5355.0 tokens/s, Avg generation throughput: 19.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:19:37 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
INFO 10-22 11:19:42 metrics.py:351] Avg prompt throughput: 4946.5 tokens/s, Avg generation throughput: 14.4 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 11 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 11:19:42 metrics.py:367] Prefix cache hit rate: GPU: 83.30%, CPU: 0.00%
 80%|███████▉  | 51/64 [02:39<00:55,  4.30s/it] 81%|████████▏ | 52/64 [02:41<00:42,  3.56s/it] 83%|████████▎ | 53/64 [02:43<00:33,  3.06s/it]INFO 10-22 11:19:47 metrics.py:351] Avg prompt throughput: 21693.7 tokens/s, Avg generation throughput: 66.0 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 8 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:19:47 metrics.py:367] Prefix cache hit rate: GPU: 83.37%, CPU: 0.00%
 84%|████████▍ | 54/64 [02:44<00:27,  2.70s/it]INFO 10-22 11:19:52 metrics.py:351] Avg prompt throughput: 11387.6 tokens/s, Avg generation throughput: 38.6 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 11:19:52 metrics.py:367] Prefix cache hit rate: GPU: 83.26%, CPU: 0.00%
 86%|████████▌ | 55/64 [02:50<00:32,  3.61s/it]INFO 10-22 11:19:57 metrics.py:351] Avg prompt throughput: 3678.1 tokens/s, Avg generation throughput: 9.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:19:57 metrics.py:367] Prefix cache hit rate: GPU: 83.26%, CPU: 0.00%
 88%|████████▊ | 56/64 [02:57<00:35,  4.44s/it] 89%|████████▉ | 57/64 [02:58<00:25,  3.67s/it]INFO 10-22 11:20:02 metrics.py:351] Avg prompt throughput: 15061.0 tokens/s, Avg generation throughput: 48.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 5 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:20:02 metrics.py:367] Prefix cache hit rate: GPU: 83.30%, CPU: 0.00%
 91%|█████████ | 58/64 [03:00<00:18,  3.13s/it] 92%|█████████▏| 59/64 [03:02<00:13,  2.75s/it]INFO 10-22 11:20:07 metrics.py:351] Avg prompt throughput: 19192.9 tokens/s, Avg generation throughput: 57.8 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:20:07 metrics.py:367] Prefix cache hit rate: GPU: 83.24%, CPU: 0.00%
 94%|█████████▍| 60/64 [03:08<00:14,  3.62s/it]INFO 10-22 11:20:12 metrics.py:351] Avg prompt throughput: 4854.9 tokens/s, Avg generation throughput: 18.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:20:12 metrics.py:367] Prefix cache hit rate: GPU: 83.24%, CPU: 0.00%
INFO 10-22 11:20:17 metrics.py:351] Avg prompt throughput: 5551.8 tokens/s, Avg generation throughput: 16.6 tokens/s, Running: 3 reqs, Swapped: 0 reqs, Pending: 1 reqs, GPU KV cache usage: 24.4%, CPU KV cache usage: 0.0%.
INFO 10-22 11:20:17 metrics.py:367] Prefix cache hit rate: GPU: 83.26%, CPU: 0.00%
 95%|█████████▌| 61/64 [03:14<00:13,  4.42s/it] 97%|█████████▋| 62/64 [03:16<00:07,  3.65s/it] 98%|█████████▊| 63/64 [03:18<00:03,  3.04s/it]INFO 10-22 11:20:22 metrics.py:351] Avg prompt throughput: 13734.1 tokens/s, Avg generation throughput: 71.1 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 12.2%, CPU KV cache usage: 0.0%.
INFO 10-22 11:20:22 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
100%|██████████| 64/64 [03:19<00:00,  2.57s/it]100%|██████████| 64/64 [03:19<00:00,  3.12s/it]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  199.51    
Total input tokens:                      2621440   
Total generated tokens:                  8191      
Request throughput (req/s):              0.32      
Output token throughput (tok/s):         41.06     
Total Token throughput (tok/s):          13180.45  
---------------Time to First Token----------------
Mean TTFT (ms):                          92982.55  
Median TTFT (ms):                        89909.55  
P99 TTFT (ms):                           195016.88 
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          34.45     
Median TPOT (ms):                        22.11     
P99 TPOT (ms):                           84.82     
---------------Inter-token Latency----------------
Mean ITL (ms):                           34.44     
Median ITL (ms):                         20.46     
P99 ITL (ms):                            161.44    
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_40960.json             --request-rate 64             --ignore-eos             --ib-input-len 40960             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_40960.json             --request-rate 64             --ignore-eos             --ib-input-len 40960             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_40960.json             --request-rate 64             --ignore-eos             --ib-input-len 40960             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ for ib_input_len in $ib_input_len_list
+ new_test_name=vllm_qwen7B_ib_prefix_qps_64_in_81920
+ client_command='python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_81920.json             --request-rate 64             --ignore-eos             --ib-input-len 81920             '
+ echo 'Running test case vllm_qwen7B_ib_prefix with qps 64'
Running test case vllm_qwen7B_ib_prefix with qps 64
+ echo 'Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_81920.json             --request-rate 64             --ignore-eos             --ib-input-len 81920             '
Client command: python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_81920.json             --request-rate 64             --ignore-eos             --ib-input-len 81920             
+ eval 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_81920.json             --request-rate 64             --ignore-eos             --ib-input-len 81920             '
++ python3 benchmark_serving_ib.py --backend vllm --model /data/llm/Qwen2.5-7B-Instruct-copy/ --dataset-name ib --dataset-path /data/ds/InfiniteBench/ --num-prompts 64 --port 8000 --save-result --result-dir results/ --result-filename vllm_qwen7B_ib_prefix_qps_64_in_81920.json --request-rate 64 --ignore-eos --ib-input-len 81920
Token indices sequence length is longer than the specified maximum sequence length for this model (237833 > 131072). Running this sequence through the model will result in indexing errors
INFO 10-22 11:20:29 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 2.6 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:20:29 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
INFO 10-22 11:20:39 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:20:39 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
INFO 10-22 11:20:49 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:20:49 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
INFO 10-22 11:20:59 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:20:59 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
INFO 10-22 11:21:09 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:21:09 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
INFO 10-22 11:21:19 metrics.py:351] Avg prompt throughput: 0.0 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 0 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 0.0%, CPU KV cache usage: 0.0%.
INFO 10-22 11:21:19 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
INFO:     127.0.0.1:55298 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 11:21:27 metrics.py:351] Avg prompt throughput: 66.7 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:21:27 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:21:32 metrics.py:351] Avg prompt throughput: 7022.7 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:21:32 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:21:37 metrics.py:351] Avg prompt throughput: 4094.9 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:21:37 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:21:42 metrics.py:351] Avg prompt throughput: 3192.4 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:21:42 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:21:47 metrics.py:351] Avg prompt throughput: 1739.3 tokens/s, Avg generation throughput: 19.8 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:21:47 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
Namespace(backend='vllm', base_url=None, host='localhost', port=8000, endpoint='/v1/completions', dataset=None, dataset_name='ib', dataset_path='/data/ds/InfiniteBench/', model='/data/llm/Qwen2.5-7B-Instruct-copy/', tokenizer=None, best_of=1, use_beam_search=False, num_prompts=64, logprobs=None, request_rate=64.0, seed=0, trust_remote_code=False, disable_tqdm=False, profile=False, save_result=True, metadata=None, result_dir='results/', result_filename='vllm_qwen7B_ib_prefix_qps_64_in_81920.json', ignore_eos=True, percentile_metrics='ttft,tpot,itl', metric_percentiles='99', ib_input_len=81920, ib_output_len=128, random_input_len=1024, random_output_len=128, random_range_ratio=1.0, random_prefix_len=0)
Starting initial single prompt test run...
Initial test run completed. Starting main benchmark run...
Traffic request rate: 64.0
  0%|          | 0/64 [00:00<?, ?it/s]INFO:     127.0.0.1:45084 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45088 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45092 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45094 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45108 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45110 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45126 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45128 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45140 - "POST /v1/completions HTTP/1.1" 200 OK
INFO 10-22 11:21:52 metrics.py:351] Avg prompt throughput: 18304.4 tokens/s, Avg generation throughput: 10.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:21:52 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO:     127.0.0.1:45142 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45144 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45154 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45160 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45164 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45174 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45180 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45184 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45190 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45202 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45216 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45224 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45228 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45244 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45260 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45266 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45280 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45296 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45310 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45324 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45334 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45338 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45348 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45352 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45354 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45366 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45372 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45378 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45390 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45396 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45400 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45416 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45426 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45430 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45444 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45450 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45464 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45474 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45480 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45496 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45500 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45516 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45550 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45564 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45574 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45586 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45598 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45518 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45528 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45530 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45538 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45544 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45604 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45614 - "POST /v1/completions HTTP/1.1" 200 OK
INFO:     127.0.0.1:45630 - "POST /v1/completions HTTP/1.1" 200 OK
  2%|▏         | 1/64 [00:09<09:36,  9.15s/it]INFO 10-22 11:21:57 metrics.py:351] Avg prompt throughput: 17603.5 tokens/s, Avg generation throughput: 28.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 61 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:21:57 metrics.py:367] Prefix cache hit rate: GPU: 83.20%, CPU: 0.00%
  3%|▎         | 2/64 [00:11<05:26,  5.26s/it]INFO 10-22 11:22:02 metrics.py:351] Avg prompt throughput: 19572.6 tokens/s, Avg generation throughput: 32.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 60 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:22:02 metrics.py:367] Prefix cache hit rate: GPU: 83.24%, CPU: 0.00%
  5%|▍         | 3/64 [00:15<04:53,  4.81s/it]INFO 10-22 11:22:07 metrics.py:351] Avg prompt throughput: 19394.0 tokens/s, Avg generation throughput: 31.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 59 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:22:07 metrics.py:367] Prefix cache hit rate: GPU: 83.29%, CPU: 0.00%
  6%|▋         | 4/64 [00:20<04:36,  4.60s/it]INFO 10-22 11:22:12 metrics.py:351] Avg prompt throughput: 9804.9 tokens/s, Avg generation throughput: 12.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:22:12 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
INFO 10-22 11:22:17 metrics.py:351] Avg prompt throughput: 4595.4 tokens/s, Avg generation throughput: 9.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:22:17 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
INFO 10-22 11:22:23 metrics.py:351] Avg prompt throughput: 3264.6 tokens/s, Avg generation throughput: 6.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:22:23 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
  8%|▊         | 5/64 [00:37<09:00,  9.16s/it]INFO 10-22 11:22:28 metrics.py:351] Avg prompt throughput: 2763.0 tokens/s, Avg generation throughput: 2.7 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 58 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:22:28 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
INFO 10-22 11:22:33 metrics.py:351] Avg prompt throughput: 2152.1 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 57 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:22:33 metrics.py:367] Prefix cache hit rate: GPU: 83.12%, CPU: 0.00%
  9%|▉         | 6/64 [00:48<09:24,  9.74s/it]INFO 10-22 11:22:38 metrics.py:351] Avg prompt throughput: 19554.4 tokens/s, Avg generation throughput: 32.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 56 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:22:38 metrics.py:367] Prefix cache hit rate: GPU: 83.16%, CPU: 0.00%
 11%|█         | 7/64 [00:52<07:33,  7.96s/it]INFO 10-22 11:22:43 metrics.py:351] Avg prompt throughput: 19317.2 tokens/s, Avg generation throughput: 31.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 55 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:22:43 metrics.py:367] Prefix cache hit rate: GPU: 83.21%, CPU: 0.00%
 12%|█▎        | 8/64 [00:56<06:21,  6.81s/it]INFO 10-22 11:22:48 metrics.py:351] Avg prompt throughput: 19106.1 tokens/s, Avg generation throughput: 31.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 54 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:22:48 metrics.py:367] Prefix cache hit rate: GPU: 83.25%, CPU: 0.00%
 14%|█▍        | 9/64 [01:01<05:32,  6.04s/it]INFO 10-22 11:22:53 metrics.py:351] Avg prompt throughput: 19054.7 tokens/s, Avg generation throughput: 31.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 53 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:22:53 metrics.py:367] Prefix cache hit rate: GPU: 83.30%, CPU: 0.00%
 16%|█▌        | 10/64 [01:05<04:57,  5.52s/it]INFO 10-22 11:22:58 metrics.py:351] Avg prompt throughput: 8027.9 tokens/s, Avg generation throughput: 8.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:22:58 metrics.py:367] Prefix cache hit rate: GPU: 83.08%, CPU: 0.00%
INFO 10-22 11:23:03 metrics.py:351] Avg prompt throughput: 4062.0 tokens/s, Avg generation throughput: 8.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:23:03 metrics.py:367] Prefix cache hit rate: GPU: 83.08%, CPU: 0.00%
INFO 10-22 11:23:08 metrics.py:351] Avg prompt throughput: 3090.9 tokens/s, Avg generation throughput: 6.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:23:08 metrics.py:367] Prefix cache hit rate: GPU: 83.08%, CPU: 0.00%
 17%|█▋        | 11/64 [01:24<08:32,  9.67s/it]INFO 10-22 11:23:14 metrics.py:351] Avg prompt throughput: 2606.2 tokens/s, Avg generation throughput: 4.1 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:23:14 metrics.py:367] Prefix cache hit rate: GPU: 83.08%, CPU: 0.00%
INFO 10-22 11:23:19 metrics.py:351] Avg prompt throughput: 2395.5 tokens/s, Avg generation throughput: 0.0 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 52 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:23:19 metrics.py:367] Prefix cache hit rate: GPU: 83.08%, CPU: 0.00%
INFO 10-22 11:23:24 metrics.py:351] Avg prompt throughput: 12292.9 tokens/s, Avg generation throughput: 23.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 51 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:23:24 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
 19%|█▉        | 12/64 [01:36<08:50, 10.19s/it] 20%|██        | 13/64 [01:40<07:10,  8.44s/it]INFO 10-22 11:23:29 metrics.py:351] Avg prompt throughput: 19517.6 tokens/s, Avg generation throughput: 27.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 50 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:23:29 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
 22%|██▏       | 14/64 [01:44<06:00,  7.21s/it]INFO 10-22 11:23:34 metrics.py:351] Avg prompt throughput: 16613.4 tokens/s, Avg generation throughput: 23.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 48 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:23:34 metrics.py:367] Prefix cache hit rate: GPU: 83.26%, CPU: 0.00%
 23%|██▎       | 15/64 [01:49<05:11,  6.36s/it]INFO 10-22 11:23:39 metrics.py:351] Avg prompt throughput: 19160.0 tokens/s, Avg generation throughput: 31.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 47 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:23:39 metrics.py:367] Prefix cache hit rate: GPU: 83.30%, CPU: 0.00%
 25%|██▌       | 16/64 [01:53<04:36,  5.77s/it]INFO 10-22 11:23:44 metrics.py:351] Avg prompt throughput: 18978.1 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 46 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:23:44 metrics.py:367] Prefix cache hit rate: GPU: 83.34%, CPU: 0.00%
 27%|██▋       | 17/64 [01:58<04:11,  5.36s/it]INFO 10-22 11:23:49 metrics.py:351] Avg prompt throughput: 12299.6 tokens/s, Avg generation throughput: 17.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:23:49 metrics.py:367] Prefix cache hit rate: GPU: 83.14%, CPU: 0.00%
INFO 10-22 11:23:54 metrics.py:351] Avg prompt throughput: 4285.3 tokens/s, Avg generation throughput: 8.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:23:54 metrics.py:367] Prefix cache hit rate: GPU: 83.14%, CPU: 0.00%
INFO 10-22 11:23:59 metrics.py:351] Avg prompt throughput: 3189.7 tokens/s, Avg generation throughput: 6.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:23:59 metrics.py:367] Prefix cache hit rate: GPU: 83.14%, CPU: 0.00%
INFO 10-22 11:24:04 metrics.py:351] Avg prompt throughput: 2668.7 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:24:04 metrics.py:367] Prefix cache hit rate: GPU: 83.14%, CPU: 0.00%
 28%|██▊       | 18/64 [02:18<07:33,  9.86s/it]INFO 10-22 11:24:10 metrics.py:351] Avg prompt throughput: 2433.4 tokens/s, Avg generation throughput: 1.5 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 45 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:24:10 metrics.py:367] Prefix cache hit rate: GPU: 83.14%, CPU: 0.00%
INFO 10-22 11:24:15 metrics.py:351] Avg prompt throughput: 1925.4 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 44 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:24:15 metrics.py:367] Prefix cache hit rate: GPU: 83.18%, CPU: 0.00%
 30%|██▉       | 19/64 [02:30<07:48, 10.41s/it]INFO 10-22 11:24:20 metrics.py:351] Avg prompt throughput: 19285.8 tokens/s, Avg generation throughput: 31.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 43 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:24:20 metrics.py:367] Prefix cache hit rate: GPU: 83.22%, CPU: 0.00%
 31%|███▏      | 20/64 [02:34<06:18,  8.59s/it]INFO 10-22 11:24:25 metrics.py:351] Avg prompt throughput: 18997.7 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 42 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:24:25 metrics.py:367] Prefix cache hit rate: GPU: 83.27%, CPU: 0.00%
 33%|███▎      | 21/64 [02:38<05:15,  7.34s/it]INFO 10-22 11:24:30 metrics.py:351] Avg prompt throughput: 18791.0 tokens/s, Avg generation throughput: 30.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 41 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:24:30 metrics.py:367] Prefix cache hit rate: GPU: 83.31%, CPU: 0.00%
 34%|███▍      | 22/64 [02:43<04:31,  6.47s/it]INFO 10-22 11:24:35 metrics.py:351] Avg prompt throughput: 18695.5 tokens/s, Avg generation throughput: 30.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 40 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:24:35 metrics.py:367] Prefix cache hit rate: GPU: 83.35%, CPU: 0.00%
 36%|███▌      | 23/64 [02:47<04:00,  5.85s/it]INFO 10-22 11:24:40 metrics.py:351] Avg prompt throughput: 7638.7 tokens/s, Avg generation throughput: 8.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:24:40 metrics.py:367] Prefix cache hit rate: GPU: 83.14%, CPU: 0.00%
INFO 10-22 11:24:45 metrics.py:351] Avg prompt throughput: 4217.8 tokens/s, Avg generation throughput: 8.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:24:45 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO 10-22 11:24:50 metrics.py:351] Avg prompt throughput: 3166.2 tokens/s, Avg generation throughput: 6.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:24:50 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO 10-22 11:24:55 metrics.py:351] Avg prompt throughput: 2632.8 tokens/s, Avg generation throughput: 5.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:24:55 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
 38%|███▊      | 24/64 [03:08<06:57, 10.44s/it]INFO 10-22 11:25:00 metrics.py:351] Avg prompt throughput: 2414.9 tokens/s, Avg generation throughput: 1.2 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 39 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:25:00 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO 10-22 11:25:05 metrics.py:351] Avg prompt throughput: 1904.9 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 38 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:25:05 metrics.py:367] Prefix cache hit rate: GPU: 83.19%, CPU: 0.00%
 39%|███▉      | 25/64 [03:20<07:01, 10.81s/it]INFO 10-22 11:25:10 metrics.py:351] Avg prompt throughput: 19284.3 tokens/s, Avg generation throughput: 31.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 37 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:25:10 metrics.py:367] Prefix cache hit rate: GPU: 83.23%, CPU: 0.00%
 41%|████      | 26/64 [03:24<05:37,  8.88s/it]INFO 10-22 11:25:15 metrics.py:351] Avg prompt throughput: 19005.3 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 36 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:25:15 metrics.py:367] Prefix cache hit rate: GPU: 83.27%, CPU: 0.00%
 42%|████▏     | 27/64 [03:29<04:38,  7.53s/it]INFO 10-22 11:25:20 metrics.py:351] Avg prompt throughput: 18742.6 tokens/s, Avg generation throughput: 30.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 35 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:25:20 metrics.py:367] Prefix cache hit rate: GPU: 83.31%, CPU: 0.00%
 44%|████▍     | 28/64 [03:33<03:57,  6.61s/it]INFO 10-22 11:25:25 metrics.py:351] Avg prompt throughput: 18784.5 tokens/s, Avg generation throughput: 30.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 34 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:25:25 metrics.py:367] Prefix cache hit rate: GPU: 83.36%, CPU: 0.00%
 45%|████▌     | 29/64 [03:38<03:28,  5.95s/it]INFO 10-22 11:25:31 metrics.py:351] Avg prompt throughput: 7364.1 tokens/s, Avg generation throughput: 7.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:25:31 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO 10-22 11:25:36 metrics.py:351] Avg prompt throughput: 4377.6 tokens/s, Avg generation throughput: 8.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:25:36 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO 10-22 11:25:41 metrics.py:351] Avg prompt throughput: 3223.7 tokens/s, Avg generation throughput: 6.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:25:41 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO 10-22 11:25:46 metrics.py:351] Avg prompt throughput: 2660.0 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:25:46 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
 47%|████▋     | 30/64 [03:59<05:57, 10.51s/it]INFO 10-22 11:25:51 metrics.py:351] Avg prompt throughput: 2430.0 tokens/s, Avg generation throughput: 1.2 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 33 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:25:51 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
INFO 10-22 11:25:56 metrics.py:351] Avg prompt throughput: 1919.2 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 32 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:25:56 metrics.py:367] Prefix cache hit rate: GPU: 83.20%, CPU: 0.00%
 48%|████▊     | 31/64 [04:11<05:58, 10.85s/it]INFO 10-22 11:26:01 metrics.py:351] Avg prompt throughput: 19210.0 tokens/s, Avg generation throughput: 31.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 31 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:26:01 metrics.py:367] Prefix cache hit rate: GPU: 83.24%, CPU: 0.00%
 50%|█████     | 32/64 [04:15<04:45,  8.91s/it]INFO 10-22 11:26:06 metrics.py:351] Avg prompt throughput: 18984.7 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 30 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:26:06 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
 52%|█████▏    | 33/64 [04:19<03:54,  7.56s/it]INFO 10-22 11:26:11 metrics.py:351] Avg prompt throughput: 18754.9 tokens/s, Avg generation throughput: 30.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 29 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:26:11 metrics.py:367] Prefix cache hit rate: GPU: 83.32%, CPU: 0.00%
 53%|█████▎    | 34/64 [04:24<03:18,  6.62s/it]INFO 10-22 11:26:16 metrics.py:351] Avg prompt throughput: 9277.2 tokens/s, Avg generation throughput: 11.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:26:16 metrics.py:367] Prefix cache hit rate: GPU: 83.12%, CPU: 0.00%
INFO 10-22 11:26:21 metrics.py:351] Avg prompt throughput: 4748.2 tokens/s, Avg generation throughput: 9.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:26:21 metrics.py:367] Prefix cache hit rate: GPU: 83.12%, CPU: 0.00%
INFO 10-22 11:26:26 metrics.py:351] Avg prompt throughput: 3321.0 tokens/s, Avg generation throughput: 6.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:26:26 metrics.py:367] Prefix cache hit rate: GPU: 83.12%, CPU: 0.00%
INFO 10-22 11:26:31 metrics.py:351] Avg prompt throughput: 2699.4 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:26:31 metrics.py:367] Prefix cache hit rate: GPU: 83.12%, CPU: 0.00%
 55%|█████▍    | 35/64 [04:45<05:16, 10.91s/it]INFO 10-22 11:26:36 metrics.py:351] Avg prompt throughput: 2453.4 tokens/s, Avg generation throughput: 1.6 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 28 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:26:36 metrics.py:367] Prefix cache hit rate: GPU: 83.12%, CPU: 0.00%
INFO 10-22 11:26:42 metrics.py:351] Avg prompt throughput: 1935.2 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 27 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:26:42 metrics.py:367] Prefix cache hit rate: GPU: 83.16%, CPU: 0.00%
 56%|█████▋    | 36/64 [04:56<05:11, 11.12s/it]INFO 10-22 11:26:47 metrics.py:351] Avg prompt throughput: 19196.4 tokens/s, Avg generation throughput: 31.3 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 26 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:26:47 metrics.py:367] Prefix cache hit rate: GPU: 83.20%, CPU: 0.00%
 58%|█████▊    | 37/64 [05:01<04:05,  9.10s/it]INFO 10-22 11:26:52 metrics.py:351] Avg prompt throughput: 19011.0 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 25 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:26:52 metrics.py:367] Prefix cache hit rate: GPU: 83.24%, CPU: 0.00%
 59%|█████▉    | 38/64 [05:05<03:20,  7.69s/it]INFO 10-22 11:26:57 metrics.py:351] Avg prompt throughput: 18855.5 tokens/s, Avg generation throughput: 30.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 24 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:26:57 metrics.py:367] Prefix cache hit rate: GPU: 83.28%, CPU: 0.00%
 61%|██████    | 39/64 [05:09<02:47,  6.71s/it]INFO 10-22 11:27:02 metrics.py:351] Avg prompt throughput: 9098.8 tokens/s, Avg generation throughput: 10.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:27:02 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
INFO 10-22 11:27:07 metrics.py:351] Avg prompt throughput: 4722.4 tokens/s, Avg generation throughput: 9.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:27:07 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
INFO 10-22 11:27:12 metrics.py:351] Avg prompt throughput: 3289.2 tokens/s, Avg generation throughput: 6.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:27:12 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
INFO 10-22 11:27:17 metrics.py:351] Avg prompt throughput: 2688.5 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:27:17 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
 62%|██████▎   | 40/64 [05:31<04:25, 11.06s/it]INFO 10-22 11:27:22 metrics.py:351] Avg prompt throughput: 2431.4 tokens/s, Avg generation throughput: 1.7 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 23 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:27:22 metrics.py:367] Prefix cache hit rate: GPU: 83.09%, CPU: 0.00%
INFO 10-22 11:27:28 metrics.py:351] Avg prompt throughput: 1930.7 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 22 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:27:28 metrics.py:367] Prefix cache hit rate: GPU: 83.13%, CPU: 0.00%
 64%|██████▍   | 41/64 [05:42<04:18, 11.26s/it]INFO 10-22 11:27:33 metrics.py:351] Avg prompt throughput: 19240.5 tokens/s, Avg generation throughput: 31.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 21 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:27:33 metrics.py:367] Prefix cache hit rate: GPU: 83.17%, CPU: 0.00%
 66%|██████▌   | 42/64 [05:47<03:22,  9.20s/it]INFO 10-22 11:27:38 metrics.py:351] Avg prompt throughput: 18979.4 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 20 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:27:38 metrics.py:367] Prefix cache hit rate: GPU: 83.21%, CPU: 0.00%
 67%|██████▋   | 43/64 [05:51<02:42,  7.76s/it]INFO 10-22 11:27:43 metrics.py:351] Avg prompt throughput: 18887.2 tokens/s, Avg generation throughput: 30.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 19 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:27:43 metrics.py:367] Prefix cache hit rate: GPU: 83.25%, CPU: 0.00%
 69%|██████▉   | 44/64 [05:56<02:14,  6.75s/it]INFO 10-22 11:27:48 metrics.py:351] Avg prompt throughput: 8971.9 tokens/s, Avg generation throughput: 10.7 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:27:48 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:27:53 metrics.py:351] Avg prompt throughput: 4715.4 tokens/s, Avg generation throughput: 9.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:27:53 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:27:58 metrics.py:351] Avg prompt throughput: 3355.4 tokens/s, Avg generation throughput: 6.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:27:58 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:28:03 metrics.py:351] Avg prompt throughput: 2718.0 tokens/s, Avg generation throughput: 5.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:28:03 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
 70%|███████   | 45/64 [06:17<03:30, 11.06s/it]INFO 10-22 11:28:08 metrics.py:351] Avg prompt throughput: 2464.5 tokens/s, Avg generation throughput: 1.8 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 18 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:28:08 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:28:14 metrics.py:351] Avg prompt throughput: 1955.5 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 17 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:28:14 metrics.py:367] Prefix cache hit rate: GPU: 83.10%, CPU: 0.00%
 72%|███████▏  | 46/64 [06:28<03:22, 11.23s/it]INFO 10-22 11:28:19 metrics.py:351] Avg prompt throughput: 19157.0 tokens/s, Avg generation throughput: 31.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 16 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:28:19 metrics.py:367] Prefix cache hit rate: GPU: 83.14%, CPU: 0.00%
 73%|███████▎  | 47/64 [06:33<02:35,  9.18s/it]INFO 10-22 11:28:24 metrics.py:351] Avg prompt throughput: 19013.1 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 15 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:28:24 metrics.py:367] Prefix cache hit rate: GPU: 83.18%, CPU: 0.00%
 75%|███████▌  | 48/64 [06:37<02:03,  7.75s/it]INFO 10-22 11:28:29 metrics.py:351] Avg prompt throughput: 18734.2 tokens/s, Avg generation throughput: 30.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 14 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:28:29 metrics.py:367] Prefix cache hit rate: GPU: 83.22%, CPU: 0.00%
 77%|███████▋  | 49/64 [06:42<01:41,  6.75s/it]INFO 10-22 11:28:34 metrics.py:351] Avg prompt throughput: 18788.2 tokens/s, Avg generation throughput: 30.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 13 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:28:34 metrics.py:367] Prefix cache hit rate: GPU: 83.26%, CPU: 0.00%
 78%|███████▊  | 50/64 [06:46<01:24,  6.05s/it]INFO 10-22 11:28:39 metrics.py:351] Avg prompt throughput: 7725.0 tokens/s, Avg generation throughput: 8.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:28:39 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:28:44 metrics.py:351] Avg prompt throughput: 4446.1 tokens/s, Avg generation throughput: 9.0 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:28:44 metrics.py:367] Prefix cache hit rate: GPU: 83.06%, CPU: 0.00%
INFO 10-22 11:28:49 metrics.py:351] Avg prompt throughput: 3001.0 tokens/s, Avg generation throughput: 6.1 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:28:49 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
INFO 10-22 11:28:54 metrics.py:351] Avg prompt throughput: 2594.8 tokens/s, Avg generation throughput: 5.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:28:54 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
 80%|███████▉  | 51/64 [07:07<02:18, 10.62s/it]INFO 10-22 11:28:59 metrics.py:351] Avg prompt throughput: 2382.6 tokens/s, Avg generation throughput: 1.2 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 12 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:28:59 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
INFO 10-22 11:29:04 metrics.py:351] Avg prompt throughput: 1879.2 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 11 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:29:04 metrics.py:367] Prefix cache hit rate: GPU: 83.10%, CPU: 0.00%
 81%|████████▏ | 52/64 [07:19<02:11, 10.98s/it]INFO 10-22 11:29:09 metrics.py:351] Avg prompt throughput: 19245.7 tokens/s, Avg generation throughput: 31.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 10 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:29:09 metrics.py:367] Prefix cache hit rate: GPU: 83.14%, CPU: 0.00%
 83%|████████▎ | 53/64 [07:23<01:38,  9.00s/it]INFO 10-22 11:29:14 metrics.py:351] Avg prompt throughput: 19005.4 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 9 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:29:14 metrics.py:367] Prefix cache hit rate: GPU: 83.18%, CPU: 0.00%
 84%|████████▍ | 54/64 [07:28<01:16,  7.62s/it]INFO 10-22 11:29:19 metrics.py:351] Avg prompt throughput: 18754.9 tokens/s, Avg generation throughput: 30.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 8 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:29:19 metrics.py:367] Prefix cache hit rate: GPU: 83.22%, CPU: 0.00%
 86%|████████▌ | 55/64 [07:32<00:59,  6.66s/it]INFO 10-22 11:29:24 metrics.py:351] Avg prompt throughput: 9362.0 tokens/s, Avg generation throughput: 11.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:29:24 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
INFO 10-22 11:29:30 metrics.py:351] Avg prompt throughput: 4761.8 tokens/s, Avg generation throughput: 9.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:29:30 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
INFO 10-22 11:29:35 metrics.py:351] Avg prompt throughput: 3265.5 tokens/s, Avg generation throughput: 6.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:29:35 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
INFO 10-22 11:29:40 metrics.py:351] Avg prompt throughput: 2692.8 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:29:40 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
 88%|████████▊ | 56/64 [07:53<01:26, 10.87s/it]INFO 10-22 11:29:45 metrics.py:351] Avg prompt throughput: 2451.5 tokens/s, Avg generation throughput: 1.4 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 7 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:29:45 metrics.py:367] Prefix cache hit rate: GPU: 83.03%, CPU: 0.00%
INFO 10-22 11:29:50 metrics.py:351] Avg prompt throughput: 1920.1 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 6 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:29:50 metrics.py:367] Prefix cache hit rate: GPU: 83.07%, CPU: 0.00%
 89%|████████▉ | 57/64 [08:05<01:17, 11.11s/it]INFO 10-22 11:29:55 metrics.py:351] Avg prompt throughput: 19231.9 tokens/s, Avg generation throughput: 31.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 5 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:29:55 metrics.py:367] Prefix cache hit rate: GPU: 83.11%, CPU: 0.00%
 91%|█████████ | 58/64 [08:09<00:54,  9.09s/it]INFO 10-22 11:30:00 metrics.py:351] Avg prompt throughput: 18979.1 tokens/s, Avg generation throughput: 30.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 4 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:30:00 metrics.py:367] Prefix cache hit rate: GPU: 83.15%, CPU: 0.00%
 92%|█████████▏| 59/64 [08:13<00:38,  7.69s/it]INFO 10-22 11:30:05 metrics.py:351] Avg prompt throughput: 18773.4 tokens/s, Avg generation throughput: 30.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 3 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:30:05 metrics.py:367] Prefix cache hit rate: GPU: 83.19%, CPU: 0.00%
 94%|█████████▍| 60/64 [08:18<00:26,  6.71s/it]INFO 10-22 11:30:10 metrics.py:351] Avg prompt throughput: 9050.6 tokens/s, Avg generation throughput: 10.9 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:30:10 metrics.py:367] Prefix cache hit rate: GPU: 83.00%, CPU: 0.00%
INFO 10-22 11:30:15 metrics.py:351] Avg prompt throughput: 4849.2 tokens/s, Avg generation throughput: 9.8 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:30:15 metrics.py:367] Prefix cache hit rate: GPU: 83.00%, CPU: 0.00%
INFO 10-22 11:30:20 metrics.py:351] Avg prompt throughput: 3291.7 tokens/s, Avg generation throughput: 6.6 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:30:20 metrics.py:367] Prefix cache hit rate: GPU: 83.00%, CPU: 0.00%
INFO 10-22 11:30:25 metrics.py:351] Avg prompt throughput: 2684.7 tokens/s, Avg generation throughput: 5.4 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 48.6%, CPU KV cache usage: 0.0%.
INFO 10-22 11:30:25 metrics.py:367] Prefix cache hit rate: GPU: 83.00%, CPU: 0.00%
 95%|█████████▌| 61/64 [08:39<00:33, 11.03s/it]INFO 10-22 11:30:31 metrics.py:351] Avg prompt throughput: 2340.6 tokens/s, Avg generation throughput: 1.5 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 2 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:30:31 metrics.py:367] Prefix cache hit rate: GPU: 83.00%, CPU: 0.00%
INFO 10-22 11:30:36 metrics.py:351] Avg prompt throughput: 1891.2 tokens/s, Avg generation throughput: 0.2 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 1 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:30:36 metrics.py:367] Prefix cache hit rate: GPU: 83.04%, CPU: 0.00%
 97%|█████████▋| 62/64 [08:51<00:22, 11.31s/it]INFO 10-22 11:30:41 metrics.py:351] Avg prompt throughput: 19297.2 tokens/s, Avg generation throughput: 31.5 tokens/s, Running: 2 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:30:41 metrics.py:367] Prefix cache hit rate: GPU: 83.08%, CPU: 0.00%
 98%|█████████▊| 63/64 [08:55<00:09,  9.22s/it]INFO 10-22 11:30:46 metrics.py:351] Avg prompt throughput: 13376.2 tokens/s, Avg generation throughput: 38.5 tokens/s, Running: 1 reqs, Swapped: 0 reqs, Pending: 0 reqs, GPU KV cache usage: 24.3%, CPU KV cache usage: 0.0%.
INFO 10-22 11:30:46 metrics.py:367] Prefix cache hit rate: GPU: 83.08%, CPU: 0.00%
100%|██████████| 64/64 [08:59<00:00,  7.47s/it]100%|██████████| 64/64 [08:59<00:00,  8.42s/it]
============ Serving Benchmark Result ============
Successful requests:                     64        
Benchmark duration (s):                  539.17    
Total input tokens:                      5242880   
Total generated tokens:                  8190      
Request throughput (req/s):              0.12      
Output token throughput (tok/s):         15.19     
Total Token throughput (tok/s):          9739.13   
---------------Time to First Token----------------
Mean TTFT (ms):                          258325.46 
Median TTFT (ms):                        253990.03 
P99 TTFT (ms):                           533061.09 
-----Time per Output Token (excl. 1st token)------
Mean TPOT (ms):                          42.52     
Median TPOT (ms):                        23.56     
P99 TPOT (ms):                           140.98    
---------------Inter-token Latency----------------
Mean ITL (ms):                           42.48     
Median ITL (ms):                         23.87     
P99 ITL (ms):                            197.59    
==================================================
+ server_command=None
++ jq -n --arg server None --arg client 'python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_81920.json             --request-rate 64             --ignore-eos             --ib-input-len 81920             ' --arg gpu A100-SXM4-40GB --arg engine vllm '{
              server_command: $server,
              client_command: $client,
              gpu_type: $gpu,
              engine: $engine
            }'
+ jq_output='{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_81920.json             --request-rate 64             --ignore-eos             --ib-input-len 81920             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ echo '{
  "server_command": "None",
  "client_command": "python3 benchmark_serving_ib.py             --backend vllm             --model /data/llm/Qwen2.5-7B-Instruct-copy/             --dataset-name ib             --dataset-path /data/ds/InfiniteBench/             --num-prompts 64             --port 8000             --save-result             --result-dir results/             --result-filename vllm_qwen7B_ib_prefix_qps_64_in_81920.json             --request-rate 64             --ignore-eos             --ib-input-len 81920             ",
  "gpu_type": "A100-SXM4-40GB",
  "engine": "vllm"
}'
+ read -r params
+ kill_gpu_processes
++ whoami
+ pkill -u fjy -f python
INFO 10-22 11:30:48 server.py:228] vLLM ZMQ RPC Server was interrupted.
++ whoami
INFO 10-22 11:30:48 async_llm_engine.py:55] Engine is gracefully shutting down.
+ pkill -u fjy -f python3
INFO 10-22 11:30:48 launcher.py:67] Gracefully stopping http server
++ whoami
+ pkill -u fjy -f tritonserver
++ whoami
+ pkill -u fjy -f pt_main_thread
++ whoami
+ pkill -u fjy -f text-generation
++ whoami
+ pkill -u fjy -f lmdeploy
INFO:     Shutting down
++ nvidia-smi --query-gpu=memory.used --format=csv,noheader,nounits
++ head -n 1
+ '[' 4 -ge 1000 ']'
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
